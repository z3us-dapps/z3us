"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8580],{86712:function(e,t,n){let r;n.d(t,{F9x:function(){return oH},Kf_:function(){return uP},OF6:function(){return o2},XdC:function(){return uR}}),n(34406);var a,i,s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function u(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function l(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return s}function d(e,t,n){if(n||2==arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}function p(e){return this instanceof p?(this.v=e,this):new p(e)}function f(e){return"function"==typeof e}function h(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var m=h(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,t){return t+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function _(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var y=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,t,n,r,a;if(!this.closed){this.closed=!0;var i=this._parentage;if(i){if(this._parentage=null,Array.isArray(i))try{for(var s=l(i),o=s.next();!o.done;o=s.next())o.value.remove(this)}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else i.remove(this)}var u=this.initialTeardown;if(f(u))try{u()}catch(e){a=e instanceof m?e.errors:[e]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var h=l(p),_=h.next();!_.done;_=h.next()){var y=_.value;try{b(y)}catch(e){a=a??[],e instanceof m?a=d(d([],c(a)),c(e.errors)):a.push(e)}}}catch(e){n={error:e}}finally{try{_&&!_.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}}if(a)throw new m(a)}},t.prototype.add=function(e){var n;if(e&&e!==this){if(this.closed)b(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&_(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&_(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),v=y.EMPTY;function g(e){return e instanceof y||e&&"closed"in e&&f(e.remove)&&f(e.add)&&f(e.unsubscribe)}function b(e){f(e)?e():e.unsubscribe()}var w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},x={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=x.delegate;return null!=a&&a.setTimeout?a.setTimeout.apply(a,d([e,t],c(n))):setTimeout.apply(void 0,d([e,t],c(n)))},clearTimeout:function(e){var t=x.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function k(e){x.setTimeout(function(){throw e})}function S(){}var T=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,g(t)&&t.add(n)):n.destination=E,n}return o(t,e),t.create=function(e,t,n){return new O(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(y),P=Function.prototype.bind;function R(e,t){return P.call(e,t)}var C=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){k(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){k(e)}else k(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){k(e)}},e}(),O=function(e){function t(t,n,r){var a,i,s=e.call(this)||this;return f(t)||!t?i={next:t??void 0,error:n??void 0,complete:r??void 0}:s&&w.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},i={next:t.next&&R(t.next,a),error:t.error&&R(t.error,a),complete:t.complete&&R(t.complete,a)}):i=t,s.destination=new C(i),s}return o(t,e),t}(T),E={closed:!0,next:S,error:function(e){throw e},complete:S},A="function"==typeof Symbol&&Symbol.observable||"@@observable";function I(e){return e}var N=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,a,i,s=(r=e)&&r instanceof T||r&&f(r.next)&&f(r.error)&&f(r.complete)&&g(r)?e:new O(e,t,n);return a=this.operator,i=this.source,s.add(a?a.call(s,i):i?this._subscribe(s):this._trySubscribe(s)),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=q(t))(function(t,r){var a=new O({next:function(t){try{e(t)}catch(e){r(e),a.unsubscribe()}},error:r,complete:t});n.subscribe(a)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[A]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?I:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=q(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function q(e){var t;return null!==(t=e??w.Promise)&&void 0!==t?t:Promise}function j(e){return function(t){if(f(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function D(e,t,n,r,a){return new Z(e,t,n,r,a)}var Z=function(e){function t(t,n,r,a,i,s){var o=e.call(this,t)||this;return o.onFinalize=i,o.shouldUnsubscribe=s,o._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,o._error=a?function(e){try{a(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,o._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,o}return o(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),n||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(T),F=h(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),U=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return o(t,e),t.prototype.lift=function(e){var t=new L(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new F},t.prototype.next=function(e){var t=this;(function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var a=l(t.currentObservers),i=a.next();!i.done;i=a.next())i.value.next(e)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}})()},t.prototype.error=function(e){var t=this;(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}})()},t.prototype.complete=function(){var e=this;(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})()},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this.hasError,r=this.isStopped,a=this.observers;return n||r?v:(this.currentObservers=null,a.push(e),new y(function(){t.currentObservers=null,_(a,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,n=this.thrownError,r=this.isStopped;t?e.error(n):r&&e.complete()},t.prototype.asObservable=function(){var e=new N;return e.source=this,e},t.create=function(e,t){return new L(e,t)},t}(N),L=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return o(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:v},t}(U),z=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return o(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n.closed||t.next(this._value),n},t.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,n=this._value;if(e)throw t;return this._throwIfClosed(),n},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(U),$={now:function(){return($.delegate||Date).now()},delegate:void 0},M=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=$);var a=e.call(this)||this;return a._bufferSize=t,a._windowTime=n,a._timestampProvider=r,a._buffer=[],a._infiniteTimeWindow=!0,a._infiniteTimeWindow=n===1/0,a._bufferSize=Math.max(1,t),a._windowTime=Math.max(1,n),a}return o(t,e),t.prototype.next=function(t){var n=this.isStopped,r=this._buffer,a=this._infiniteTimeWindow,i=this._timestampProvider,s=this._windowTime;n||(r.push(t),a||r.push(i.now()+s)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer,a=r.slice(),i=0;i<a.length&&!e.closed;i+=n?1:2)e.next(a[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this._bufferSize,t=this._timestampProvider,n=this._buffer,r=this._infiniteTimeWindow,a=(r?1:2)*e;if(e<1/0&&a<n.length&&n.splice(0,n.length-a),!r){for(var i=t.now(),s=0,o=1;o<n.length&&n[o]<=i;o+=2)s=o;s&&n.splice(0,s+1)}},t}(U),V=function(e){function t(t,n){return e.call(this)||this}return o(t,e),t.prototype.schedule=function(e,t){return this},t}(y),B={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=B.delegate;return null!=a&&a.setInterval?a.setInterval.apply(a,d([e,t],c(n))):setInterval.apply(void 0,d([e,t],c(n)))},clearInterval:function(e){var t=B.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},W=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return o(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n,r=this.id,a=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(a,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(a,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),B.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&B.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,_(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(V),K=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=$.now,e}(),G=new(function(e){function t(t,n){void 0===n&&(n=K.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return o(t,e),t.prototype.flush=function(e){var t,n=this.actions;if(this._active){n.push(e);return}this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}},t}(K))(W),H=new N(function(e){return e.complete()});function J(e){return e&&f(e.schedule)}function Y(e){return e[e.length-1]}function X(e){return f(Y(e))?e.pop():void 0}function Q(e){return J(Y(e))?e.pop():void 0}var ee=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function et(e){return f(null==e?void 0:e.then)}function en(e){return Symbol.asyncIterator&&f(null==e?void 0:e[Symbol.asyncIterator])}function er(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ea="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function ei(e){return f(null==e?void 0:e[ea])}function es(e){return function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(e,t||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){a[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||o(e,t)})})}function o(e,t){try{var n;(n=a[e](t)).value instanceof p?Promise.resolve(n.value.v).then(u,l):c(i[0][2],n)}catch(e){c(i[0][3],e)}}function u(e){o("next",e)}function l(e){o("throw",e)}function c(e,t){e(t),i.shift(),i.length&&o(i[0][0],i[0][1])}}(this,arguments,function(){var t,n,r;return u(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,p(t.read())];case 3:return r=(n=a.sent()).value,n.done?[4,p(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,p(r)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function eo(e){return f(null==e?void 0:e.getReader)}function eu(e){if(e instanceof N)return e;if(null!=e){if(f(e[A]))return new N(function(t){var n=e[A]();if(f(n.subscribe))return n.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(ee(e))return new N(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()});if(et(e))return new N(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,k)});if(en(e))return el(e);if(ei(e))return new N(function(t){var n,r;try{for(var a=l(e),i=a.next();!i.done;i=a.next()){var s=i.value;if(t.next(s),t.closed)return}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}t.complete()});if(eo(e))return el(es(e))}throw er(e)}function el(e){return new N(function(t){(function(e,t){var n,r,a,i,s,o,c,d;return s=this,o=void 0,c=void 0,d=function(){var s;return u(this,function(o){switch(o.label){case 0:o.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=l(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,a){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,a,(t=e[n](t)).done,t.value)})}}}(e),o.label=1;case 1:return[4,n.next()];case 2:if((r=o.sent()).done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];o.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a={error:o.sent()},[3,11];case 6:return o.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:o.sent(),o.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})},new(c||(c=Promise))(function(e,t){function n(e){try{a(d.next(e))}catch(e){t(e)}}function r(e){try{a(d.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):((a=t.value)instanceof c?a:new c(function(e){e(a)})).then(n,r)}a((d=d.apply(s,o||[])).next())})})(e,t).catch(function(e){return t.error(e)})})}function ec(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=!1);var i=t.schedule(function(){n(),a?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!a)return i}function ed(e,t){return void 0===t&&(t=0),j(function(n,r){n.subscribe(D(r,function(n){return ec(r,e,function(){return r.next(n)},t)},function(){return ec(r,e,function(){return r.complete()},t)},function(n){return ec(r,e,function(){return r.error(n)},t)}))})}function ep(e,t){return void 0===t&&(t=0),j(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function ef(e,t){if(!e)throw Error("Iterable cannot be null");return new N(function(n){ec(n,t,function(){var r=e[Symbol.asyncIterator]();ec(n,t,function(){r.next().then(function(e){e.done?n.complete():n.next(e.value)})},0,!0)})})}function eh(e,t){return t?function(e,t){if(null!=e){if(f(e[A]))return eu(e).pipe(ep(t),ed(t));if(ee(e))return new N(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})});if(et(e))return eu(e).pipe(ep(t),ed(t));if(en(e))return ef(e,t);if(ei(e))return new N(function(n){var r;return ec(n,t,function(){r=e[ea](),ec(n,t,function(){var e,t,a;try{t=(e=r.next()).value,a=e.done}catch(e){n.error(e);return}a?n.complete():n.next(t)},0,!0)}),function(){return f(null==r?void 0:r.return)&&r.return()}});if(eo(e))return ef(es(e),t)}throw er(e)}(e,t):eu(e)}function em(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Q(e);return eh(e,n)}var e_=h(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function ey(e,t){var n="object"==typeof t;return new Promise(function(r,a){var i=new O({next:function(e){r(e),i.unsubscribe()},error:a,complete:function(){n?r(t.defaultValue):a(new e_)}});e.subscribe(i)})}function ev(e,t){return j(function(n,r){var a=0;n.subscribe(D(r,function(n){r.next(e.call(t,n,a++))}))})}var eg=Array.isArray;function eb(e){return ev(function(t){return eg(t)?e.apply(void 0,d([],c(t))):e(t)})}var ew=Array.isArray,ex=Object.getPrototypeOf,ek=Object.prototype,eS=Object.keys;function eT(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Q(t),a=X(t),i=function(e){if(1===e.length){var t=e[0];if(ew(t))return{args:t,keys:null};if(t&&"object"==typeof t&&ex(t)===ek){var n=eS(t);return{args:n.map(function(e){return t[e]}),keys:n}}}return{args:e,keys:null}}(t),s=i.args,o=i.keys;if(0===s.length)return eh([],r);var u=new N((void 0===(e=o?function(e){return o.reduce(function(t,n,r){return t[n]=e[r],t},{})}:I)&&(e=I),function(t){var n,a,i;n=r,a=function(){for(var n=s.length,a=Array(n),i=n,o=n,u=function(n){var u,l,c;u=r,l=function(){var u=eh(s[n],r),l=!1;u.subscribe(D(t,function(r){a[n]=r,l||(l=!0,o--),o||t.next(e(a.slice()))},function(){--i||t.complete()}))},c=t,u?ec(c,u,l):l()},l=0;l<n;l++)u(l)},i=t,n?ec(i,n,a):a()}));return a?u.pipe(eb(a)):u}function eP(e,t,n){return void 0===n&&(n=1/0),f(t)?eP(function(n,r){return ev(function(e,a){return t(n,e,r,a)})(eu(e(n,r)))},n):("number"==typeof t&&(n=t),j(function(t,r){var a,i,s,o,u,l,c,d,p,f,h,m;return a=n,l=[],c=0,d=0,p=!1,f=function(){!p||l.length||c||r.complete()},h=function(e){return c<a?m(e):l.push(e)},m=function(t){s&&r.next(t),c++;var n=!1;eu(e(t,d++)).subscribe(D(r,function(e){null==i||i(e),s?h(e):r.next(e)},function(){n=!0},void 0,function(){if(n)try{for(c--;l.length&&c<a;)!function(){var e=l.shift();o?ec(r,o,function(){return m(e)}):m(e)}();f()}catch(e){r.error(e)}}))},t.subscribe(D(r,h,function(){p=!0,f()})),function(){null==u||u()}}))}var eR=["addListener","removeListener"],eC=["addEventListener","removeEventListener"],eO=["on","off"];function eE(e,t,n,r){if(f(n)&&(r=n,n=void 0),r)return eE(e,t,n).pipe(eb(r));var a=c(f(e.addEventListener)&&f(e.removeEventListener)?eC.map(function(r){return function(a){return e[r](t,a,n)}}):f(e.addListener)&&f(e.removeListener)?eR.map(eA(e,t)):f(e.on)&&f(e.off)?eO.map(eA(e,t)):[],2),i=a[0],s=a[1];if(!i&&ee(e))return eP(function(e){return eE(e,t,n)})(eu(e));if(!i)throw TypeError("Invalid event target");return new N(function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return i(t),function(){return s(t)}})}function eA(e,t){return function(n){return function(r){return e[n](t,r)}}}function eI(e,t,n){void 0===e&&(e=0),void 0===n&&(n=G);var r=-1;return null!=t&&(J(t)?n=t:r=t),new N(function(t){var a,i=(a=e)instanceof Date&&!isNaN(a)?+e-n.now():e;i<0&&(i=0);var s=0;return n.schedule(function(){t.closed||(t.next(s++),0<=r?this.schedule(void 0,r):t.complete())},i)})}function eN(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Q(t),a="number"==typeof Y(t)?t.pop():1/0;return t.length?1===t.length?eu(t[0]):(void 0===(e=a)&&(e=1/0),eP(I,e))(eh(t,r)):H}function eq(e,t){return j(function(n,r){var a=0;n.subscribe(D(r,function(n){return e.call(t,n,a++)&&r.next(n)}))})}function ej(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?eq(function(t,n){return e(t,n,r)}):I,j(function(e,t){var n=0;e.subscribe(D(t,function(e){++n<=1&&(t.next(e),1<=n&&t.complete())}))}),n?j(function(e,n){var r=!1;e.subscribe(D(n,function(e){r=!0,n.next(e)},function(){r||n.next(t),n.complete()}))}):j(function(e,t){var n=!1;e.subscribe(D(t,function(e){n=!0,t.next(e)},function(){return n?t.complete():t.error(new e_)}))}))}}function eD(e,t){return j(function(n,r){var a=null,i=0,s=!1,o=function(){return s&&!a&&r.complete()};n.subscribe(D(r,function(n){null==a||a.unsubscribe();var s=0,u=i++;eu(e(n,u)).subscribe(a=D(r,function(e){return r.next(t?t(n,e,u,s++):e)},function(){a=null,o()}))},function(){s=!0,o()}))})}function eZ(e,t,n){var r=f(e)||t||n?{next:e,error:t,complete:n}:e;return r?j(function(e,t){null===(n=r.subscribe)||void 0===n||n.call(r);var n,a=!0;e.subscribe(D(t,function(e){var n;null===(n=r.next)||void 0===n||n.call(r,e),t.next(e)},function(){var e;a=!1,null===(e=r.complete)||void 0===e||e.call(r),t.complete()},function(e){var n;a=!1,null===(n=r.error)||void 0===n||n.call(r,e),t.error(e)},function(){var e,t;a&&(null===(e=r.unsubscribe)||void 0===e||e.call(r)),null===(t=r.finalize)||void 0===t||t.call(r)}))}):I}function eF(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=X(e);return j(function(t,r){for(var a=e.length,i=Array(a),s=e.map(function(){return!1}),o=!1,u=function(t){eu(e[t]).subscribe(D(r,function(e){i[t]=e,!o&&!s[t]&&(s[t]=!0,(o=s.every(I))&&(s=null))},S))},l=0;l<a;l++)u(l);t.subscribe(D(r,function(e){if(o){var t=d([e],c(i));r.next(n?n.apply(void 0,d([],c(t))):t)}}))})}function eU(e,t,n,r){return new(n||(n=Promise))(function(a,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,o)}u((r=r.apply(e,t||[])).next())})}function eL(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}function ez(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return s}function e$(e,t,n){if(n||2==arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}var eM={withStackTrace:!1},eV=function(e,t,n){return void 0===n&&(n=eM),{data:t.isOk()?{type:"Ok",value:t.value}:{type:"Err",value:t.error},message:e,stack:n.withStackTrace?Error().stack:void 0}},eB=function(){function e(e){this._promise=e}return e.fromSafePromise=function(t){var n=t.then(function(e){return new e0(e)});return new e(n)},e.fromPromise=function(t,n){var r=t.then(function(e){return new e0(e)}).catch(function(e){return new e1(n(e))});return new e(r)},e.combine=function(e){return eH(e)},e.combineWithAllErrors=function(e){return eY(e)},e.prototype.map=function(t){var n=this;return new e(this._promise.then(function(e){return eU(n,void 0,void 0,function(){var n;return eL(this,function(r){switch(r.label){case 0:return e.isErr()?[2,new e1(e.error)]:(n=e0.bind,[4,t(e.value)]);case 1:return[2,new(n.apply(e0,[void 0,r.sent()]))]}})})}))},e.prototype.mapErr=function(t){var n=this;return new e(this._promise.then(function(e){return eU(n,void 0,void 0,function(){var n;return eL(this,function(r){switch(r.label){case 0:return e.isOk()?[2,new e0(e.value)]:(n=e1.bind,[4,t(e.error)]);case 1:return[2,new(n.apply(e1,[void 0,r.sent()]))]}})})}))},e.prototype.andThen=function(t){return new e(this._promise.then(function(n){if(n.isErr())return new e1(n.error);var r=t(n.value);return r instanceof e?r._promise:r}))},e.prototype.orElse=function(t){var n=this;return new e(this._promise.then(function(e){return eU(n,void 0,void 0,function(){return eL(this,function(n){return e.isErr()?[2,t(e.error)]:[2,new e0(e.value)]})})}))},e.prototype.match=function(e,t){return this._promise.then(function(n){return n.match(e,t)})},e.prototype.unwrapOr=function(e){return this._promise.then(function(t){return t.unwrapOr(e)})},e.prototype.then=function(e,t){return this._promise.then(e,t)},e}(),eW=function(e){return new eB(Promise.resolve(new e1(e)))};eB.fromPromise,eB.fromSafePromise;var eK,eG=function(e){return e.reduce(function(e,t){var n;return e.isOk()?t.isErr()?eQ(t.error):e.map((n=t.value,function(e){return e$(e$([],ez(e),!1),[n],!1)})):e},eX([]))},eH=function(e){return eB.fromSafePromise(Promise.all(e)).andThen(eG)},eJ=function(e){return e.reduce(function(e,t){return t.isErr()?e.isErr()?eQ(e$(e$([],ez(e.error),!1),[t.error],!1)):eQ([t.error]):e.isErr()?e:eX(e$(e$([],ez(e.value),!1),[t.value],!1))},eX([]))},eY=function(e){return eB.fromSafePromise(Promise.all(e)).andThen(eJ)};(i$=eK||(eK={})).fromThrowable=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{var a=e.apply(void 0,e$([],ez(n),!1));return eX(a)}catch(e){return eQ(t?t(e):e)}}},i$.combine=function(e){return eG(e)},i$.combineWithAllErrors=function(e){return eJ(e)};var eX=function(e){return new e0(e)},eQ=function(e){return new e1(e)},e0=function(){function e(e){this.value=e}return e.prototype.isOk=function(){return!0},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(e){return eX(e(this.value))},e.prototype.mapErr=function(e){return eX(this.value)},e.prototype.andThen=function(e){return e(this.value)},e.prototype.orElse=function(e){return eX(this.value)},e.prototype.asyncAndThen=function(e){return e(this.value)},e.prototype.asyncMap=function(e){return eB.fromSafePromise(e(this.value))},e.prototype.unwrapOr=function(e){return this.value},e.prototype.match=function(e,t){return e(this.value)},e.prototype._unsafeUnwrap=function(e){return this.value},e.prototype._unsafeUnwrapErr=function(e){throw eV("Called `_unsafeUnwrapErr` on an Ok",this,e)},e}(),e1=function(){function e(e){this.error=e}return e.prototype.isOk=function(){return!1},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(e){return eQ(this.error)},e.prototype.mapErr=function(e){return eQ(e(this.error))},e.prototype.andThen=function(e){return eQ(this.error)},e.prototype.orElse=function(e){return e(this.error)},e.prototype.asyncAndThen=function(e){return eW(this.error)},e.prototype.asyncMap=function(e){return eW(this.error)},e.prototype.unwrapOr=function(e){return e},e.prototype.match=function(e,t){return t(this.error)},e.prototype._unsafeUnwrap=function(e){throw eV("Called `_unsafeUnwrap` on an Err",this,e)},e.prototype._unsafeUnwrapErr=function(e){return this.error},e}();eK.fromThrowable,(iM=iH||(iH={})).assertEqual=e=>e,iM.assertIs=function(e){},iM.assertNever=function(e){throw Error()},iM.arrayToEnum=e=>{let t={};for(let n of e)t[n]=n;return t},iM.getValidEnumValues=e=>{let t=iM.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(let r of t)n[r]=e[r];return iM.objectValues(n)},iM.objectValues=e=>iM.objectKeys(e).map(function(t){return e[t]}),iM.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},iM.find=(e,t)=>{for(let n of e)if(t(n))return n},iM.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,iM.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},iM.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(iJ||(iJ={})).mergeShapes=(e,t)=>({...e,...t});let e2=iH.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),e9=e=>{switch(typeof e){case"undefined":return e2.undefined;case"string":return e2.string;case"number":return isNaN(e)?e2.nan:e2.number;case"boolean":return e2.boolean;case"function":return e2.function;case"bigint":return e2.bigint;case"symbol":return e2.symbol;case"object":return Array.isArray(e)?e2.array:null===e?e2.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?e2.promise:"u">typeof Map&&e instanceof Map?e2.map:"u">typeof Set&&e instanceof Set?e2.set:"u">typeof Date&&e instanceof Date?e2.date:e2.object;default:return e2.unknown}},e4=iH.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),e3=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(r);else if("invalid_return_type"===a.code)r(a.returnTypeError);else if("invalid_arguments"===a.code)r(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,r=0;for(;r<a.path.length;){let n=a.path[r];r===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,iH.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},n=[];for(let r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};e3.create=e=>new e3(e);let e5=(e,t)=>{let n;switch(e.code){case e4.invalid_type:n=e.received===e2.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case e4.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,iH.jsonStringifyReplacer)}`;break;case e4.unrecognized_keys:n=`Unrecognized key(s) in object: ${iH.joinValues(e.keys,", ")}`;break;case e4.invalid_union:n="Invalid input";break;case e4.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${iH.joinValues(e.options)}`;break;case e4.invalid_enum_value:n=`Invalid enum value. Expected ${iH.joinValues(e.options)}, received '${e.received}'`;break;case e4.invalid_arguments:n="Invalid function arguments";break;case e4.invalid_return_type:n="Invalid function return type";break;case e4.invalid_date:n="Invalid date";break;case e4.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:iH.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case e4.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case e4.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case e4.custom:n="Invalid input";break;case e4.invalid_intersection_types:n="Intersection results could not be merged";break;case e4.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case e4.not_finite:n="Number must be finite";break;default:n=t.defaultError,iH.assertNever(e)}return{message:n}},e6=e=>{let{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],s={...a,path:i},o="",u=r.filter(e=>!!e).slice().reverse();for(let e of u)o=e(s,{data:t,defaultError:o}).message;return{...a,path:i,message:a.message||o}};function e8(e,t){let n=e6({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,e5,e5].filter(e=>!!e)});e.common.issues.push(n)}class e7{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let r of t){if("aborted"===r.status)return te;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let e of t)n.push({key:await e.key,value:await e.value});return e7.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let r of t){let{key:t,value:a}=r;if("aborted"===t.status||"aborted"===a.status)return te;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),("u">typeof a.value||r.alwaysSet)&&(n[t.value]=a.value)}return{status:e.value,value:n}}}let te=Object.freeze({status:"aborted"}),tt=e=>({status:"dirty",value:e}),tn=e=>({status:"valid",value:e}),tr=e=>"aborted"===e.status,ta=e=>"dirty"===e.status,ti=e=>"valid"===e.status,ts=e=>"u">typeof Promise&&e instanceof Promise;(iV=iY||(iY={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},iV.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;let to=class{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},tu=(e,t)=>{if(ti(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new e3(e.common.issues);return this._error=t,this._error}}};function tl(e){if(!e)return{};let{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:typeof t.data>"u"?{message:r??t.defaultError}:{message:n??t.defaultError},description:a}}let tc=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return e9(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:e9(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new e7,ctx:{common:e.parent.common,data:e.data,parsedType:e9(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(ts(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:e9(e)},a=this._parseSync({data:e,path:r.path,parent:r});return tu(r,a)}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:e9(e)},r=this._parse({data:e,path:n.path,parent:n}),a=await (ts(r)?r:Promise.resolve(r));return tu(n,a)}refine(e,t){let n=e=>"string"==typeof t||typeof t>"u"?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{let a=e(t),i=()=>r.addIssue({code:e4.custom,...n(t)});return"u">typeof Promise&&a instanceof Promise?a.then(e=>!!e||(i(),!1)):!!a||(i(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1))}_refinement(e){return new tB({schema:this,typeName:iX.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return tW.create(this,this._def)}nullable(){return tK.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return tI.create(this,this._def)}promise(){return tV.create(this,this._def)}or(e){return tq.create([this,e],this._def)}and(e){return tj.create(this,e,this._def)}transform(e){return new tB({...tl(this._def),schema:this,typeName:iX.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new tG({...tl(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:iX.ZodDefault})}brand(){return new tY({typeName:iX.ZodBranded,type:this,...tl(this._def)})}catch(e){return new tH({...tl(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:iX.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return tX.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},td=/^c[^\s-]{8,}$/i,tp=/^[a-z][a-z0-9]*$/,tf=/[0-9A-HJKMNP-TV-Z]{26}/,th=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,tm=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,t_=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,ty=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,tv=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,tg=e=>e.precision?e.offset?RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):0===e.precision?e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$"),tb=class e extends tc{constructor(){super(...arguments),this._regex=(e,t,n)=>this.refinement(t=>e.test(t),{validation:t,code:e4.invalid_string,...iY.errToObj(n)}),this.nonempty=e=>this.min(1,iY.errToObj(e)),this.trim=()=>new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){let t;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==e2.string){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e2.string,received:t.parsedType}),te}let n=new e7;for(let i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if("max"===i.kind)e.data.length>i.value&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if("length"===i.kind){let r=e.data.length>i.value,a=e.data.length<i.value;(r||a)&&(t=this._getOrReturnCtx(e,t),r?e8(t,{code:e4.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&e8(t,{code:e4.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if("email"===i.kind)tm.test(e.data)||(e8(t=this._getOrReturnCtx(e,t),{validation:"email",code:e4.invalid_string,message:i.message}),n.dirty());else if("emoji"===i.kind)t_.test(e.data)||(e8(t=this._getOrReturnCtx(e,t),{validation:"emoji",code:e4.invalid_string,message:i.message}),n.dirty());else if("uuid"===i.kind)th.test(e.data)||(e8(t=this._getOrReturnCtx(e,t),{validation:"uuid",code:e4.invalid_string,message:i.message}),n.dirty());else if("cuid"===i.kind)td.test(e.data)||(e8(t=this._getOrReturnCtx(e,t),{validation:"cuid",code:e4.invalid_string,message:i.message}),n.dirty());else if("cuid2"===i.kind)tp.test(e.data)||(e8(t=this._getOrReturnCtx(e,t),{validation:"cuid2",code:e4.invalid_string,message:i.message}),n.dirty());else if("ulid"===i.kind)tf.test(e.data)||(e8(t=this._getOrReturnCtx(e,t),{validation:"ulid",code:e4.invalid_string,message:i.message}),n.dirty());else if("url"===i.kind)try{new URL(e.data)}catch{e8(t=this._getOrReturnCtx(e,t),{validation:"url",code:e4.invalid_string,message:i.message}),n.dirty()}else{var r,a;"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(e.data)||(e8(t=this._getOrReturnCtx(e,t),{validation:"regex",code:e4.invalid_string,message:i.message}),n.dirty())):"trim"===i.kind?e.data=e.data.trim():"includes"===i.kind?e.data.includes(i.value,i.position)||(e8(t=this._getOrReturnCtx(e,t),{code:e4.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):"toLowerCase"===i.kind?e.data=e.data.toLowerCase():"toUpperCase"===i.kind?e.data=e.data.toUpperCase():"startsWith"===i.kind?e.data.startsWith(i.value)||(e8(t=this._getOrReturnCtx(e,t),{code:e4.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):"endsWith"===i.kind?e.data.endsWith(i.value)||(e8(t=this._getOrReturnCtx(e,t),{code:e4.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):"datetime"===i.kind?tg(i).test(e.data)||(e8(t=this._getOrReturnCtx(e,t),{code:e4.invalid_string,validation:"datetime",message:i.message}),n.dirty()):"ip"===i.kind?(r=e.data,("v4"===(a=i.version)||!a)&&ty.test(r)||("v6"===a||!a)&&tv.test(r)||(e8(t=this._getOrReturnCtx(e,t),{validation:"ip",code:e4.invalid_string,message:i.message}),n.dirty())):iH.assertNever(i)}return{status:n.value,value:e.data}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(e){return this._addCheck({kind:"email",...iY.errToObj(e)})}url(e){return this._addCheck({kind:"url",...iY.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...iY.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...iY.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...iY.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...iY.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...iY.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...iY.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(null==e?void 0:e.precision)>"u"?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...iY.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...iY.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...iY.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...iY.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...iY.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...iY.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...iY.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...iY.errToObj(t)})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};tb.create=e=>{var t;return new tb({checks:[],typeName:iX.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...tl(e)})};let tw=class e extends tc{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==e2.number){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e2.number,received:t.parsedType}),te}let n=new e7;for(let r of this._def.checks)"int"===r.kind?iH.isInteger(e.data)||(e8(t=this._getOrReturnCtx(e,t),{code:e4.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"multipleOf"===r.kind?0!==function(e,t){let n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),s=parseInt(t.toFixed(a).replace(".",""));return i%s/Math.pow(10,a)}(e.data,r.value)&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(e8(t=this._getOrReturnCtx(e,t),{code:e4.not_finite,message:r.message}),n.dirty()):iH.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,iY.toString(t))}gt(e,t){return this.setLimit("min",e,!1,iY.toString(t))}lte(e,t){return this.setLimit("max",e,!0,iY.toString(t))}lt(e,t){return this.setLimit("max",e,!1,iY.toString(t))}setLimit(t,n,r,a){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:iY.toString(a)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(e){return this._addCheck({kind:"int",message:iY.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:iY.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:iY.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:iY.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:iY.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:iY.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:iY.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:iY.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:iY.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&iH.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};tw.create=e=>new tw({checks:[],typeName:iX.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...tl(e)});let tx=class e extends tc{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==e2.bigint){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e2.bigint,received:t.parsedType}),te}let n=new e7;for(let r of this._def.checks)"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):iH.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,iY.toString(t))}gt(e,t){return this.setLimit("min",e,!1,iY.toString(t))}lte(e,t){return this.setLimit("max",e,!0,iY.toString(t))}lt(e,t){return this.setLimit("max",e,!1,iY.toString(t))}setLimit(t,n,r,a){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:iY.toString(a)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:iY.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:iY.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:iY.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:iY.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:iY.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};tx.create=e=>{var t;return new tx({checks:[],typeName:iX.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...tl(e)})};let tk=class extends tc{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==e2.boolean){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e2.boolean,received:t.parsedType}),te}return tn(e.data)}};tk.create=e=>new tk({typeName:iX.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...tl(e)});let tS=class e extends tc{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==e2.date){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e2.date,received:t.parsedType}),te}if(isNaN(e.data.getTime())){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_date}),te}let n=new e7;for(let r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),n.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),n.dirty()):iH.assertNever(r);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:iY.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:iY.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}};tS.create=e=>new tS({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:iX.ZodDate,...tl(e)});let tT=class extends tc{_parse(e){if(this._getType(e)!==e2.symbol){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e2.symbol,received:t.parsedType}),te}return tn(e.data)}};tT.create=e=>new tT({typeName:iX.ZodSymbol,...tl(e)});let tP=class extends tc{_parse(e){if(this._getType(e)!==e2.undefined){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e2.undefined,received:t.parsedType}),te}return tn(e.data)}};tP.create=e=>new tP({typeName:iX.ZodUndefined,...tl(e)});let tR=class extends tc{_parse(e){if(this._getType(e)!==e2.null){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e2.null,received:t.parsedType}),te}return tn(e.data)}};tR.create=e=>new tR({typeName:iX.ZodNull,...tl(e)});let tC=class extends tc{constructor(){super(...arguments),this._any=!0}_parse(e){return tn(e.data)}};tC.create=e=>new tC({typeName:iX.ZodAny,...tl(e)});let tO=class extends tc{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tn(e.data)}};tO.create=e=>new tO({typeName:iX.ZodUnknown,...tl(e)});let tE=class extends tc{_parse(e){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e2.never,received:t.parsedType}),te}};tE.create=e=>new tE({typeName:iX.ZodNever,...tl(e)});let tA=class extends tc{_parse(e){if(this._getType(e)!==e2.undefined){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e2.void,received:t.parsedType}),te}return tn(e.data)}};tA.create=e=>new tA({typeName:iX.ZodVoid,...tl(e)});let tI=class e extends tc{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==e2.array)return e8(t,{code:e4.invalid_type,expected:e2.array,received:t.parsedType}),te;if(null!==r.exactLength){let e=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(e||a)&&(e8(t,{code:e?e4.too_big:e4.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(e8(t,{code:e4.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(e8(t,{code:e4.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new to(t,e,t.path,n)))).then(e=>e7.mergeArray(n,e));let a=[...t.data].map((e,n)=>r.type._parseSync(new to(t,e,t.path,n)));return e7.mergeArray(n,a)}get element(){return this._def.type}min(t,n){return new e({...this._def,minLength:{value:t,message:iY.toString(n)}})}max(t,n){return new e({...this._def,maxLength:{value:t,message:iY.toString(n)}})}length(t,n){return new e({...this._def,exactLength:{value:t,message:iY.toString(n)}})}nonempty(e){return this.min(1,e)}};tI.create=(e,t)=>new tI({type:e,minLength:null,maxLength:null,exactLength:null,typeName:iX.ZodArray,...tl(t)});let tN=class e extends tc{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=iH.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==e2.object){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e2.object,received:t.parsedType}),te}let{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof tE&&"strip"===this._def.unknownKeys))for(let e in n.data)a.includes(e)||i.push(e);let s=[];for(let e of a){let t=r[e],a=n.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new to(n,a,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof tE){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of i)s.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)i.length>0&&(e8(n,{code:e4.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of i){let r=n.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new to(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of s){let n=await t.key;e.push({key:n,value:await t.value,alwaysSet:t.alwaysSet})}return e}).then(e=>e7.mergeObjectSync(t,e)):e7.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(t){return iY.errToObj,new e({...this._def,unknownKeys:"strict",...void 0!==t?{errorMap:(e,n)=>{var r,a,i,s;let o=null!==(i=null===(a=(r=this._def).errorMap)||void 0===a?void 0:a.call(r,e,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===e.code?{message:null!==(s=iY.errToObj(t).message)&&void 0!==s?s:o}:{message:o}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:iX.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let n={};return iH.objectKeys(t).forEach(e=>{t[e]&&this.shape[e]&&(n[e]=this.shape[e])}),new e({...this._def,shape:()=>n})}omit(t){let n={};return iH.objectKeys(this.shape).forEach(e=>{t[e]||(n[e]=this.shape[e])}),new e({...this._def,shape:()=>n})}deepPartial(){return function e(t){if(!(t instanceof tN))return t instanceof tI?new tI({...t._def,type:e(t.element)}):t instanceof tW?tW.create(e(t.unwrap())):t instanceof tK?tK.create(e(t.unwrap())):t instanceof tD?tD.create(t.items.map(t=>e(t))):t;{let n={};for(let r in t.shape){let a=t.shape[r];n[r]=tW.create(e(a))}return new tN({...t._def,shape:()=>n})}}(this)}partial(t){let n={};return iH.objectKeys(this.shape).forEach(e=>{let r=this.shape[e];t&&!t[e]?n[e]=r:n[e]=r.optional()}),new e({...this._def,shape:()=>n})}required(t){let n={};return iH.objectKeys(this.shape).forEach(e=>{if(t&&!t[e])n[e]=this.shape[e];else{let t=this.shape[e];for(;t instanceof tW;)t=t._def.innerType;n[e]=t}}),new e({...this._def,shape:()=>n})}keyof(){return tz(iH.objectKeys(this.shape))}};tN.create=(e,t)=>new tN({shape:()=>e,unknownKeys:"strip",catchall:tE.create(),typeName:iX.ZodObject,...tl(t)}),tN.strictCreate=(e,t)=>new tN({shape:()=>e,unknownKeys:"strict",catchall:tE.create(),typeName:iX.ZodObject,...tl(t)}),tN.lazycreate=(e,t)=>new tN({shape:e,unknownKeys:"strip",catchall:tE.create(),typeName:iX.ZodObject,...tl(t)});let tq=class extends tc{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{let n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;let n=e.map(e=>new e3(e.ctx.common.issues));return e8(t,{code:e4.invalid_union,unionErrors:n}),te});{let e;let r=[];for(let a of n){let n={...t,common:{...t.common,issues:[]},parent:null},i=a._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=r.map(e=>new e3(e));return e8(t,{code:e4.invalid_union,unionErrors:a}),te}}get options(){return this._def.options}};tq.create=(e,t)=>new tq({options:e,typeName:iX.ZodUnion,...tl(t)});let tj=class extends tc{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(tr(e)||tr(r))return te;let a=function e(t,n){let r=e9(t),a=e9(n);if(t===n)return{valid:!0,data:t};if(r===e2.object&&a===e2.object){let r=iH.objectKeys(n),a=iH.objectKeys(t).filter(e=>-1!==r.indexOf(e)),i={...t,...n};for(let r of a){let a=e(t[r],n[r]);if(!a.valid)return{valid:!1};i[r]=a.data}return{valid:!0,data:i}}if(r!==e2.array||a!==e2.array)return r===e2.date&&a===e2.date&&+t==+n?{valid:!0,data:t}:{valid:!1};{if(t.length!==n.length)return{valid:!1};let r=[];for(let a=0;a<t.length;a++){let i=t[a],s=n[a],o=e(i,s);if(!o.valid)return{valid:!1};r.push(o.data)}return{valid:!0,data:r}}}(e.value,r.value);return a.valid?((ta(e)||ta(r))&&t.dirty(),{status:t.value,value:a.data}):(e8(n,{code:e4.invalid_intersection_types}),te)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};tj.create=(e,t,n)=>new tj({left:e,right:t,typeName:iX.ZodIntersection,...tl(n)});let tD=class e extends tc{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==e2.array)return e8(n,{code:e4.invalid_type,expected:e2.array,received:n.parsedType}),te;if(n.data.length<this._def.items.length)return e8(n,{code:e4.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),te;!this._def.rest&&n.data.length>this._def.items.length&&(e8(n,{code:e4.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let r=[...n.data].map((e,t)=>{let r=this._def.items[t]||this._def.rest;return r?r._parse(new to(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>e7.mergeArray(t,e)):e7.mergeArray(t,r)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};tD.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new tD({items:e,typeName:iX.ZodTuple,rest:null,...tl(t)})};let tZ=class extends tc{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==e2.map)return e8(n,{code:e4.invalid_type,expected:e2.map,received:n.parsedType}),te;let r=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map(([e,t],i)=>({key:r._parse(new to(n,e,n.path,[i,"key"])),value:a._parse(new to(n,t,n.path,[i,"value"]))}));if(n.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let n of i){let r=await n.key,a=await n.value;if("aborted"===r.status||"aborted"===a.status)return te;("dirty"===r.status||"dirty"===a.status)&&t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let n of i){let r=n.key,a=n.value;if("aborted"===r.status||"aborted"===a.status)return te;("dirty"===r.status||"dirty"===a.status)&&t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}}};tZ.create=(e,t,n)=>new tZ({valueType:t,keyType:e,typeName:iX.ZodMap,...tl(n)});let tF=class e extends tc{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==e2.set)return e8(n,{code:e4.invalid_type,expected:e2.set,received:n.parsedType}),te;let r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(e8(n,{code:e4.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(e8(n,{code:e4.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let a=this._def.valueType;function i(e){let n=new Set;for(let r of e){if("aborted"===r.status)return te;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}let s=[...n.data.values()].map((e,t)=>a._parse(new to(n,e,n.path,t)));return n.common.async?Promise.all(s).then(e=>i(e)):i(s)}min(t,n){return new e({...this._def,minSize:{value:t,message:iY.toString(n)}})}max(t,n){return new e({...this._def,maxSize:{value:t,message:iY.toString(n)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};tF.create=(e,t)=>new tF({valueType:e,minSize:null,maxSize:null,typeName:iX.ZodSet,...tl(t)});let tU=class extends tc{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};tU.create=(e,t)=>new tU({getter:e,typeName:iX.ZodLazy,...tl(t)});let tL=class extends tc{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return e8(t,{received:t.data,code:e4.invalid_literal,expected:this._def.value}),te}return{status:"valid",value:e.data}}get value(){return this._def.value}};function tz(e,t){return new t$({values:e,typeName:iX.ZodEnum,...tl(t)})}tL.create=(e,t)=>new tL({value:e,typeName:iX.ZodLiteral,...tl(t)});let t$=class e extends tc{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),n=this._def.values;return e8(t,{expected:iH.joinValues(n),received:t.parsedType,code:e4.invalid_type}),te}if(-1===this._def.values.indexOf(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return e8(t,{received:t.data,code:e4.invalid_enum_value,options:n}),te}return tn(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(t){return e.create(t)}exclude(t){return e.create(this.options.filter(e=>!t.includes(e)))}};t$.create=tz;let tM=class extends tc{_parse(e){let t=iH.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==e2.string&&n.parsedType!==e2.number){let e=iH.objectValues(t);return e8(n,{expected:iH.joinValues(e),received:n.parsedType,code:e4.invalid_type}),te}if(-1===t.indexOf(e.data)){let e=iH.objectValues(t);return e8(n,{received:n.data,code:e4.invalid_enum_value,options:e}),te}return tn(e.data)}get enum(){return this._def.values}};tM.create=(e,t)=>new tM({values:e,typeName:iX.ZodNativeEnum,...tl(t)});let tV=class extends tc{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==e2.promise&&!1===t.common.async)return e8(t,{code:e4.invalid_type,expected:e2.promise,received:t.parsedType}),te;let n=t.parsedType===e2.promise?t.data:Promise.resolve(t.data);return tn(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}};tV.create=(e,t)=>new tV({type:e,typeName:iX.ZodPromise,...tl(t)});let tB=class extends tc{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===iX.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null;if("preprocess"===r.type){let e=r.transform(n.data);return n.common.async?Promise.resolve(e).then(e=>this._def.schema._parseAsync({data:e,path:n.path,parent:n})):this._def.schema._parseSync({data:e,path:n.path,parent:n})}let a={addIssue:e=>{e8(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"refinement"===r.type){let e=e=>{let t=r.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?te:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))));{let r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?te:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}}if("transform"===r.type){if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>ti(e)?Promise.resolve(r.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ti(e))return e;let i=r.transform(e.value,a);if(i instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}}iH.assertNever(r)}};tB.create=(e,t,n)=>new tB({schema:e,typeName:iX.ZodEffects,effect:t,...tl(n)}),tB.createWithPreprocess=(e,t,n)=>new tB({schema:t,effect:{type:"preprocess",transform:e},typeName:iX.ZodEffects,...tl(n)});let tW=class extends tc{_parse(e){return this._getType(e)===e2.undefined?tn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};tW.create=(e,t)=>new tW({innerType:e,typeName:iX.ZodOptional,...tl(t)});let tK=class extends tc{_parse(e){return this._getType(e)===e2.null?tn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};tK.create=(e,t)=>new tK({innerType:e,typeName:iX.ZodNullable,...tl(t)});let tG=class extends tc{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===e2.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};tG.create=(e,t)=>new tG({innerType:e,typeName:iX.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...tl(t)});let tH=class extends tc{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ts(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new e3(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new e3(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};tH.create=(e,t)=>new tH({innerType:e,typeName:iX.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...tl(t)});let tJ=class extends tc{_parse(e){if(this._getType(e)!==e2.nan){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e2.nan,received:t.parsedType}),te}return{status:"valid",value:e.data}}};tJ.create=e=>new tJ({typeName:iX.ZodNaN,...tl(e)});let tY=class extends tc{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},tX=class e extends tc{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?te:"dirty"===e.status?(t.dirty(),tt(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})();{let e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?te:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(t,n){return new e({in:t,out:n,typeName:iX.ZodPipeline})}};tN.lazycreate,(iB=iX||(iX={})).ZodString="ZodString",iB.ZodNumber="ZodNumber",iB.ZodNaN="ZodNaN",iB.ZodBigInt="ZodBigInt",iB.ZodBoolean="ZodBoolean",iB.ZodDate="ZodDate",iB.ZodSymbol="ZodSymbol",iB.ZodUndefined="ZodUndefined",iB.ZodNull="ZodNull",iB.ZodAny="ZodAny",iB.ZodUnknown="ZodUnknown",iB.ZodNever="ZodNever",iB.ZodVoid="ZodVoid",iB.ZodArray="ZodArray",iB.ZodObject="ZodObject",iB.ZodUnion="ZodUnion",iB.ZodDiscriminatedUnion="ZodDiscriminatedUnion",iB.ZodIntersection="ZodIntersection",iB.ZodTuple="ZodTuple",iB.ZodRecord="ZodRecord",iB.ZodMap="ZodMap",iB.ZodSet="ZodSet",iB.ZodFunction="ZodFunction",iB.ZodLazy="ZodLazy",iB.ZodLiteral="ZodLiteral",iB.ZodEnum="ZodEnum",iB.ZodEffects="ZodEffects",iB.ZodNativeEnum="ZodNativeEnum",iB.ZodOptional="ZodOptional",iB.ZodNullable="ZodNullable",iB.ZodDefault="ZodDefault",iB.ZodCatch="ZodCatch",iB.ZodPromise="ZodPromise",iB.ZodBranded="ZodBranded",iB.ZodPipeline="ZodPipeline";let tQ=tb.create,t0=tw.create,t1=tk.create;tE.create;let t2=tI.create,t9=tN.create;tN.strictCreate;let t4=tq.create;tj.create,tD.create;let t3=tL.create;t$.create,tV.create,tW.create,tK.create;let t5=t9({address:tQ(),label:tQ(),appearanceId:t0()}),t6=t9({publicKey:tQ(),signature:tQ(),curve:t4([t3("curve25519"),t3("secp256k1")])}),t8=t9({accountAddress:tQ(),proof:t6}),t7=t9({identityAddress:tQ(),label:tQ()}),ne={western:"western",eastern:"eastern"},nt=t4([t3(ne.eastern),t3(ne.western)]),nn=t9({variant:nt,familyName:tQ(),nickname:tQ(),givenNames:tQ()}),nr=t9({quantifier:t4([t3("exactly"),t3("atLeast")]),quantity:t0().gte(0)}),na=t9({challenge:tQ().optional(),numberOfAccounts:nr}),ni=t9({accounts:t2(t5),challenge:tQ().optional(),proofs:t2(t8).optional()}).refine(e=>{var t;return!e.challenge&&(null==e||!e.proofs)||e.challenge&&(null==(t=null==e?void 0:e.proofs)?void 0:t.length)},"missing challenge or proofs"),ns=t9({isRequestingName:t1().optional(),numberOfRequestedEmailAddresses:nr.optional(),numberOfRequestedPhoneNumbers:nr.optional()}),no=t9({name:nn.optional(),emailAddresses:t2(tQ()).optional(),phoneNumbers:t2(tQ()).optional()}),nu=t9({accounts:t1(),personaData:t1()}),nl=(t9({persona:t7,challenge:tQ().optional(),proof:t6.optional()}).refine(e=>!e.challenge&&!e.proof||e.challenge&&e.proof,"missing challenge or proof"),t9({discriminator:t3("unauthorizedRequest"),oneTimeAccounts:na.optional(),oneTimePersonaData:ns.optional()})),nc=t9({discriminator:t3("usePersona"),identityAddress:tQ()}),nd=t9({discriminator:t3("loginWithoutChallenge")}),np=t9({discriminator:t3("loginWithChallenge"),challenge:tQ()}),nf=t4([nd,np]),nh=t4([nc,nf]),nm=t9({discriminator:t3("authorizedRequest"),auth:nh,reset:nu.optional(),oneTimeAccounts:na.optional(),ongoingAccounts:na.optional(),oneTimePersonaData:ns.optional(),ongoingPersonaData:ns.optional()}),n_=t4([nl,nm]),ny=t9({transactionManifest:tQ(),version:t0(),blobs:t2(tQ()).optional(),message:tQ().optional()}),nv=t9({discriminator:t3("transaction"),send:ny}),ng=t9({transactionIntentHash:tQ()}),nb=t9({discriminator:t3("transaction"),send:ng}),nw=t9({discriminator:t3("cancelRequest")}),nx=t4([n_,nv,nw]),nk=t9({version:t3(2),networkId:t0(),dAppDefinitionAddress:tQ()}),nS=t9({interactionId:tQ(),metadata:nk,items:nx}),nT=t9({discriminator:t3("unauthorizedRequest"),oneTimeAccounts:ni.optional(),oneTimePersonaData:no.optional()}),nP=t9({discriminator:t3("loginWithoutChallenge"),persona:t7}),nR=t9({discriminator:t3("loginWithChallenge"),persona:t7,challenge:tQ(),proof:t6}),nC=t4([nP,nR]),nO=t9({discriminator:t3("usePersona"),persona:t7}),nE=t4([nO,nC]),nA=t9({discriminator:t3("authorizedRequest"),auth:nE,oneTimeAccounts:ni.optional(),ongoingAccounts:ni.optional(),oneTimePersonaData:no.optional(),ongoingPersonaData:no.optional()}),nI=t4([nT,nA]),nN=t4([nI,nb]),nq=t9({discriminator:t3("success"),interactionId:tQ(),items:nN}),nj=t9({discriminator:t3("failure"),interactionId:tQ(),error:tQ(),message:tQ().optional()}),nD=t4([nq,nj]),nZ=(t9({interactionId:tQ(),discriminator:t3("extensionStatus")}),{extensionStatus:"extensionStatus",receivedByExtension:"receivedByExtension",receivedByWallet:"receivedByWallet",requestCancelSuccess:"requestCancelSuccess",requestCancelFail:"requestCancelFail"}),nF=(t9({eventType:t3(nZ.extensionStatus),interactionId:tQ(),isWalletLinked:t1(),isExtensionAvailable:t1()}),t9({eventType:t4([t3(nZ.extensionStatus),t3(nZ.receivedByExtension),t3(nZ.receivedByWallet),t3(nZ.requestCancelSuccess),t3(nZ.requestCancelFail)]),interactionId:tQ()}));t4([nF,nD]);let nU={outgoingMessage:"radix#chromeExtension#send",incomingMessage:"radix#chromeExtension#receive"},nL=(e,t)=>eB.fromPromise(e.parseAsync(t),e=>e.issues),nz=e=>(t,n,r=crypto.randomUUID())=>{let a={items:n,interactionId:r,metadata:t};return nL(nS,a).mapErr(t=>(null==e||e.error("\uD83D\uDD35⬆️❌ invalidWalletInteraction",t),nB(nM.walletRequestValidation,a.interactionId)))},n$=(Object.freeze(Object.defineProperty({__proto__:null,walletInteractionFactory:nz},Symbol.toStringTag,{value:"Module"})),e=>e),nM={rejectedByUser:"rejectedByUser",missingExtension:"missingExtension",canceledByUser:"canceledByUser",walletRequestValidation:"walletRequestValidation",walletResponseValidation:"walletResponseValidation",wrongNetwork:"wrongNetwork",failedToPrepareTransaction:"failedToPrepareTransaction",failedToCompileTransaction:"failedToCompileTransaction",failedToSignTransaction:"failedToSignTransaction",failedToSubmitTransaction:"failedToSubmitTransaction",failedToPollSubmittedTransaction:"failedToPollSubmittedTransaction",submittedTransactionWasDuplicate:"submittedTransactionWasDuplicate",submittedTransactionHasFailedTransactionStatus:"submittedTransactionHasFailedTransactionStatus",submittedTransactionHasRejectedTransactionStatus:"submittedTransactionHasRejectedTransactionStatus",failedToFindAccountWithEnoughFundsToLockFee:"failedToFindAccountWithEnoughFundsToLockFee",wrongAccountType:"wrongAccountType",unknownWebsite:"unknownWebsite",radixJsonNotFound:"radixJsonNotFound",unknownDappDefinitionAddress:"unknownDappDefinitionAddress",invalidPersona:"invalidPersona"},nV=new Map().set(nM.missingExtension,"extension could not be found").set(nM.rejectedByUser,"user rejected request").set(nM.canceledByUser,"user has canceled the request"),nB=(e,t,n)=>({error:e,interactionId:t,message:n||nV.get(e)||""}),nW=e=>eB.fromPromise(nD.parseAsync(e),e=>e.issues).andThen(e=>"success"===e.discriminator?eX(e):eQ(e)).mapErr(()=>nB("walletResponseValidation","")),nK=(e,t)=>{let n=e.logger,r=nz(n);return{request:(n,a={})=>r(e,n).andThen(e=>t.send(e,a)).andThen(nW).map(e=>e.items),sendTransaction:(n,a={})=>r(e,{discriminator:"transaction",send:n}).andThen(e=>t.send(e,a)).andThen(nW).map(e=>e.items.send),extensionStatus$:t.extensionStatus$,openPopup:t.openPopup}};var nG=function(e,t){return(nG=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function nH(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}nG(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function nJ(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function nY(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function nX(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return s}function nQ(e,t,n){if(n||2==arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}function n0(e){return this instanceof n0?(this.v=e,this):new n0(e)}function n1(e){return"function"==typeof e}function n2(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var n9=n2(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,t){return t+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function n4(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var n3=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,t,n,r,a;if(!this.closed){this.closed=!0;var i=this._parentage;if(i){if(this._parentage=null,Array.isArray(i))try{for(var s=nY(i),o=s.next();!o.done;o=s.next())o.value.remove(this)}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else i.remove(this)}var u=this.initialTeardown;if(n1(u))try{u()}catch(e){a=e instanceof n9?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var c=nY(l),d=c.next();!d.done;d=c.next()){var p=d.value;try{n8(p)}catch(e){a=a??[],e instanceof n9?a=nQ(nQ([],nX(a)),nX(e.errors)):a.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}if(a)throw new n9(a)}},t.prototype.add=function(e){var n;if(e&&e!==this){if(this.closed)n8(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&n4(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&n4(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),n5=n3.EMPTY;function n6(e){return e instanceof n3||e&&"closed"in e&&n1(e.remove)&&n1(e.add)&&n1(e.unsubscribe)}function n8(e){n1(e)?e():e.unsubscribe()}var n7={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},re={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,nQ([e,t],nX(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function rt(e){re.setTimeout(function(){throw e})}function rn(){}var rr=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,n6(t)&&t.add(n)):n.destination=ru,n}return nH(t,e),t.create=function(e,t,n){return new ro(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(n3),ra=Function.prototype.bind;function ri(e,t){return ra.call(e,t)}var rs=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){rt(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){rt(e)}else rt(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){rt(e)}},e}(),ro=function(e){function t(t,n,r){var a,i,s=e.call(this)||this;return n1(t)||!t?i={next:t??void 0,error:n??void 0,complete:r??void 0}:s&&n7.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},i={next:t.next&&ri(t.next,a),error:t.error&&ri(t.error,a),complete:t.complete&&ri(t.complete,a)}):i=t,s.destination=new rs(i),s}return nH(t,e),t}(rr),ru={closed:!0,next:rn,error:function(e){throw e},complete:rn},rl="function"==typeof Symbol&&Symbol.observable||"@@observable";function rc(e){return e}var rd=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,a,i,s=(r=e)&&r instanceof rr||r&&n1(r.next)&&n1(r.error)&&n1(r.complete)&&n6(r)?e:new ro(e,t,n);return a=this.operator,i=this.source,s.add(a?a.call(s,i):i?this._subscribe(s):this._trySubscribe(s)),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=rp(t))(function(t,r){var a=new ro({next:function(t){try{e(t)}catch(e){r(e),a.unsubscribe()}},error:r,complete:t});n.subscribe(a)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[rl]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?rc:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=rp(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function rp(e){var t;return null!==(t=e??n7.Promise)&&void 0!==t?t:Promise}function rf(e){return function(t){if(n1(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function rh(e,t,n,r,a){return new rm(e,t,n,r,a)}var rm=function(e){function t(t,n,r,a,i,s){var o=e.call(this,t)||this;return o.onFinalize=i,o.shouldUnsubscribe=s,o._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,o._error=a?function(e){try{a(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,o._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,o}return nH(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),n||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(rr),r_=n2(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ry=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return nH(t,e),t.prototype.lift=function(e){var t=new rv(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new r_},t.prototype.next=function(e){var t=this;(function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var a=nY(t.currentObservers),i=a.next();!i.done;i=a.next())i.value.next(e)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}})()},t.prototype.error=function(e){var t=this;(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}})()},t.prototype.complete=function(){var e=this;(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})()},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this.hasError,r=this.isStopped,a=this.observers;return n||r?n5:(this.currentObservers=null,a.push(e),new n3(function(){t.currentObservers=null,n4(a,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,n=this.thrownError,r=this.isStopped;t?e.error(n):r&&e.complete()},t.prototype.asObservable=function(){var e=new rd;return e.source=this,e},t.create=function(e,t){return new rv(e,t)},t}(rd),rv=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return nH(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:n5},t}(ry),rg={now:function(){return Date.now()},delegate:void 0},rb=function(e){function t(t,n){return e.call(this)||this}return nH(t,e),t.prototype.schedule=function(e,t){return this},t}(n3),rw={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=rw.delegate;return null!=a&&a.setInterval?a.setInterval.apply(a,nQ([e,t],nX(n))):setInterval.apply(void 0,nQ([e,t],nX(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},rx=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return nH(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n,r=this.id,a=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(a,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(a,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),rw.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&rw.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,n4(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(rb),rk=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=rg.now,e}(),rS=new(function(e){function t(t,n){void 0===n&&(n=rk.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return nH(t,e),t.prototype.flush=function(e){var t,n=this.actions;if(this._active){n.push(e);return}this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}},t}(rk))(rx),rT=new rd(function(e){return e.complete()});function rP(e){return e&&n1(e.schedule)}function rR(e){return e[e.length-1]}function rC(e){return rP(rR(e))?e.pop():void 0}var rO=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function rE(e){return n1(null==e?void 0:e.then)}function rA(e){return Symbol.asyncIterator&&n1(null==e?void 0:e[Symbol.asyncIterator])}function rI(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var rN="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function rq(e){return n1(null==e?void 0:e[rN])}function rj(e){return function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(e,t||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){a[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||o(e,t)})})}function o(e,t){try{var n;(n=a[e](t)).value instanceof n0?Promise.resolve(n.value.v).then(u,l):c(i[0][2],n)}catch(e){c(i[0][3],e)}}function u(e){o("next",e)}function l(e){o("throw",e)}function c(e,t){e(t),i.shift(),i.length&&o(i[0][0],i[0][1])}}(this,arguments,function(){var t,n,r;return nJ(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,n0(t.read())];case 3:return r=(n=a.sent()).value,n.done?[4,n0(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,n0(r)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function rD(e){return n1(null==e?void 0:e.getReader)}function rZ(e){if(e instanceof rd)return e;if(null!=e){if(n1(e[rl]))return new rd(function(t){var n=e[rl]();if(n1(n.subscribe))return n.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(rO(e))return new rd(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()});if(rE(e))return new rd(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,rt)});if(rA(e))return rF(e);if(rq(e))return new rd(function(t){var n,r;try{for(var a=nY(e),i=a.next();!i.done;i=a.next()){var s=i.value;if(t.next(s),t.closed)return}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}t.complete()});if(rD(e))return rF(rj(e))}throw rI(e)}function rF(e){return new rd(function(t){(function(e,t){var n,r,a,i,s,o,u,l;return s=this,o=void 0,u=void 0,l=function(){var s;return nJ(this,function(o){switch(o.label){case 0:o.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=nY(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,a){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,a,(t=e[n](t)).done,t.value)})}}}(e),o.label=1;case 1:return[4,n.next()];case 2:if((r=o.sent()).done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];o.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a={error:o.sent()},[3,11];case 6:return o.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:o.sent(),o.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})},new(u||(u=Promise))(function(e,t){function n(e){try{a(l.next(e))}catch(e){t(e)}}function r(e){try{a(l.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):((a=t.value)instanceof u?a:new u(function(e){e(a)})).then(n,r)}a((l=l.apply(s,o||[])).next())})})(e,t).catch(function(e){return t.error(e)})})}function rU(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=!1);var i=t.schedule(function(){n(),a?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!a)return i}function rL(e,t){return void 0===t&&(t=0),rf(function(n,r){n.subscribe(rh(r,function(n){return rU(r,e,function(){return r.next(n)},t)},function(){return rU(r,e,function(){return r.complete()},t)},function(n){return rU(r,e,function(){return r.error(n)},t)}))})}function rz(e,t){return void 0===t&&(t=0),rf(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function r$(e,t){if(!e)throw Error("Iterable cannot be null");return new rd(function(n){rU(n,t,function(){var r=e[Symbol.asyncIterator]();rU(n,t,function(){r.next().then(function(e){e.done?n.complete():n.next(e.value)})},0,!0)})})}function rM(e,t){return t?function(e,t){if(null!=e){if(n1(e[rl]))return rZ(e).pipe(rz(t),rL(t));if(rO(e))return new rd(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})});if(rE(e))return rZ(e).pipe(rz(t),rL(t));if(rA(e))return r$(e,t);if(rq(e))return new rd(function(n){var r;return rU(n,t,function(){r=e[rN](),rU(n,t,function(){var e,t,a;try{t=(e=r.next()).value,a=e.done}catch(e){n.error(e);return}a?n.complete():n.next(t)},0,!0)}),function(){return n1(null==r?void 0:r.return)&&r.return()}});if(rD(e))return r$(rj(e),t)}throw rI(e)}(e,t):rZ(e)}function rV(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=rC(e);return rM(e,n)}var rB=n2(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function rW(e,t){var n="object"==typeof t;return new Promise(function(r,a){var i=new ro({next:function(e){r(e),i.unsubscribe()},error:a,complete:function(){n?r(t.defaultValue):a(new rB)}});e.subscribe(i)})}function rK(e,t){return rf(function(n,r){var a=0;n.subscribe(rh(r,function(n){r.next(e.call(t,n,a++))}))})}function rG(e,t,n){void 0===e&&(e=0),void 0===n&&(n=rS);var r=-1;return null!=t&&(rP(t)?n=t:r=t),new rd(function(t){var a,i=(a=e)instanceof Date&&!isNaN(a)?+e-n.now():e;i<0&&(i=0);var s=0;return n.schedule(function(){t.closed||(t.next(s++),0<=r?this.schedule(void 0,r):t.complete())},i)})}function rH(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=rC(t),a="number"==typeof rR(t)?t.pop():1/0;return t.length?1===t.length?rZ(t[0]):(void 0===(e=a)&&(e=1/0),function e(t,n,r){return void 0===r&&(r=1/0),n1(n)?e(function(e,r){return rK(function(t,a){return n(e,t,r,a)})(rZ(t(e,r)))},r):("number"==typeof n&&(r=n),rf(function(e,n){var a,i,s,o,u,l,c,d,p,f,h,m;return a=r,l=[],c=0,d=0,p=!1,f=function(){!p||l.length||c||n.complete()},h=function(e){return c<a?m(e):l.push(e)},m=function(e){s&&n.next(e),c++;var r=!1;rZ(t(e,d++)).subscribe(rh(n,function(e){null==i||i(e),s?h(e):n.next(e)},function(){r=!0},void 0,function(){if(r)try{for(c--;l.length&&c<a;)!function(){var e=l.shift();o?rU(n,o,function(){return m(e)}):m(e)}();f()}catch(e){n.error(e)}}))},e.subscribe(rh(n,h,function(){p=!0,f()})),function(){null==u||u()}}))}(rc,e))(rM(t,r)):rT}var rJ=Array.isArray;function rY(e,t){return rf(function(n,r){var a=0;n.subscribe(rh(r,function(n){return e.call(t,n,a++)&&r.next(n)}))})}function rX(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?rY(function(t,n){return e(t,n,r)}):rc,rf(function(e,t){var n=0;e.subscribe(rh(t,function(e){++n<=1&&(t.next(e),1<=n&&t.complete())}))}),n?rf(function(e,n){var r=!1;e.subscribe(rh(n,function(e){r=!0,n.next(e)},function(){r||n.next(t),n.complete()}))}):rf(function(e,t){var n=!1;e.subscribe(rh(t,function(e){n=!0,t.next(e)},function(){return n?t.complete():t.error(new rB)}))}))}}function rQ(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!0===t){e();return}if(!1!==t){var a=new ro({next:function(){a.unsubscribe(),e()}});return rZ(t.apply(void 0,nQ([],nX(n)))).subscribe(a)}}function r0(e,t,n){var r=n1(e)||t||n?{next:e,error:t,complete:n}:e;return r?rf(function(e,t){null===(n=r.subscribe)||void 0===n||n.call(r);var n,a=!0;e.subscribe(rh(t,function(e){var n;null===(n=r.next)||void 0===n||n.call(r,e),t.next(e)},function(){var e;a=!1,null===(e=r.complete)||void 0===e||e.call(r),t.complete()},function(e){var n;a=!1,null===(n=r.error)||void 0===n||n.call(r,e),t.error(e)},function(){var e,t;a&&(null===(e=r.unsubscribe)||void 0===e||e.call(r)),null===(t=r.finalize)||void 0===t||t.call(r)}))}):rc}let r1=()=>({outgoingMessageSubject:new ry,incomingMessageSubject:new ry,responseSubject:new ry,messageLifeCycleEventSubject:new ry}),r2=e=>eB.fromPromise(rW(e),n$).andThen(e=>e),r9={extensionDetectionTime:100},r4=e=>{var t,n;let r=null==e?void 0:e.logger,a=(null==e?void 0:e.subjects)??r1(),i=new n3;i.add(a.incomingMessageSubject.pipe(r0(e=>{"eventType"in e?(null==r||r.debug("\uD83D\uDD35\uD83D\uDCAC⬇️ messageLifecycleEvent",e),a.messageLifeCycleEventSubject.next(e)):(null==r||r.debug("\uD83D\uDD35⬇️ walletResponse",e),a.responseSubject.next(e))})).subscribe()),i.add(a.outgoingMessageSubject.pipe(r0(e=>{null==r||r.debug("\uD83D\uDD35⬆️ walletRequest",e),window.dispatchEvent(new CustomEvent(nU.outgoingMessage,{detail:e}))})).subscribe());let s=e=>{let t=e.detail;a.incomingMessageSubject.next(t)};addEventListener(nU.incomingMessage,s);let o=a.messageLifeCycleEventSubject.pipe(rY(e=>"extensionStatus"===e.eventType));return{send:(e,t)=>{var n,i,s,o,u,l,c,d,p;let f=new ry,h=a.responseSubject.pipe(rY(t=>t.interactionId===e.interactionId),rK(e=>"success"===e.discriminator?eX(e):eQ(e))),m=a.messageLifeCycleEventSubject.pipe(rY(({interactionId:t,eventType:n})=>e.interactionId===t&&["requestCancelSuccess","requestCancelFail"].includes(n)),rK(e=>{let t=nB("canceledByUser",e.interactionId);return null==r||r.debug("\uD83D\uDD35⬆️❌ walletRequestCanceled",t),e})),_=()=>(a.outgoingMessageSubject.next({interactionId:e.interactionId,items:{discriminator:"cancelRequest"},metadata:e.metadata}),setTimeout(()=>{f.next(eQ(nB("canceledByUser",e.interactionId)))}),eB.fromSafePromise(rW(rH(h.pipe(rK(()=>"requestCancelFail")),m.pipe(rK(({eventType:e})=>e))))));t.requestControl&&t.requestControl({cancelRequest:()=>_().andThen(e=>"requestCancelSuccess"===e?eX("requestCancelSuccess"):eQ("requestCancelFail")),getRequest:()=>e});let y=rH(h,f).pipe(rX()),v=a.messageLifeCycleEventSubject.pipe(rY(({interactionId:t})=>e.interactionId===t),r0(e=>{t.eventCallback&&t.eventCallback(e.eventType)}),rf(function(e,t){rZ(h).subscribe(rh(t,function(){return t.complete()},rn)),t.closed||e.subscribe(t)}),(void 0===n&&(n={}),s=void 0===(i=n.connector)?function(){return new ry}:i,u=void 0===(o=n.resetOnError)||o,c=void 0===(l=n.resetOnComplete)||l,p=void 0===(d=n.resetOnRefCountZero)||d,function(e){var t,n,r,a=0,i=!1,o=!1,l=function(){null==n||n.unsubscribe(),n=void 0},d=function(){l(),t=r=void 0,i=o=!1},f=function(){var e=t;d(),null==e||e.unsubscribe()};return rf(function(e,h){a++,o||i||l();var m=r=r??s();h.add(function(){0!=--a||o||i||(n=rQ(f,p))}),m.subscribe(h),!t&&a>0&&(t=new ro({next:function(e){return m.next(e)},error:function(e){o=!0,l(),n=rQ(d,u,e),m.error(e)},complete:function(){i=!0,l(),n=rQ(d,c),m.complete()}}),rZ(e).subscribe(t))})(e)})),g=v.subscribe(),b=rG(r9.extensionDetectionTime).pipe(rK(()=>eQ(nB("missingExtension",e.interactionId)))),w=rH(b,v).pipe(rX(),rY(e=>!("eventType"in e))),x=rV(e).pipe(r0(e=>{a.outgoingMessageSubject.next(e)}),rY(e=>!1));return r2(rH(y,w,x).pipe(r0(()=>{g.unsubscribe()})))},destroy:()=>{i.unsubscribe(),removeEventListener(nU.incomingMessage,s)},openPopup:()=>{window.dispatchEvent(new CustomEvent(nU.outgoingMessage,{detail:{discriminator:"openPopup"}}))},extensionStatus$:rV(!0).pipe(r0(()=>{a.outgoingMessageSubject.next({interactionId:crypto.randomUUID(),discriminator:"extensionStatus"})}),(t=()=>(function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return 1===(n=1===(t=n).length&&rJ(t[0])?t[0]:t).length?rZ(n[0]):new rd((e=n,function(t){for(var n=[],r=function(r){n.push(rZ(e[r]).subscribe(rh(t,function(e){if(n){for(var a=0;a<n.length;a++)a!==r&&n[a].unsubscribe();n=null}t.next(e)})))},a=0;n&&!t.closed&&a<e.length;a++)r(a)}))})(o,rH(o,rG(r9.extensionDetectionTime).pipe(rK(()=>({eventType:"extensionStatus",isWalletLinked:!1,isExtensionAvailable:!1}))))),rf(function(e,r){var a=null,i=0,s=!1,o=function(){return s&&!a&&r.complete()};e.subscribe(rh(r,function(e){null==a||a.unsubscribe();var s=0,u=i++;rZ(t(e,u)).subscribe(a=rh(r,function(t){return r.next(n?n(e,t,u,s++):t)},function(){a=null,o()}))},function(){s=!0,o()}))})))}};function r3(e,t){let n={seen:[],stylize:r6};return null!=t&&function(e,t){if(!t||!ar(t))return;let n=Object.keys(t),r=n.length;for(;r--;)e[n[r]]=t[n[r]]}(n,t),r5(n.showHidden)&&(n.showHidden=!1),r5(n.depth)&&(n.depth=2),r5(n.colors)&&(n.colors=!0),r5(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=r8),au(n,e,n.depth)}function r5(e){return null==e}function r6(e){return e}function r8(e,t){var n,r,a,i;let s=r3.styles[t];return null!=s&&(null==(r=null==(n=null==r3?void 0:r3.colors)?void 0:n[s])?void 0:r[0])!=null&&(null==(i=null==(a=null==r3?void 0:r3.colors)?void 0:a[s])?void 0:i[1])!=null?"\x1b["+r3.colors[s][0]+"m"+e+"\x1b["+r3.colors[s][1]+"m":e}function r7(e){return"function"==typeof e}function ae(e){return"string"==typeof e}function at(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function an(e){return ar(e)&&"[object RegExp]"===as(e)}function ar(e){return"object"==typeof e&&null!==e}function aa(e){return ar(e)&&("[object Error]"===as(e)||e instanceof Error)}function ai(e){return ar(e)&&"[object Date]"===as(e)}function as(e){return Object.prototype.toString.call(e)}function ao(e){return"["+Error.prototype.toString.call(e)+"]"}function au(e,t,n=0){var r,a;let i;if(e.customInspect&&null!=t&&r7(t)&&(null==t?void 0:t.inspect)!==r3&&!(null!=t&&t.constructor&&(null==t?void 0:t.constructor.prototype)===t)){if("function"!=typeof t.inspect&&null!=t.toString)return t.toString();let r=null==t?void 0:t.inspect(n,e);return ae(r)||(r=au(e,r,n)),r}let s=function(e,t){if(r5(t))return e.stylize("undefined","undefined");if(ae(t)){let n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\\'")+"'";return e.stylize(n,"string")}return"number"==typeof t?e.stylize(""+t,"number"):"boolean"==typeof t?e.stylize(""+t,"boolean"):null===t?e.stylize("null","null"):void 0}(e,t);if(s)return s;let o=Object.keys(t),u=function(e){let t={};return e.forEach(e=>{t[e]=!0}),t}(o);try{e.showHidden&&Object.getOwnPropertyNames&&(o=Object.getOwnPropertyNames(t))}catch{}if(aa(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return ao(t);if(0===o.length){if(!r7(e.stylize))return t;if(r7(t)){let n=t.name?": "+t.name:"";return e.stylize("[Function"+n+"]","special")}if(an(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(ai(t))return e.stylize(Date.prototype.toString.call(t),"date");if(aa(t))return ao(t)}let l="",c=!1,d=[`{
`,`
}`];return(Array.isArray(t)&&(c=!0,d=[`[
`,`
]`]),r7(t)&&(l=" [Function"+(t.name?": "+t.name:"")+"]"),an(t)&&(l=" "+RegExp.prototype.toString.call(t)),ai(t)&&(l=" "+Date.prototype.toUTCString.call(t)),aa(t)&&(l=" "+ao(t)),0!==o.length||c&&0!=t.length)?n<0?an(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),i=c?function(e,t,n,r,a){let i=[];for(let a=0,s=t.length;a<s;++a)at(t,String(a))?i.push(al(e,t,n,r,String(a),!0)):i.push("");return a.forEach(a=>{a.match(/^\d+$/)||i.push(al(e,t,n,r,a,!0))}),i}(e,t,n,u,o):o.map(r=>al(e,t,n,u,r,c)),e.seen.pop(),r=l,(a=d)[0]+(""===r?"":r+`
`)+"  "+i.join(`,
  `)+" "+a[1]):d[0]+l+d[1]}function al(e,t,n,r,a,i){let s,o,u;u={value:void 0};try{u.value=t[a]}catch{}try{Object.getOwnPropertyDescriptor&&(u=Object.getOwnPropertyDescriptor(t,a)||u)}catch{}if(u.get?o=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(o=e.stylize("[Setter]","special")),at(r,a)||(s="["+a+"]"),o||(0>e.seen.indexOf(u.value)?(o=null===n?au(e,u.value,void 0):au(e,u.value,n-1)).indexOf(`
`)>-1&&(o=i?o.split(`
`).map(e=>"  "+e).join(`
`).substr(2):`
`+o.split(`
`).map(e=>"   "+e).join(`
`)):o=e.stylize("[Circular]","special")),r5(s)){if(i&&a.match(/^\d+$/))return o;(s=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,"\\'").replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+o}r3.colors={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]},r3.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},[typeof window,typeof document].includes("undefined"),null==(iQ=null==globalThis?void 0:globalThis.navigator)||iQ.userAgent;let ac=e=>{var t,n;let r={version:2,dAppDefinitionAddress:e.dAppDefinitionAddress,networkId:e.networkId};nk.parse(r),null==(t=e.logger)||t.debug("\uD83D\uDD35 walletSdkInstantiated",r);let a=e.logger,i=(null==(n=e.providers)?void 0:n.connectorExtensionClient)??r4({logger:a});return{...nK({version:2,logger:e.logger,dAppDefinitionAddress:e.dAppDefinitionAddress,networkId:e.networkId},i),destroy:()=>{null==a||a.debug("\uD83D\uDD35\uD83E\uDDF9 walletSdkInstantiatedDestroyed"),i.destroy()}}};(iW=i0||(i0={})).assertEqual=e=>e,iW.assertIs=function(e){},iW.assertNever=function(e){throw Error()},iW.arrayToEnum=e=>{let t={};for(let n of e)t[n]=n;return t},iW.getValidEnumValues=e=>{let t=iW.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(let r of t)n[r]=e[r];return iW.objectValues(n)},iW.objectValues=e=>iW.objectKeys(e).map(function(t){return e[t]}),iW.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},iW.find=(e,t)=>{for(let n of e)if(t(n))return n},iW.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,iW.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},iW.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(i1||(i1={})).mergeShapes=(e,t)=>({...e,...t});let ad=i0.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ap=e=>{switch(typeof e){case"undefined":return ad.undefined;case"string":return ad.string;case"number":return isNaN(e)?ad.nan:ad.number;case"boolean":return ad.boolean;case"function":return ad.function;case"bigint":return ad.bigint;case"symbol":return ad.symbol;case"object":return Array.isArray(e)?ad.array:null===e?ad.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?ad.promise:"u">typeof Map&&e instanceof Map?ad.map:"u">typeof Set&&e instanceof Set?ad.set:"u">typeof Date&&e instanceof Date?ad.date:ad.object;default:return ad.unknown}},af=i0.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ah extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(r);else if("invalid_return_type"===a.code)r(a.returnTypeError);else if("invalid_arguments"===a.code)r(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,r=0;for(;r<a.path.length;){let n=a.path[r];r===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,i0.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},n=[];for(let r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}ah.create=e=>new ah(e);let am=(e,t)=>{let n;switch(e.code){case af.invalid_type:n=e.received===ad.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case af.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,i0.jsonStringifyReplacer)}`;break;case af.unrecognized_keys:n=`Unrecognized key(s) in object: ${i0.joinValues(e.keys,", ")}`;break;case af.invalid_union:n="Invalid input";break;case af.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${i0.joinValues(e.options)}`;break;case af.invalid_enum_value:n=`Invalid enum value. Expected ${i0.joinValues(e.options)}, received '${e.received}'`;break;case af.invalid_arguments:n="Invalid function arguments";break;case af.invalid_return_type:n="Invalid function return type";break;case af.invalid_date:n="Invalid date";break;case af.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:i0.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case af.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case af.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case af.custom:n="Invalid input";break;case af.invalid_intersection_types:n="Intersection results could not be merged";break;case af.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case af.not_finite:n="Number must be finite";break;default:n=t.defaultError,i0.assertNever(e)}return{message:n}},a_=e=>{let{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],s={...a,path:i},o="",u=r.filter(e=>!!e).slice().reverse();for(let e of u)o=e(s,{data:t,defaultError:o}).message;return{...a,path:i,message:a.message||o}};function ay(e,t){let n=a_({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,am,am].filter(e=>!!e)});e.common.issues.push(n)}class av{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let r of t){if("aborted"===r.status)return ag;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let e of t)n.push({key:await e.key,value:await e.value});return av.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let r of t){let{key:t,value:a}=r;if("aborted"===t.status||"aborted"===a.status)return ag;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"!==t.value&&("u">typeof a.value||r.alwaysSet)&&(n[t.value]=a.value)}return{status:e.value,value:n}}}let ag=Object.freeze({status:"aborted"}),ab=e=>({status:"dirty",value:e}),aw=e=>({status:"valid",value:e}),ax=e=>"aborted"===e.status,ak=e=>"dirty"===e.status,aS=e=>"valid"===e.status,aT=e=>"u">typeof Promise&&e instanceof Promise;(iK=i2||(i2={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},iK.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class aP{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let aR=(e,t)=>{if(aS(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new ah(e.common.issues);return this._error=t,this._error}}};function aC(e){if(!e)return{};let{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:typeof t.data>"u"?{message:r??t.defaultError}:{message:n??t.defaultError},description:a}}class aO{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ap(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ap(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new av,ctx:{common:e.parent.common,data:e.data,parsedType:ap(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(aT(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ap(e)},a=this._parseSync({data:e,path:r.path,parent:r});return aR(r,a)}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ap(e)},r=this._parse({data:e,path:n.path,parent:n}),a=await (aT(r)?r:Promise.resolve(r));return aR(n,a)}refine(e,t){let n=e=>"string"==typeof t||typeof t>"u"?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{let a=e(t),i=()=>r.addIssue({code:af.custom,...n(t)});return"u">typeof Promise&&a instanceof Promise?a.then(e=>!!e||(i(),!1)):!!a||(i(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1))}_refinement(e){return new ia({schema:this,typeName:i9.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ii.create(this,this._def)}nullable(){return is.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return aJ.create(this,this._def)}promise(){return ir.create(this,this._def)}or(e){return aX.create([this,e],this._def)}and(e){return a1.create(this,e,this._def)}transform(e){return new ia({...aC(this._def),schema:this,typeName:i9.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new io({...aC(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:i9.ZodDefault})}brand(){return new ic({typeName:i9.ZodBranded,type:this,...aC(this._def)})}catch(e){return new iu({...aC(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:i9.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return id.create(this,e)}readonly(){return ip.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let aE=/^c[^\s-]{8,}$/i,aA=/^[a-z][a-z0-9]*$/,aI=/^[0-9A-HJKMNP-TV-Z]{26}$/,aN=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,aq=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,aj=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,aD=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,aZ=e=>e.precision?e.offset?RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):0===e.precision?e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");class aF extends aO{_parse(e){let t;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ad.string){let t=this._getOrReturnCtx(e);return ay(t,{code:af.invalid_type,expected:ad.string,received:t.parsedType}),ag}let n=new av;for(let s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(ay(t=this._getOrReturnCtx(e,t),{code:af.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if("max"===s.kind)e.data.length>s.value&&(ay(t=this._getOrReturnCtx(e,t),{code:af.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if("length"===s.kind){let r=e.data.length>s.value,a=e.data.length<s.value;(r||a)&&(t=this._getOrReturnCtx(e,t),r?ay(t,{code:af.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ay(t,{code:af.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if("email"===s.kind)aq.test(e.data)||(ay(t=this._getOrReturnCtx(e,t),{validation:"email",code:af.invalid_string,message:s.message}),n.dirty());else if("emoji"===s.kind)r||(r=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),r.test(e.data)||(ay(t=this._getOrReturnCtx(e,t),{validation:"emoji",code:af.invalid_string,message:s.message}),n.dirty());else if("uuid"===s.kind)aN.test(e.data)||(ay(t=this._getOrReturnCtx(e,t),{validation:"uuid",code:af.invalid_string,message:s.message}),n.dirty());else if("cuid"===s.kind)aE.test(e.data)||(ay(t=this._getOrReturnCtx(e,t),{validation:"cuid",code:af.invalid_string,message:s.message}),n.dirty());else if("cuid2"===s.kind)aA.test(e.data)||(ay(t=this._getOrReturnCtx(e,t),{validation:"cuid2",code:af.invalid_string,message:s.message}),n.dirty());else if("ulid"===s.kind)aI.test(e.data)||(ay(t=this._getOrReturnCtx(e,t),{validation:"ulid",code:af.invalid_string,message:s.message}),n.dirty());else if("url"===s.kind)try{new URL(e.data)}catch{ay(t=this._getOrReturnCtx(e,t),{validation:"url",code:af.invalid_string,message:s.message}),n.dirty()}else{var a,i;"regex"===s.kind?(s.regex.lastIndex=0,s.regex.test(e.data)||(ay(t=this._getOrReturnCtx(e,t),{validation:"regex",code:af.invalid_string,message:s.message}),n.dirty())):"trim"===s.kind?e.data=e.data.trim():"includes"===s.kind?e.data.includes(s.value,s.position)||(ay(t=this._getOrReturnCtx(e,t),{code:af.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):"toLowerCase"===s.kind?e.data=e.data.toLowerCase():"toUpperCase"===s.kind?e.data=e.data.toUpperCase():"startsWith"===s.kind?e.data.startsWith(s.value)||(ay(t=this._getOrReturnCtx(e,t),{code:af.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):"endsWith"===s.kind?e.data.endsWith(s.value)||(ay(t=this._getOrReturnCtx(e,t),{code:af.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):"datetime"===s.kind?aZ(s).test(e.data)||(ay(t=this._getOrReturnCtx(e,t),{code:af.invalid_string,validation:"datetime",message:s.message}),n.dirty()):"ip"===s.kind?(a=e.data,("v4"===(i=s.version)||!i)&&aj.test(a)||("v6"===i||!i)&&aD.test(a)||(ay(t=this._getOrReturnCtx(e,t),{validation:"ip",code:af.invalid_string,message:s.message}),n.dirty())):i0.assertNever(s)}return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),{validation:t,code:af.invalid_string,...i2.errToObj(n)})}_addCheck(e){return new aF({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...i2.errToObj(e)})}url(e){return this._addCheck({kind:"url",...i2.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...i2.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...i2.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...i2.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...i2.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...i2.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...i2.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(null==e?void 0:e.precision)>"u"?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...i2.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...i2.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...i2.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...i2.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...i2.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...i2.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...i2.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...i2.errToObj(t)})}nonempty(e){return this.min(1,i2.errToObj(e))}trim(){return new aF({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new aF({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new aF({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}aF.create=e=>{var t;return new aF({checks:[],typeName:i9.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...aC(e)})};class aU extends aO{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ad.number){let t=this._getOrReturnCtx(e);return ay(t,{code:af.invalid_type,expected:ad.number,received:t.parsedType}),ag}let n=new av;for(let r of this._def.checks)"int"===r.kind?i0.isInteger(e.data)||(ay(t=this._getOrReturnCtx(e,t),{code:af.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(ay(t=this._getOrReturnCtx(e,t),{code:af.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(ay(t=this._getOrReturnCtx(e,t),{code:af.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"multipleOf"===r.kind?0!==function(e,t){let n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),s=parseInt(t.toFixed(a).replace(".",""));return i%s/Math.pow(10,a)}(e.data,r.value)&&(ay(t=this._getOrReturnCtx(e,t),{code:af.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(ay(t=this._getOrReturnCtx(e,t),{code:af.not_finite,message:r.message}),n.dirty()):i0.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,i2.toString(t))}gt(e,t){return this.setLimit("min",e,!1,i2.toString(t))}lte(e,t){return this.setLimit("max",e,!0,i2.toString(t))}lt(e,t){return this.setLimit("max",e,!1,i2.toString(t))}setLimit(e,t,n,r){return new aU({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:i2.toString(r)}]})}_addCheck(e){return new aU({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:i2.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:i2.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:i2.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:i2.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:i2.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:i2.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:i2.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:i2.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:i2.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&i0.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}aU.create=e=>new aU({checks:[],typeName:i9.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...aC(e)});class aL extends aO{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ad.bigint){let t=this._getOrReturnCtx(e);return ay(t,{code:af.invalid_type,expected:ad.bigint,received:t.parsedType}),ag}let n=new av;for(let r of this._def.checks)"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(ay(t=this._getOrReturnCtx(e,t),{code:af.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(ay(t=this._getOrReturnCtx(e,t),{code:af.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(ay(t=this._getOrReturnCtx(e,t),{code:af.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):i0.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,i2.toString(t))}gt(e,t){return this.setLimit("min",e,!1,i2.toString(t))}lte(e,t){return this.setLimit("max",e,!0,i2.toString(t))}lt(e,t){return this.setLimit("max",e,!1,i2.toString(t))}setLimit(e,t,n,r){return new aL({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:i2.toString(r)}]})}_addCheck(e){return new aL({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:i2.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:i2.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:i2.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:i2.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:i2.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}aL.create=e=>{var t;return new aL({checks:[],typeName:i9.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...aC(e)})};class az extends aO{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ad.boolean){let t=this._getOrReturnCtx(e);return ay(t,{code:af.invalid_type,expected:ad.boolean,received:t.parsedType}),ag}return aw(e.data)}}az.create=e=>new az({typeName:i9.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...aC(e)});class a$ extends aO{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ad.date){let t=this._getOrReturnCtx(e);return ay(t,{code:af.invalid_type,expected:ad.date,received:t.parsedType}),ag}if(isNaN(e.data.getTime())){let t=this._getOrReturnCtx(e);return ay(t,{code:af.invalid_date}),ag}let n=new av;for(let r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(ay(t=this._getOrReturnCtx(e,t),{code:af.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),n.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(ay(t=this._getOrReturnCtx(e,t),{code:af.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),n.dirty()):i0.assertNever(r);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new a$({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:i2.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:i2.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}a$.create=e=>new a$({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:i9.ZodDate,...aC(e)});class aM extends aO{_parse(e){if(this._getType(e)!==ad.symbol){let t=this._getOrReturnCtx(e);return ay(t,{code:af.invalid_type,expected:ad.symbol,received:t.parsedType}),ag}return aw(e.data)}}aM.create=e=>new aM({typeName:i9.ZodSymbol,...aC(e)});class aV extends aO{_parse(e){if(this._getType(e)!==ad.undefined){let t=this._getOrReturnCtx(e);return ay(t,{code:af.invalid_type,expected:ad.undefined,received:t.parsedType}),ag}return aw(e.data)}}aV.create=e=>new aV({typeName:i9.ZodUndefined,...aC(e)});class aB extends aO{_parse(e){if(this._getType(e)!==ad.null){let t=this._getOrReturnCtx(e);return ay(t,{code:af.invalid_type,expected:ad.null,received:t.parsedType}),ag}return aw(e.data)}}aB.create=e=>new aB({typeName:i9.ZodNull,...aC(e)});class aW extends aO{constructor(){super(...arguments),this._any=!0}_parse(e){return aw(e.data)}}aW.create=e=>new aW({typeName:i9.ZodAny,...aC(e)});class aK extends aO{constructor(){super(...arguments),this._unknown=!0}_parse(e){return aw(e.data)}}aK.create=e=>new aK({typeName:i9.ZodUnknown,...aC(e)});class aG extends aO{_parse(e){let t=this._getOrReturnCtx(e);return ay(t,{code:af.invalid_type,expected:ad.never,received:t.parsedType}),ag}}aG.create=e=>new aG({typeName:i9.ZodNever,...aC(e)});class aH extends aO{_parse(e){if(this._getType(e)!==ad.undefined){let t=this._getOrReturnCtx(e);return ay(t,{code:af.invalid_type,expected:ad.void,received:t.parsedType}),ag}return aw(e.data)}}aH.create=e=>new aH({typeName:i9.ZodVoid,...aC(e)});class aJ extends aO{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==ad.array)return ay(t,{code:af.invalid_type,expected:ad.array,received:t.parsedType}),ag;if(null!==r.exactLength){let e=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(e||a)&&(ay(t,{code:e?af.too_big:af.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(ay(t,{code:af.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(ay(t,{code:af.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new aP(t,e,t.path,n)))).then(e=>av.mergeArray(n,e));let a=[...t.data].map((e,n)=>r.type._parseSync(new aP(t,e,t.path,n)));return av.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new aJ({...this._def,minLength:{value:e,message:i2.toString(t)}})}max(e,t){return new aJ({...this._def,maxLength:{value:e,message:i2.toString(t)}})}length(e,t){return new aJ({...this._def,exactLength:{value:e,message:i2.toString(t)}})}nonempty(e){return this.min(1,e)}}aJ.create=(e,t)=>new aJ({type:e,minLength:null,maxLength:null,exactLength:null,typeName:i9.ZodArray,...aC(t)});class aY extends aO{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=i0.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==ad.object){let t=this._getOrReturnCtx(e);return ay(t,{code:af.invalid_type,expected:ad.object,received:t.parsedType}),ag}let{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof aG&&"strip"===this._def.unknownKeys))for(let e in n.data)a.includes(e)||i.push(e);let s=[];for(let e of a){let t=r[e],a=n.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new aP(n,a,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof aG){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of i)s.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)i.length>0&&(ay(n,{code:af.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of i){let r=n.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new aP(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of s){let n=await t.key;e.push({key:n,value:await t.value,alwaysSet:t.alwaysSet})}return e}).then(e=>av.mergeObjectSync(t,e)):av.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return i2.errToObj,new aY({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,a,i,s;let o=null!==(i=null===(a=(r=this._def).errorMap)||void 0===a?void 0:a.call(r,t,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=i2.errToObj(e).message)&&void 0!==s?s:o}:{message:o}}}:{}})}strip(){return new aY({...this._def,unknownKeys:"strip"})}passthrough(){return new aY({...this._def,unknownKeys:"passthrough"})}extend(e){return new aY({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new aY({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:i9.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new aY({...this._def,catchall:e})}pick(e){let t={};return i0.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new aY({...this._def,shape:()=>t})}omit(e){let t={};return i0.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new aY({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(!(t instanceof aY))return t instanceof aJ?new aJ({...t._def,type:e(t.element)}):t instanceof ii?ii.create(e(t.unwrap())):t instanceof is?is.create(e(t.unwrap())):t instanceof a2?a2.create(t.items.map(t=>e(t))):t;{let n={};for(let r in t.shape){let a=t.shape[r];n[r]=ii.create(e(a))}return new aY({...t._def,shape:()=>n})}}(this)}partial(e){let t={};return i0.objectKeys(this.shape).forEach(n=>{let r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}),new aY({...this._def,shape:()=>t})}required(e){let t={};return i0.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof ii;)e=e._def.innerType;t[n]=e}}),new aY({...this._def,shape:()=>t})}keyof(){return a7(i0.objectKeys(this.shape))}}aY.create=(e,t)=>new aY({shape:()=>e,unknownKeys:"strip",catchall:aG.create(),typeName:i9.ZodObject,...aC(t)}),aY.strictCreate=(e,t)=>new aY({shape:()=>e,unknownKeys:"strict",catchall:aG.create(),typeName:i9.ZodObject,...aC(t)}),aY.lazycreate=(e,t)=>new aY({shape:e,unknownKeys:"strip",catchall:aG.create(),typeName:i9.ZodObject,...aC(t)});class aX extends aO{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{let n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;let n=e.map(e=>new ah(e.ctx.common.issues));return ay(t,{code:af.invalid_union,unionErrors:n}),ag});{let e;let r=[];for(let a of n){let n={...t,common:{...t.common,issues:[]},parent:null},i=a._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=r.map(e=>new ah(e));return ay(t,{code:af.invalid_union,unionErrors:a}),ag}}get options(){return this._def.options}}aX.create=(e,t)=>new aX({options:e,typeName:i9.ZodUnion,...aC(t)});let aQ=e=>e instanceof a6?aQ(e.schema):e instanceof ia?aQ(e.innerType()):e instanceof a8?[e.value]:e instanceof ie?e.options:e instanceof it?Object.keys(e.enum):e instanceof io?aQ(e._def.innerType):e instanceof aV?[void 0]:e instanceof aB?[null]:null;class a0 extends aO{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ad.object)return ay(t,{code:af.invalid_type,expected:ad.object,received:t.parsedType}),ag;let n=this.discriminator,r=t.data[n],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(ay(t,{code:af.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ag)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let r=new Map;for(let n of t){let t=aQ(n.shape[e]);if(!t)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of t){if(r.has(a))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,n)}}return new a0({typeName:i9.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...aC(n)})}}class a1 extends aO{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(ax(e)||ax(r))return ag;let a=function e(t,n){let r=ap(t),a=ap(n);if(t===n)return{valid:!0,data:t};if(r===ad.object&&a===ad.object){let r=i0.objectKeys(n),a=i0.objectKeys(t).filter(e=>-1!==r.indexOf(e)),i={...t,...n};for(let r of a){let a=e(t[r],n[r]);if(!a.valid)return{valid:!1};i[r]=a.data}return{valid:!0,data:i}}if(r!==ad.array||a!==ad.array)return r===ad.date&&a===ad.date&&+t==+n?{valid:!0,data:t}:{valid:!1};{if(t.length!==n.length)return{valid:!1};let r=[];for(let a=0;a<t.length;a++){let i=t[a],s=n[a],o=e(i,s);if(!o.valid)return{valid:!1};r.push(o.data)}return{valid:!0,data:r}}}(e.value,r.value);return a.valid?((ak(e)||ak(r))&&t.dirty(),{status:t.value,value:a.data}):(ay(n,{code:af.invalid_intersection_types}),ag)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}a1.create=(e,t,n)=>new a1({left:e,right:t,typeName:i9.ZodIntersection,...aC(n)});class a2 extends aO{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ad.array)return ay(n,{code:af.invalid_type,expected:ad.array,received:n.parsedType}),ag;if(n.data.length<this._def.items.length)return ay(n,{code:af.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ag;!this._def.rest&&n.data.length>this._def.items.length&&(ay(n,{code:af.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let r=[...n.data].map((e,t)=>{let r=this._def.items[t]||this._def.rest;return r?r._parse(new aP(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>av.mergeArray(t,e)):av.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new a2({...this._def,rest:e})}}a2.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new a2({items:e,typeName:i9.ZodTuple,rest:null,...aC(t)})};class a9 extends aO{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ad.object)return ay(n,{code:af.invalid_type,expected:ad.object,received:n.parsedType}),ag;let r=[],a=this._def.keyType,i=this._def.valueType;for(let e in n.data)r.push({key:a._parse(new aP(n,e,n.path,e)),value:i._parse(new aP(n,n.data[e],n.path,e))});return n.common.async?av.mergeObjectAsync(t,r):av.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new a9(t instanceof aO?{keyType:e,valueType:t,typeName:i9.ZodRecord,...aC(n)}:{keyType:aF.create(),valueType:e,typeName:i9.ZodRecord,...aC(t)})}}class a4 extends aO{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ad.map)return ay(n,{code:af.invalid_type,expected:ad.map,received:n.parsedType}),ag;let r=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map(([e,t],i)=>({key:r._parse(new aP(n,e,n.path,[i,"key"])),value:a._parse(new aP(n,t,n.path,[i,"value"]))}));if(n.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let n of i){let r=await n.key,a=await n.value;if("aborted"===r.status||"aborted"===a.status)return ag;("dirty"===r.status||"dirty"===a.status)&&t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let n of i){let r=n.key,a=n.value;if("aborted"===r.status||"aborted"===a.status)return ag;("dirty"===r.status||"dirty"===a.status)&&t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}}}a4.create=(e,t,n)=>new a4({valueType:t,keyType:e,typeName:i9.ZodMap,...aC(n)});class a3 extends aO{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ad.set)return ay(n,{code:af.invalid_type,expected:ad.set,received:n.parsedType}),ag;let r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(ay(n,{code:af.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(ay(n,{code:af.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let a=this._def.valueType;function i(e){let n=new Set;for(let r of e){if("aborted"===r.status)return ag;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}let s=[...n.data.values()].map((e,t)=>a._parse(new aP(n,e,n.path,t)));return n.common.async?Promise.all(s).then(e=>i(e)):i(s)}min(e,t){return new a3({...this._def,minSize:{value:e,message:i2.toString(t)}})}max(e,t){return new a3({...this._def,maxSize:{value:e,message:i2.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}a3.create=(e,t)=>new a3({valueType:e,minSize:null,maxSize:null,typeName:i9.ZodSet,...aC(t)});class a5 extends aO{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ad.function)return ay(t,{code:af.invalid_type,expected:ad.function,received:t.parsedType}),ag;function n(e,n){return a_({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,am,am].filter(e=>!!e),issueData:{code:af.invalid_arguments,argumentsError:n}})}function r(e,n){return a_({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,am,am].filter(e=>!!e),issueData:{code:af.invalid_return_type,returnTypeError:n}})}let a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof ir){let e=this;return aw(async function(...t){let s=new ah([]),o=await e._def.args.parseAsync(t,a).catch(e=>{throw s.addIssue(n(t,e)),s}),u=await Reflect.apply(i,this,o);return await e._def.returns._def.type.parseAsync(u,a).catch(e=>{throw s.addIssue(r(u,e)),s})})}{let e=this;return aw(function(...t){let s=e._def.args.safeParse(t,a);if(!s.success)throw new ah([n(t,s.error)]);let o=Reflect.apply(i,this,s.data),u=e._def.returns.safeParse(o,a);if(!u.success)throw new ah([r(o,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new a5({...this._def,args:a2.create(e).rest(aK.create())})}returns(e){return new a5({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new a5({args:e||a2.create([]).rest(aK.create()),returns:t||aK.create(),typeName:i9.ZodFunction,...aC(n)})}}class a6 extends aO{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}a6.create=(e,t)=>new a6({getter:e,typeName:i9.ZodLazy,...aC(t)});class a8 extends aO{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return ay(t,{received:t.data,code:af.invalid_literal,expected:this._def.value}),ag}return{status:"valid",value:e.data}}get value(){return this._def.value}}function a7(e,t){return new ie({values:e,typeName:i9.ZodEnum,...aC(t)})}a8.create=(e,t)=>new a8({value:e,typeName:i9.ZodLiteral,...aC(t)});class ie extends aO{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),n=this._def.values;return ay(t,{expected:i0.joinValues(n),received:t.parsedType,code:af.invalid_type}),ag}if(-1===this._def.values.indexOf(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return ay(t,{received:t.data,code:af.invalid_enum_value,options:n}),ag}return aw(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return ie.create(e)}exclude(e){return ie.create(this.options.filter(t=>!e.includes(t)))}}ie.create=a7;class it extends aO{_parse(e){let t=i0.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ad.string&&n.parsedType!==ad.number){let e=i0.objectValues(t);return ay(n,{expected:i0.joinValues(e),received:n.parsedType,code:af.invalid_type}),ag}if(-1===t.indexOf(e.data)){let e=i0.objectValues(t);return ay(n,{received:n.data,code:af.invalid_enum_value,options:e}),ag}return aw(e.data)}get enum(){return this._def.values}}it.create=(e,t)=>new it({values:e,typeName:i9.ZodNativeEnum,...aC(t)});class ir extends aO{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ad.promise&&!1===t.common.async)return ay(t,{code:af.invalid_type,expected:ad.promise,received:t.parsedType}),ag;let n=t.parsedType===ad.promise?t.data:Promise.resolve(t.data);return aw(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ir.create=(e,t)=>new ir({type:e,typeName:i9.ZodPromise,...aC(t)});class ia extends aO{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===i9.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:e=>{ay(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===r.type){let e=r.transform(n.data,a);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(e).then(e=>this._def.schema._parseAsync({data:e,path:n.path,parent:n})):this._def.schema._parseSync({data:e,path:n.path,parent:n})}if("refinement"===r.type){let e=e=>{let t=r.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?ag:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))));{let r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?ag:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}}if("transform"===r.type){if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>aS(e)?Promise.resolve(r.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!aS(e))return e;let i=r.transform(e.value,a);if(i instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}}i0.assertNever(r)}}ia.create=(e,t,n)=>new ia({schema:e,typeName:i9.ZodEffects,effect:t,...aC(n)}),ia.createWithPreprocess=(e,t,n)=>new ia({schema:t,effect:{type:"preprocess",transform:e},typeName:i9.ZodEffects,...aC(n)});class ii extends aO{_parse(e){return this._getType(e)===ad.undefined?aw(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ii.create=(e,t)=>new ii({innerType:e,typeName:i9.ZodOptional,...aC(t)});class is extends aO{_parse(e){return this._getType(e)===ad.null?aw(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}is.create=(e,t)=>new is({innerType:e,typeName:i9.ZodNullable,...aC(t)});class io extends aO{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===ad.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}io.create=(e,t)=>new io({innerType:e,typeName:i9.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...aC(t)});class iu extends aO{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return aT(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ah(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new ah(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}iu.create=(e,t)=>new iu({innerType:e,typeName:i9.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...aC(t)});class il extends aO{_parse(e){if(this._getType(e)!==ad.nan){let t=this._getOrReturnCtx(e);return ay(t,{code:af.invalid_type,expected:ad.nan,received:t.parsedType}),ag}return{status:"valid",value:e.data}}}il.create=e=>new il({typeName:i9.ZodNaN,...aC(e)});class ic extends aO{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class id extends aO{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ag:"dirty"===e.status?(t.dirty(),ab(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})();{let e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ag:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new id({in:e,out:t,typeName:i9.ZodPipeline})}}class ip extends aO{_parse(e){let t=this._def.innerType._parse(e);return aS(t)&&(t.value=Object.freeze(t.value)),t}}ip.create=(e,t)=>new ip({innerType:e,typeName:i9.ZodReadonly,...aC(t)}),aY.lazycreate,(iG=i9||(i9={})).ZodString="ZodString",iG.ZodNumber="ZodNumber",iG.ZodNaN="ZodNaN",iG.ZodBigInt="ZodBigInt",iG.ZodBoolean="ZodBoolean",iG.ZodDate="ZodDate",iG.ZodSymbol="ZodSymbol",iG.ZodUndefined="ZodUndefined",iG.ZodNull="ZodNull",iG.ZodAny="ZodAny",iG.ZodUnknown="ZodUnknown",iG.ZodNever="ZodNever",iG.ZodVoid="ZodVoid",iG.ZodArray="ZodArray",iG.ZodObject="ZodObject",iG.ZodUnion="ZodUnion",iG.ZodDiscriminatedUnion="ZodDiscriminatedUnion",iG.ZodIntersection="ZodIntersection",iG.ZodTuple="ZodTuple",iG.ZodRecord="ZodRecord",iG.ZodMap="ZodMap",iG.ZodSet="ZodSet",iG.ZodFunction="ZodFunction",iG.ZodLazy="ZodLazy",iG.ZodLiteral="ZodLiteral",iG.ZodEnum="ZodEnum",iG.ZodEffects="ZodEffects",iG.ZodNativeEnum="ZodNativeEnum",iG.ZodOptional="ZodOptional",iG.ZodNullable="ZodNullable",iG.ZodDefault="ZodDefault",iG.ZodCatch="ZodCatch",iG.ZodPromise="ZodPromise",iG.ZodBranded="ZodBranded",iG.ZodPipeline="ZodPipeline",iG.ZodReadonly="ZodReadonly";let ih=aF.create;aU.create,il.create,aL.create;let im=az.create;a$.create,aM.create,aV.create,aB.create,aW.create,aK.create,aG.create,aH.create;let i_=aJ.create,iy=aY.create;aY.strictCreate,aX.create;let iv=a0.create;a1.create,a2.create,a9.create,a4.create,a3.create,a5.create,a6.create;let ig=a8.create;ie.create,it.create,ir.create,ia.create,ii.create,is.create,ia.createWithPreprocess,id.create;let ib={persona:"persona",account:"account"},iw=iy({challenge:ih(),proof:t6,address:ih(),type:ig(ib.persona)}),ix=iy({challenge:ih(),proof:t6,address:ih(),type:ig(ib.account)}),ik=iv("type",[iw,ix]),iS=iy({entry:ig("fullName"),fields:nn}),iT=iy({entry:ig("emailAddresses"),fields:i_(ih())}),iP=iy({entry:ig("phoneNumbers"),fields:i_(ih())}),iR=iv("entry",[iS,iT,iP]),iC=iy({accounts:i_(t5),personaData:i_(iR),persona:t7.optional(),proofs:i_(ik)}),iO=iy({persona:iy({proof:im()}).optional(),ongoingAccounts:iy({numberOfAccounts:nr.optional(),proof:im()}).optional(),ongoingPersonaData:ns.optional()}),iE=iy({loggedInTimestamp:ih(),walletData:iC,sharedData:iO}),iA={accounts:[],personaData:[],proofs:[],persona:void 0},iI=()=>({walletData:new z(iA),sharedData:new z({}),loggedInTimestamp:new z(""),initialized:new z(!1)});function iN(e,t,n,r){return new(n||(n=Promise))(function(a,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,o)}u((r=r.apply(e,t||[])).next())})}function iq(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}function ij(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return s}function iD(e,t,n){if(n||2==arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}var iZ={withStackTrace:!1},iF=function(e,t,n){return void 0===n&&(n=iZ),{data:t.isOk()?{type:"Ok",value:t.value}:{type:"Err",value:t.error},message:e,stack:n.withStackTrace?Error().stack:void 0}},iU=function(){function e(e){this._promise=e}return e.fromSafePromise=function(t){var n=t.then(function(e){return new st(e)});return new e(n)},e.fromPromise=function(t,n){var r=t.then(function(e){return new st(e)}).catch(function(e){return new sn(n(e))});return new e(r)},e.combine=function(e){return i5(e)},e.combineWithAllErrors=function(e){return i8(e)},e.prototype.map=function(t){var n=this;return new e(this._promise.then(function(e){return iN(n,void 0,void 0,function(){var n;return iq(this,function(r){switch(r.label){case 0:return e.isErr()?[2,new sn(e.error)]:(n=st.bind,[4,t(e.value)]);case 1:return[2,new(n.apply(st,[void 0,r.sent()]))]}})})}))},e.prototype.mapErr=function(t){var n=this;return new e(this._promise.then(function(e){return iN(n,void 0,void 0,function(){var n;return iq(this,function(r){switch(r.label){case 0:return e.isOk()?[2,new st(e.value)]:(n=sn.bind,[4,t(e.error)]);case 1:return[2,new(n.apply(sn,[void 0,r.sent()]))]}})})}))},e.prototype.andThen=function(t){return new e(this._promise.then(function(n){if(n.isErr())return new sn(n.error);var r=t(n.value);return r instanceof e?r._promise:r}))},e.prototype.orElse=function(t){var n=this;return new e(this._promise.then(function(e){return iN(n,void 0,void 0,function(){return iq(this,function(n){return e.isErr()?[2,t(e.error)]:[2,new st(e.value)]})})}))},e.prototype.match=function(e,t){return this._promise.then(function(n){return n.match(e,t)})},e.prototype.unwrapOr=function(e){return this._promise.then(function(t){return t.unwrapOr(e)})},e.prototype.then=function(e,t){return this._promise.then(e,t)},e}(),iL=function(e){return new iU(Promise.resolve(new st(e)))},iz=function(e){return new iU(Promise.resolve(new sn(e)))};iU.fromPromise,iU.fromSafePromise;var i$,iM,iV,iB,iW,iK,iG,iH,iJ,iY,iX,iQ,i0,i1,i2,i9,i4,i3=function(e){return e.reduce(function(e,t){var n;return e.isOk()?t.isErr()?se(t.error):e.map((n=t.value,function(e){return iD(iD([],ij(e),!1),[n],!1)})):e},i7([]))},i5=function(e){return iU.fromSafePromise(Promise.all(e)).andThen(i3)},i6=function(e){return e.reduce(function(e,t){return t.isErr()?e.isErr()?se(iD(iD([],ij(e.error),!1),[t.error],!1)):se([t.error]):e.isErr()?e:i7(iD(iD([],ij(e.value),!1),[t.value],!1))},i7([]))},i8=function(e){return iU.fromSafePromise(Promise.all(e)).andThen(i6)};(a=i4||(i4={})).fromThrowable=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{var a=e.apply(void 0,iD([],ij(n),!1));return i7(a)}catch(e){return se(t?t(e):e)}}},a.combine=function(e){return i3(e)},a.combineWithAllErrors=function(e){return i6(e)};var i7=function(e){return new st(e)},se=function(e){return new sn(e)},st=function(){function e(e){this.value=e}return e.prototype.isOk=function(){return!0},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(e){return i7(e(this.value))},e.prototype.mapErr=function(e){return i7(this.value)},e.prototype.andThen=function(e){return e(this.value)},e.prototype.orElse=function(e){return i7(this.value)},e.prototype.asyncAndThen=function(e){return e(this.value)},e.prototype.asyncMap=function(e){return iU.fromSafePromise(e(this.value))},e.prototype.unwrapOr=function(e){return this.value},e.prototype.match=function(e,t){return e(this.value)},e.prototype._unsafeUnwrap=function(e){return this.value},e.prototype._unsafeUnwrapErr=function(e){throw iF("Called `_unsafeUnwrapErr` on an Ok",this,e)},e}(),sn=function(){function e(e){this.error=e}return e.prototype.isOk=function(){return!1},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(e){return se(this.error)},e.prototype.mapErr=function(e){return se(e(this.error))},e.prototype.andThen=function(e){return se(this.error)},e.prototype.orElse=function(e){return e(this.error)},e.prototype.asyncAndThen=function(e){return iz(this.error)},e.prototype.asyncMap=function(e){return iz(this.error)},e.prototype.unwrapOr=function(e){return e},e.prototype.match=function(e,t){return t(this.error)},e.prototype._unsafeUnwrap=function(e){throw iF("Called `_unsafeUnwrap` on an Err",this,e)},e.prototype._unsafeUnwrapErr=function(e){return this.error},e}();i4.fromThrowable;var sr=Symbol.for("immer-nothing"),sa=Symbol.for("immer-draftable"),si=Symbol.for("immer-state");function ss(e,...t){throw Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var so=Object.getPrototypeOf;function su(e){return!!e&&!!e[si]}function sl(e){var t;return!!e&&(sd(e)||Array.isArray(e)||!!e[sa]||!!(null!=(t=e.constructor)&&t[sa])||s_(e)||sy(e))}var sc=Object.prototype.constructor.toString();function sd(e){if(!e||"object"!=typeof e)return!1;let t=so(e);if(null===t)return!0;let n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===sc}function sp(e,t){0===sf(e)?Object.entries(e).forEach(([n,r])=>{t(n,r,e)}):e.forEach((n,r)=>t(r,n,e))}function sf(e){let t=e[si];return t?t.type_:Array.isArray(e)?1:s_(e)?2:sy(e)?3:0}function sh(e,t){return 2===sf(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function sm(e,t,n){let r=sf(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function s_(e){return e instanceof Map}function sy(e){return e instanceof Set}function sv(e){return e.copy_||e.base_}function sg(e,t){if(s_(e))return new Map(e);if(sy(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&sd(e))return so(e)?{...e}:Object.assign(Object.create(null),e);let n=Object.getOwnPropertyDescriptors(e);delete n[si];let r=Reflect.ownKeys(n);for(let t=0;t<r.length;t++){let a=r[t],i=n[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(n[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(so(e),n)}function sb(e,t=!1){return sx(e)||su(e)||!sl(e)||(sf(e)>1&&(e.set=e.add=e.clear=e.delete=sw),Object.freeze(e),t&&sp(e,(e,t)=>sb(t,!0))),e}function sw(){ss(2)}function sx(e){return Object.isFrozen(e)}var sk={};function sS(e){let t=sk[e];return t||ss(0,e),t}function sT(e,t){t&&(sS("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function sP(e){sR(e),e.drafts_.forEach(sO),e.drafts_=null}function sR(e){e===i&&(i=e.parent_)}function sC(e){return i={drafts_:[],parent_:i,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function sO(e){let t=e[si];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function sE(e,t){t.unfinalizedDrafts_=t.drafts_.length;let n=t.drafts_[0];return void 0!==e&&e!==n?(n[si].modified_&&(sP(t),ss(4)),sl(e)&&(e=sA(t,e),t.parent_||sN(t,e)),t.patches_&&sS("Patches").generateReplacementPatches_(n[si].base_,e,t.patches_,t.inversePatches_)):e=sA(t,n,[]),sP(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==sr?e:void 0}function sA(e,t,n){if(sx(t))return t;let r=t[si];if(!r)return sp(t,(a,i)=>sI(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return sN(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;let t=r.copy_,a=t,i=!1;3===r.type_&&(a=new Set(t),t.clear(),i=!0),sp(a,(a,s)=>sI(e,r,t,a,s,n,i)),sN(e,t,!1),n&&e.patches_&&sS("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function sI(e,t,n,r,a,i,s){if(su(a)){let s=i&&t&&3!==t.type_&&!sh(t.assigned_,r)?i.concat(r):void 0,o=sA(e,a,s);if(sm(n,r,o),!su(o))return;e.canAutoFreeze_=!1}else s&&n.add(a);if(sl(a)&&!sx(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;sA(e,a),t&&t.scope_.parent_||sN(e,a)}}function sN(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&sb(t,n)}var sq={get(e,t){if(t===si)return e;let n=sv(e);if(!sh(n,t))return function(e,t,n){var r;let a=sZ(t,n);return a?"value"in a?a.value:null==(r=a.get)?void 0:r.call(e.draft_):void 0}(e,n,t);let r=n[t];return e.finalized_||!sl(r)?r:r===sD(e.base_,t)?(sU(e),e.copy_[t]=sL(r,e)):r},has:(e,t)=>t in sv(e),ownKeys:e=>Reflect.ownKeys(sv(e)),set(e,t,n){let r=sZ(sv(e),t);if(null!=r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){let r=sD(sv(e),t),a=null==r?void 0:r[si];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if((n===r?0!==n||1/n==1/r:n!=n&&r!=r)&&(void 0!==n||sh(e.base_,t)))return!0;sU(e),sF(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==sD(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,sU(e),sF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){let n=sv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}},defineProperty(){ss(11)},getPrototypeOf:e=>so(e.base_),setPrototypeOf(){ss(12)}},sj={};function sD(e,t){let n=e[si];return(n?sv(n):e)[t]}function sZ(e,t){if(!(t in e))return;let n=so(e);for(;n;){let e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=so(n)}}function sF(e){e.modified_||(e.modified_=!0,e.parent_&&sF(e.parent_))}function sU(e){e.copy_||(e.copy_=sg(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function sL(e,t){let n=s_(e)?sS("MapSet").proxyMap_(e,t):sy(e)?sS("MapSet").proxySet_(e,t):function(e,t){let n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:i,modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},a=r,s=sq;n&&(a=[r],s=sj);let{revoke:o,proxy:u}=Proxy.revocable(a,s);return r.draft_=u,r.revoke_=o,u}(e,t);return(t?t.scope_:i).drafts_.push(n),n}sp(sq,(e,t)=>{sj[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),sj.deleteProperty=function(e,t){return sj.set.call(this,e,t,void 0)},sj.set=function(e,t,n){return sq.set.call(this,e[0],t,n,e[0])};var sz=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{let r;if("function"==typeof e&&"function"!=typeof t){let n=t;t=e;let r=this;return function(e=n,...a){return r.produce(e,e=>t.call(this,e,...a))}}if("function"!=typeof t&&ss(6),void 0!==n&&"function"!=typeof n&&ss(7),sl(e)){let a=sC(this),i=sL(e,void 0),s=!0;try{r=t(i),s=!1}finally{s?sP(a):sR(a)}return sT(a,n),sE(r,a)}if(e&&"object"==typeof e)ss(1,e);else{if(void 0===(r=t(e))&&(r=e),r===sr&&(r=void 0),this.autoFreeze_&&sb(r,!0),n){let t=[],a=[];sS("Patches").generateReplacementPatches_(e,r,t,a),n(t,a)}return r}},this.produceWithPatches=(e,t)=>{let n,r;return"function"==typeof e?(t,...n)=>this.produceWithPatches(t,t=>e(t,...n)):[this.produce(e,t,(e,t)=>{n=e,r=t}),n,r]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;sl(e)||ss(8),su(e)&&(su(t=e)||ss(10,t),e=function e(t){let n;if(!sl(t)||sx(t))return t;let r=t[si];if(r){if(!r.modified_)return r.base_;r.finalized_=!0,n=sg(t,r.scope_.immer_.useStrictShallowCopy_)}else n=sg(t,!0);return sp(n,(t,r)=>{sm(n,t,e(r))}),r&&(r.finalized_=!1),n}(t));let n=sC(this),r=sL(e,void 0);return r[si].isManual_=!0,sR(n),r}finishDraft(e,t){let n=e&&e[si];n&&n.isManual_||ss(9);let{scope_:r}=n;return sT(r,t),sE(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){let r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));let r=sS("Patches").applyPatches_;return su(e)?r(e,t):this.produce(e,e=>r(e,t))}},s$=sz.produce;sz.produceWithPatches.bind(sz),sz.setAutoFreeze.bind(sz),sz.setUseStrictShallowCopy.bind(sz),sz.applyPatches.bind(sz),sz.createDraft.bind(sz),sz.finishDraft.bind(sz);var sM="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof n.g?n.g:"u">typeof self?self:{},sV={exports:{}};sV.exports,function(e,t){var n,r,a,i="__lodash_hash_undefined__",s="[object Arguments]",o="[object Array]",u="[object Boolean]",l="[object Date]",c="[object Error]",d="[object Function]",p="[object Map]",f="[object Number]",h="[object Object]",m="[object Promise]",_="[object RegExp]",y="[object Set]",v="[object String]",g="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",x=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[s]=S[o]=S[b]=S[u]=S[w]=S[l]=S[c]=S[d]=S[p]=S[f]=S[h]=S[_]=S[y]=S[v]=S[g]=!1;var T="object"==typeof sM&&sM&&sM.Object===Object&&sM,P="object"==typeof self&&self&&self.Object===Object&&self,R=T||P||Function("return this")(),C=t&&!t.nodeType&&t,O=C&&e&&!e.nodeType&&e,E=O&&O.exports===C,A=E&&T.process,I=function(){try{return A&&A.binding&&A.binding("util")}catch{}}(),N=I&&I.isTypedArray;function q(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function j(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var D=Array.prototype,Z=Function.prototype,F=Object.prototype,U=R["__core-js_shared__"],L=Z.toString,z=F.hasOwnProperty,$=(n=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",M=F.toString,V=RegExp("^"+L.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=E?R.Buffer:void 0,W=R.Symbol,K=R.Uint8Array,G=F.propertyIsEnumerable,H=D.splice,J=W?W.toStringTag:void 0,Y=Object.getOwnPropertySymbols,X=B?B.isBuffer:void 0,Q=(r=Object.keys,a=Object,function(e){return r(a(e))}),ee=eS(R,"DataView"),et=eS(R,"Map"),en=eS(R,"Promise"),er=eS(R,"Set"),ea=eS(R,"WeakMap"),ei=eS(Object,"create"),es=eR(ee),eo=eR(et),eu=eR(en),el=eR(er),ec=eR(ea),ed=W?W.prototype:void 0,ep=ed?ed.valueOf:void 0;function ef(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function eh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function em(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function e_(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new em;++t<n;)this.add(e[t])}function ey(e){var t=this.__data__=new eh(e);this.size=t.size}function ev(e,t){for(var n=e.length;n--;)if(eC(e[n][0],t))return n;return -1}function eg(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":J&&J in Object(e)?function(e){var t=z.call(e,J),n=e[J];try{e[J]=void 0;var r=!0}catch{}var a=M.call(e);return r&&(t?e[J]=n:delete e[J]),a}(e):M.call(e)}function eb(e){return ej(e)&&eg(e)==s}function ew(e,t,n,r,a,i){var s=1&n,o=e.length,u=t.length;if(o!=u&&!(s&&u>o))return!1;var l=i.get(e);if(l&&i.get(t))return l==t;var c=-1,d=!0,p=2&n?new e_:void 0;for(i.set(e,t),i.set(t,e);++c<o;){var f=e[c],h=t[c];if(r)var m=s?r(h,f,c,t,e,i):r(f,h,c,e,t,i);if(void 0!==m){if(m)continue;d=!1;break}if(p){if(!function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}(t,function(e,t){if(!p.has(t)&&(f===e||a(f,e,n,r,i)))return p.push(t)})){d=!1;break}}else if(!(f===h||a(f,h,n,r,i))){d=!1;break}}return i.delete(e),i.delete(t),d}function ex(e){var t;return t=function(e){return null!=e&&eN(e.length)&&!eI(e)?function(e,t){var n,r=eE(e),a=!r&&eO(e),i=!r&&!a&&eA(e),s=!r&&!a&&!i&&eD(e),o=r||a||i||s,u=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=u.length;for(var c in e)z.call(e,c)&&!(o&&("length"==c||i&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||(n=(n=l)??9007199254740991)&&("number"==typeof c||k.test(c))&&c>-1&&c%1==0&&c<n))&&u.push(c);return u}(e):function(e){if(n="function"==typeof(t=e&&e.constructor)&&t.prototype||F,e!==n)return Q(e);var t,n,r=[];for(var a in Object(e))z.call(e,a)&&"constructor"!=a&&r.push(a);return r}(e)}(e),eE(e)?t:function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}(t,eT(e))}function ek(e,t){var n,r=e.__data__;return("string"==(n=typeof t)||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?r["string"==typeof t?"string":"hash"]:r.map}function eS(e,t){var n=null==e?void 0:e[t];return!(!eq(n)||$&&$ in n)&&(eI(n)?V:x).test(eR(n))?n:void 0}ef.prototype.clear=function(){this.__data__=ei?ei(null):{},this.size=0},ef.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ef.prototype.get=function(e){var t=this.__data__;if(ei){var n=t[e];return n===i?void 0:n}return z.call(t,e)?t[e]:void 0},ef.prototype.has=function(e){var t=this.__data__;return ei?void 0!==t[e]:z.call(t,e)},ef.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ei&&void 0===t?i:t,this},eh.prototype.clear=function(){this.__data__=[],this.size=0},eh.prototype.delete=function(e){var t=this.__data__,n=ev(t,e);return!(n<0)&&(n==t.length-1?t.pop():H.call(t,n,1),--this.size,!0)},eh.prototype.get=function(e){var t=this.__data__,n=ev(t,e);return n<0?void 0:t[n][1]},eh.prototype.has=function(e){return ev(this.__data__,e)>-1},eh.prototype.set=function(e,t){var n=this.__data__,r=ev(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},em.prototype.clear=function(){this.size=0,this.__data__={hash:new ef,map:new(et||eh),string:new ef}},em.prototype.delete=function(e){var t=ek(this,e).delete(e);return this.size-=t?1:0,t},em.prototype.get=function(e){return ek(this,e).get(e)},em.prototype.has=function(e){return ek(this,e).has(e)},em.prototype.set=function(e,t){var n=ek(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},e_.prototype.add=e_.prototype.push=function(e){return this.__data__.set(e,i),this},e_.prototype.has=function(e){return this.__data__.has(e)},ey.prototype.clear=function(){this.__data__=new eh,this.size=0},ey.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ey.prototype.get=function(e){return this.__data__.get(e)},ey.prototype.has=function(e){return this.__data__.has(e)},ey.prototype.set=function(e,t){var n=this.__data__;if(n instanceof eh){var r=n.__data__;if(!et||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new em(r)}return n.set(e,t),this.size=n.size,this};var eT=Y?function(e){return null==e?[]:function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[a++]=s)}return i}(Y(e=Object(e)),function(t){return G.call(e,t)})}:function(){return[]},eP=eg;function eR(e){if(null!=e){try{return L.call(e)}catch{}try{return e+""}catch{}}return""}function eC(e,t){return e===t||e!=e&&t!=t}(ee&&eP(new ee(new ArrayBuffer(1)))!=w||et&&eP(new et)!=p||en&&eP(en.resolve())!=m||er&&eP(new er)!=y||ea&&eP(new ea)!=g)&&(eP=function(e){var t=eg(e),n=t==h?e.constructor:void 0,r=n?eR(n):"";if(r)switch(r){case es:return w;case eo:return p;case eu:return m;case el:return y;case ec:return g}return t});var eO=eb(function(){return arguments}())?eb:function(e){return ej(e)&&z.call(e,"callee")&&!G.call(e,"callee")},eE=Array.isArray,eA=X||function(){return!1};function eI(e){if(!eq(e))return!1;var t=eg(e);return t==d||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eN(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function eq(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ej(e){return null!=e&&"object"==typeof e}var eD=N?function(e){return N(e)}:function(e){return ej(e)&&eN(e.length)&&!!S[eg(e)]};e.exports=function(e,t){return function e(t,n,r,a,i){return t===n||(null!=t&&null!=n&&(ej(t)||ej(n))?function(e,t,n,r,a,i){var d=eE(e),m=eE(t),g=d?o:eP(e),x=m?o:eP(t);g=g==s?h:g,x=x==s?h:x;var k=g==h,S=x==h,T=g==x;if(T&&eA(e)){if(!eA(t))return!1;d=!0,k=!1}if(T&&!k)return i||(i=new ey),d||eD(e)?ew(e,t,n,r,a,i):function(e,t,n,r,a,i,s){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!i(new K(e),new K(t)));case u:case l:case f:return eC(+e,+t);case c:return e.name==t.name&&e.message==t.message;case _:case v:return e==t+"";case p:var o=q;case y:var d=1&r;if(o||(o=j),e.size!=t.size&&!d)break;var h=s.get(e);if(h)return h==t;r|=2,s.set(e,t);var m=ew(o(e),o(t),r,a,i,s);return s.delete(e),m;case"[object Symbol]":if(ep)return ep.call(e)==ep.call(t)}return!1}(e,t,g,n,r,a,i);if(!(1&n)){var P=k&&z.call(e,"__wrapped__"),R=S&&z.call(t,"__wrapped__");if(P||R){var C=P?e.value():e,O=R?t.value():t;return i||(i=new ey),a(C,O,n,r,i)}}return!!T&&(i||(i=new ey),function(e,t,n,r,a,i){var s=1&n,o=ex(e),u=o.length;if(u!=ex(t).length&&!s)return!1;for(var l=u;l--;){var c=o[l];if(!(s?c in t:z.call(t,c)))return!1}var d=i.get(e);if(d&&i.get(t))return d==t;var p=!0;i.set(e,t),i.set(t,e);for(var f=s;++l<u;){var h=e[c=o[l]],m=t[c];if(r)var _=s?r(m,h,c,t,e,i):r(h,m,c,e,t,i);if(!(void 0===_?h===m||a(h,m,n,r,i):_)){p=!1;break}f||(f="constructor"==c)}if(p&&!f){var y=e.constructor,v=t.constructor;y!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v)&&(p=!1)}return i.delete(e),i.delete(t),p}(e,t,n,r,a,i))}(t,n,r,a,e,i):t!=t&&n!=n)}(e,t)}}(sV,sV.exports);var sB=sV.exports;let sW=sB&&sB.__esModule&&Object.prototype.hasOwnProperty.call(sB,"default")?sB.default:sB,sK=(e,t,n)=>{var r;let a=n.logger,i=n.subjects??iI(),s=new y,o=eT([i.walletData,i.sharedData,i.loggedInTimestamp]).pipe(ev(([e,t,n])=>({walletData:e,sharedData:t,loggedInTimestamp:n}))),u=e=>{let{walletData:t,sharedData:n,loggedInTimestamp:r}=e;t&&!sW(i.walletData.value,t)&&i.walletData.next(t),n&&i.sharedData.next(n),void 0!==r&&i.loggedInTimestamp.next(r)},l=()=>{sW(i.walletData.value,iA)||i.walletData.next(iA),i.sharedData.next({}),i.loggedInTimestamp.next("")};t.getData(e).map(e=>(e&&(null==a||a.debug("readFromStorage")),e)).andThen(e=>iU.fromPromise(iE.parseAsync(e),e=>e)).mapErr(()=>{null==a||a.debug("loadedCorruptedStateFromStorage"),l()}).map(e=>{if(e)return null==a||a.debug("initializeStateFromStorage"),u(s$(e,e=>(e.walletData.persona=e.walletData.persona??void 0,e)));null==a||a.debug("initializeStateFromDefault"),l()}),s.add(o.pipe(eD(n=>t.setData(e,s$(n,e=>{e.walletData.proofs=[]})).map(()=>{null==a||a.trace("writeToStorage",n)}))).subscribe()),s.add(o.pipe(eq(function(e,t){return 1<=t}),ej(),eZ(()=>{i.initialized.next(!0)})).subscribe());let c=()=>({walletData:i.walletData.value,sharedData:i.sharedData.value,loggedInTimestamp:i.loggedInTimestamp.value});return{setState:u,getState:c,walletData$:eT([i.initialized,i.walletData]).pipe((void 0===r&&(r=G),j(function(e,t){var n=null,a=null,i=null,s=function(){if(n){n.unsubscribe(),n=null;var e=a;a=null,t.next(e)}};function o(){var e=i+1,a=r.now();if(a<e){n=this.schedule(void 0,e-a),t.add(n);return}s()}e.subscribe(D(t,function(e){a=e,i=r.now(),n||(n=r.schedule(o,1),t.add(n))},function(){s(),t.complete()},void 0,function(){a=n=null}))})),eq(([e])=>e),ev(()=>i.walletData.value)),getWalletData:()=>i.walletData.value,state$:i.initialized.pipe(eq(e=>e),eD(()=>o)),patchState:e=>{u({...c(),...e})},reset:l,stateInitialized$:i.initialized.asObservable(),destroy:()=>{l(),s.unsubscribe()}}},sG=()=>({onConnect:new U,onDisconnect:new U,onUpdateSharedData:new U,connected:new M(1),requestItems:new z([]),onCancelRequestItem:new U,accounts:new z([]),onShowPopover:new U,status:new z("default"),loggedInTimestamp:new z(""),isMobile:new z(!1),isWalletLinked:new z(!1),isExtensionAvailable:new z(!1),fullWidth:new z(!1),activeTab:new z("sharing"),mode:new z("light"),theme:new z("radix-blue"),avatarUrl:new z(""),personaLabel:new z(""),personaData:new z([]),dAppName:new z(""),onLinkClick:new U}),sH=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(globalThis.navigator?globalThis.navigator.userAgent:""),sJ=e=>{n.e(4025).then(n.bind(n,34025));let t=e.subjects||sG(),r=e.logger,a=e.onConnect||(e=>{e()}),i=()=>document.querySelector("radix-connect-button"),s=new y;return s.add(eN(eE(document,"onRender"),em(i()).pipe(eq(e=>!!e))).pipe(ev(()=>i()),eq(e=>!!e),eD(e=>{null==r||r.debug("connectButtonDiscovered");let n=eE(e,"onConnect").pipe(eZ(()=>{a(n=>{e.isWalletLinked&&e.isExtensionAvailable&&t.onConnect.next(n)})})),i=eE(e,"onDisconnect").pipe(eZ(()=>{t.onDisconnect.next()})),s=eE(e,"onLinkClick").pipe(eZ(e=>{t.onLinkClick.next(e.detail)})),o=eE(e,"onDestroy").pipe(eZ(()=>{null==r||r.debug("connectButtonRemovedFromDOM")})),u=eE(e,"onCancelRequestItem").pipe(eZ(e=>{let n=e.detail.id;null==r||r.debug("onCancelRequestItem",{id:n}),t.onCancelRequestItem.next(n)})),l=eE(e,"onUpdateSharedData").pipe(eZ(()=>{null==r||r.debug("onUpdateSharedData"),t.onUpdateSharedData.next()})),c=eE(e,"onShowPopover").pipe(eZ(()=>{t.onShowPopover.next()})),d=t.status.pipe(eZ(t=>e.status=t)),p=t.mode.pipe(eZ(t=>e.mode=t)),f=t.connected.pipe(eZ(t=>{e.connected=t})),h=t.isMobile.pipe(eZ(t=>{e.isMobile=t})),m=t.isWalletLinked.pipe(eZ(t=>{e.isWalletLinked=t})),_=t.isExtensionAvailable.pipe(eZ(t=>{e.isExtensionAvailable=t})),y=t.loggedInTimestamp.pipe(eZ(t=>{e.loggedInTimestamp=t})),v=t.activeTab.pipe(eZ(t=>{e.activeTab=t})),g=t.requestItems.pipe(eZ(t=>{e.requestItems=t})),b=t.accounts.pipe(eZ(t=>{e.accounts=t})),w=t.personaData.pipe(eZ(t=>{e.personaData=t})),x=t.personaLabel.pipe(eZ(t=>{e.personaLabel=t})),k=t.dAppName.pipe(eZ(t=>{e.dAppName=t})),S=t.theme.pipe(eZ(t=>{e.theme=t}));return eN(n,d,S,p,f,g,y,h,v,m,_,i,u,b,w,x,o,l,c,k,s)})).subscribe()),{status$:t.status.asObservable(),onConnect$:t.onConnect.asObservable(),onDisconnect$:t.onDisconnect.asObservable(),onShowPopover$:t.onShowPopover.asObservable(),onUpdateSharedData$:t.onUpdateSharedData.asObservable(),onCancelRequestItem$:t.onCancelRequestItem.asObservable(),onLinkClick$:t.onLinkClick.asObservable(),setStatus:e=>t.status.next(e),setTheme:e=>t.theme.next(e),setMode:e=>t.mode.next(e),setActiveTab:e=>t.activeTab.next(e),setIsMobile:e=>t.isMobile.next(e),setIsWalletLinked:e=>t.isWalletLinked.next(e),setIsExtensionAvailable:e=>t.isExtensionAvailable.next(e),setLoggedInTimestamp:e=>t.loggedInTimestamp.next(e),setConnected:e=>t.connected.next(e),setRequestItems:e=>t.requestItems.next(e),setAccounts:e=>t.accounts.next(e),setPersonaData:e=>t.personaData.next(e),setPersonaLabel:e=>t.personaLabel.next(e),setDappName:e=>t.dAppName.next(e),disconnect:()=>{t.connected.next(!1),t.status.next("default")},destroy:()=>{s.unsubscribe()}}};var sY=Object.defineProperty,sX=(e,t,n)=>t in e?sY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sQ=(e,t,n)=>(sX(e,"symbol"!=typeof t?t+"":t,n),n);let s0="https://mainnet.radixdlt.com".replace(/\/+$/,"");class s1{constructor(e={}){this.configuration=e}set config(e){this.configuration=e}get basePath(){return null!=this.configuration.basePath?this.configuration.basePath:s0}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||function e(t,n=""){return Object.keys(t).map(r=>(function t(n,r,a=""){let i=a+(a.length?`[${n}]`:n);if(r instanceof Array){let e=r.map(e=>encodeURIComponent(String(e))).join(`&${encodeURIComponent(i)}=`);return`${encodeURIComponent(i)}=${e}`}if(r instanceof Set){let e=Array.from(r);return t(n,e,a)}return r instanceof Date?`${encodeURIComponent(i)}=${encodeURIComponent(r.toISOString())}`:r instanceof Object?e(r,i):`${encodeURIComponent(i)}=${encodeURIComponent(String(r))}`})(r,t[r],n)).filter(e=>e.length>0).join("&")}}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){let e=this.configuration.apiKey;if(e)return"function"==typeof e?e:()=>e}get accessToken(){let e=this.configuration.accessToken;if(e)return"function"==typeof e?e:async()=>e}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}}let s2=new s1;class s9{constructor(e=s2){sQ(this,"middleware"),sQ(this,"fetchApi",async(e,t)=>{let n,r={url:e,init:t};for(let e of this.middleware)e.pre&&(r=await e.pre({fetch:this.fetchApi,...r})||r);try{n=await (this.configuration.fetchApi||fetch)(r.url,r.init)}catch(e){for(let t of this.middleware)t.onError&&(n=await t.onError({fetch:this.fetchApi,url:r.url,init:r.init,error:e,response:n?n.clone():void 0})||n);if(void 0===n)throw e}for(let e of this.middleware)e.post&&(n=await e.post({fetch:this.fetchApi,url:r.url,init:r.init,response:n.clone()})||n);return n}),this.configuration=e,this.middleware=e.middleware}withMiddleware(...e){let t=this.clone();return t.middleware=t.middleware.concat(...e),t}withPreMiddleware(...e){let t=e.map(e=>({pre:e}));return this.withMiddleware(...t)}withPostMiddleware(...e){let t=e.map(e=>({post:e}));return this.withMiddleware(...t)}async request(e,t){let{url:n,init:r}=await this.createFetchParams(e,t),a=await this.fetchApi(n,r);if(a&&a.status>=200&&a.status<300)return a;throw await s4.from(a)}async createFetchParams(e,t){var n,r;let a=this.configuration.basePath+e.path;void 0!==e.query&&0!==Object.keys(e.query).length&&(a+="?"+this.configuration.queryParamsStringify(e.query));let i=Object.assign({},this.configuration.headers,e.headers);Object.keys(i).forEach(e=>void 0===i[e]?delete i[e]:{});let s={method:e.method,headers:i,body:e.body,credentials:this.configuration.credentials},o={...s,...await ("function"==typeof t?t:async()=>t)({init:s,context:e})},u={...o,body:(n=o.body,"u">typeof FormData&&n instanceof FormData||o.body instanceof URLSearchParams||(r=o.body,"u">typeof Blob&&r instanceof Blob))?o.body:JSON.stringify(o.body)};return{url:a,init:u}}clone(){let e=this.constructor,t=new e(this.configuration);return t.middleware=this.middleware.slice(),t}}class s4 extends Error{constructor(e,t,n){super(n?JSON.stringify(n):"Unknown error occurred"),sQ(this,"name","ResponseError"),this.fetchResponse=e,this.status=t,this.errorResponse=n}static async from(e){let t=e.status;try{let n=await e.json();return new s4(e,t,n)}catch{return new s4(e,t,void 0)}}}class s3 extends Error{constructor(e,t){super(t),sQ(this,"name","RequiredError"),this.field=e}}function s5(e,t){return null!=e[t]}class s6{constructor(e,t=e=>e){this.raw=e,this.transformer=t}async value(){return this.transformer(await this.raw.json())}}function s8(e){if(void 0!==e)return null===e?null:{state_version:e.state_version,timestamp:void 0===e.timestamp?void 0:null===e.timestamp?null:e.timestamp.toISOString(),epoch:e.epoch,round:e.round}}function s7(e){return null==e?e:{entity_address:e.entity_address,resource_address:e.resource_address,balance_change:e.balance_change}}function oe(e){return null==e?e:{type:e.type,entity_address:e.entity_address,resource_address:e.resource_address,balance_change:e.balance_change}}function ot(e){return null==e?e:{entity_address:e.entity_address,resource_address:e.resource_address,added:e.added,removed:e.removed}}function on(e){return null==e?e:{key:oa(e.key),value:oa(e.value)}}function or(e){if(void 0!==e)return null===e?null:{key:oi(e.key),value:oi(e.value)}}function oa(e){return function(e,t){var n,r,a,i;if(null==e)return e;switch(e.kind){case"Array":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,element_kind:e.element_kind,element_type_name:s5(e,"element_type_name")?e.element_type_name:void 0,elements:e.elements.map(oa)},kind:"Array"};case"Bool":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"Bool"};case"Bytes":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,element_kind:e.element_kind,element_type_name:s5(e,"element_type_name")?e.element_type_name:void 0,hex:e.hex},kind:"Bytes"};case"Decimal":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"Decimal"};case"Enum":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,variant_id:e.variant_id,variant_name:s5(e,"variant_name")?e.variant_name:void 0,fields:e.fields.map(oa)},kind:"Enum"};case"I128":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"I128"};case"I16":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"I16"};case"I32":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"I32"};case"I64":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"I64"};case"I8":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"I8"};case"Map":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,key_kind:e.key_kind,key_type_name:s5(e,"key_type_name")?e.key_type_name:void 0,value_kind:e.value_kind,value_type_name:s5(e,"value_type_name")?e.value_type_name:void 0,entries:e.entries.map(on)},kind:"Map"};case"NonFungibleLocalId":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"NonFungibleLocalId"};case"Own":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"Own"};case"PreciseDecimal":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"PreciseDecimal"};case"Reference":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"Reference"};case"String":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"String"};case"Tuple":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,fields:e.fields.map(oa)},kind:"Tuple"};case"U128":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"U128"};case"U16":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"U16"};case"U32":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"U32"};case"U64":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"U64"};case"U8":return{...null==e?e:{kind:e.kind,type_name:s5(e,"type_name")?e.type_name:void 0,field_name:s5(e,"field_name")?e.field_name:void 0,value:e.value},kind:"U8"};default:throw Error(`No variant of ProgrammaticScryptoSborValue exists with 'kind=${e.kind}'`)}}(e)}function oi(e){if(void 0!==e){if(null===e)return null;switch(e.kind){case"Array":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,element_kind:e.element_kind,element_type_name:e.element_type_name,elements:e.elements.map(oi)}}(e);case"Bool":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"Bytes":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,element_kind:e.element_kind,element_type_name:e.element_type_name,hex:e.hex}}(e);case"Decimal":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"Enum":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,variant_id:e.variant_id,variant_name:e.variant_name,fields:e.fields.map(oi)}}(e);case"I128":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"I16":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"I32":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"I64":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"I8":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"Map":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,key_kind:e.key_kind,key_type_name:e.key_type_name,value_kind:e.value_kind,value_type_name:e.value_type_name,entries:e.entries.map(or)}}(e);case"NonFungibleLocalId":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"Own":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"PreciseDecimal":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"Reference":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"String":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"Tuple":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,fields:e.fields.map(oi)}}(e);case"U128":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"U16":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"U32":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"U64":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);case"U8":return function(e){if(void 0!==e)return null===e?null:{kind:e.kind,type_name:e.type_name,field_name:e.field_name,value:e.value}}(e);default:throw Error(`No variant of ProgrammaticScryptoSborValue exists with 'kind=${e.kind}'`)}}}function os(e){return null==e?e:{name:e.name,emitter:e.emitter,data:oa(e.data)}}let oo={Unknown:"Unknown",CommittedSuccess:"CommittedSuccess",CommittedFailure:"CommittedFailure",Pending:"Pending",Rejected:"Rejected"};function ou(e){var t,n,r,a;return null==e?e:{state_version:e.state_version,epoch:e.epoch,round:e.round,round_timestamp:e.round_timestamp,transaction_status:e.transaction_status,payload_hash:s5(e,"payload_hash")?e.payload_hash:void 0,intent_hash:s5(e,"intent_hash")?e.intent_hash:void 0,fee_paid:s5(e,"fee_paid")?e.fee_paid:void 0,affected_global_entities:s5(e,"affected_global_entities")?e.affected_global_entities:void 0,confirmed_at:s5(e,"confirmed_at")?null===e.confirmed_at?null:new Date(e.confirmed_at):void 0,error_message:s5(e,"error_message")?e.error_message:void 0,raw_hex:s5(e,"raw_hex")?e.raw_hex:void 0,receipt:s5(e,"receipt")?null==(n=e.receipt)?n:{status:s5(n,"status")?n.status:void 0,fee_summary:s5(n,"fee_summary")?n.fee_summary:void 0,costing_parameters:s5(n,"costing_parameters")?n.costing_parameters:void 0,fee_destination:s5(n,"fee_destination")?n.fee_destination:void 0,fee_source:s5(n,"fee_source")?n.fee_source:void 0,state_updates:s5(n,"state_updates")?n.state_updates:void 0,next_epoch:s5(n,"next_epoch")?n.next_epoch:void 0,output:s5(n,"output")?n.output:void 0,events:s5(n,"events")?n.events.map(os):void 0,error_message:s5(n,"error_message")?n.error_message:void 0}:void 0,message:s5(e,"message")?e.message:void 0,balance_changes:s5(e,"balance_changes")?null==(a=e.balance_changes)?a:{fungible_fee_balance_changes:a.fungible_fee_balance_changes.map(oe),fungible_balance_changes:a.fungible_balance_changes.map(s7),non_fungible_balance_changes:a.non_fungible_balance_changes.map(ot)}:void 0}}function ol(e){return null==e?e:{name:e.name,module:e.module}}function oc(e){var t;return null==e?e:{role_key:ol(e.role_key),assignment:null==(t=e.assignment)?t:{resolution:t.resolution,explicit_rule:s5(t,"explicit_rule")?t.explicit_rule:void 0},updater_roles:s5(e,"updater_roles")?e.updater_roles.map(ol):void 0}}function od(e,t){return null==e?e:{owner:e.owner,entries:e.entries.map(oc)}}function op(e){return null==e?e:{resource_address:e.resource_address,non_fungible_id:e.non_fungible_id}}function of(e){return function(e,t){if(null==e)return e;switch(e.key_type){case"EcdsaSecp256k1":return{...null==e?e:{key_type:e.key_type,key_hex:e.key_hex},key_type:"EcdsaSecp256k1"};case"EddsaEd25519":return{...null==e?e:{key_type:e.key_type,key_hex:e.key_hex},key_type:"EddsaEd25519"};default:throw Error(`No variant of PublicKey exists with 'key_type=${e.key_type}'`)}}(e)}function oh(e){if(void 0!==e){if(null===e)return null;switch(e.key_type){case"EcdsaSecp256k1":return function(e){if(void 0!==e)return null===e?null:{key_type:e.key_type,key_hex:e.key_hex}}(e);case"EddsaEd25519":return function(e){if(void 0!==e)return null===e?null:{key_type:e.key_type,key_hex:e.key_hex}}(e);default:throw Error(`No variant of PublicKey exists with 'key_type=${e.key_type}'`)}}}function om(e){return function(e,t){if(null==e)return e;switch(e.key_hash_type){case"EcdsaSecp256k1":return{...null==e?e:{key_hash_type:e.key_hash_type,hash_hex:e.hash_hex},key_hash_type:"EcdsaSecp256k1"};case"EddsaEd25519":return{...null==e?e:{key_hash_type:e.key_hash_type,hash_hex:e.hash_hex},key_hash_type:"EddsaEd25519"};default:throw Error(`No variant of PublicKeyHash exists with 'key_hash_type=${e.key_hash_type}'`)}}(e)}function o_(e){var t;return null==e?e:{key:e.key,value:null==(t=e.value)?t:{raw_hex:t.raw_hex,programmatic_json:oa(t.programmatic_json),typed:function(e,t){if(null==e)return e;switch(e.type){case"Bool":return{...null==e?e:{type:e.type,value:e.value},type:"Bool"};case"BoolArray":return{...null==e?e:{type:e.type,values:e.values},type:"BoolArray"};case"Decimal":return{...null==e?e:{type:e.type,value:e.value},type:"Decimal"};case"DecimalArray":return{...null==e?e:{type:e.type,values:e.values},type:"DecimalArray"};case"GlobalAddress":return{...null==e?e:{type:e.type,value:e.value},type:"GlobalAddress"};case"GlobalAddressArray":return{...null==e?e:{type:e.type,values:e.values},type:"GlobalAddressArray"};case"I32":return{...null==e?e:{type:e.type,value:e.value},type:"I32"};case"I32Array":return{...null==e?e:{type:e.type,values:e.values},type:"I32Array"};case"I64":return{...null==e?e:{type:e.type,value:e.value},type:"I64"};case"I64Array":return{...null==e?e:{type:e.type,values:e.values},type:"I64Array"};case"Instant":return{...null==e?e:{type:e.type,value:e.value},type:"Instant"};case"InstantArray":return{...null==e?e:{type:e.type,values:e.values},type:"InstantArray"};case"NonFungibleGlobalId":return{...null==e?e:{type:e.type,resource_address:e.resource_address,non_fungible_id:e.non_fungible_id},type:"NonFungibleGlobalId"};case"NonFungibleGlobalIdArray":return{...null==e?e:{type:e.type,values:e.values.map(op)},type:"NonFungibleGlobalIdArray"};case"NonFungibleLocalId":return{...null==e?e:{type:e.type,value:e.value},type:"NonFungibleLocalId"};case"NonFungibleLocalIdArray":return{...null==e?e:{type:e.type,values:e.values},type:"NonFungibleLocalIdArray"};case"Origin":return{...null==e?e:{type:e.type,value:e.value},type:"Origin"};case"OriginArray":return{...null==e?e:{type:e.type,values:e.values},type:"OriginArray"};case"PublicKey":return{...null==e?e:{type:e.type,value:of(e.value)},type:"PublicKey"};case"PublicKeyArray":return{...null==e?e:{type:e.type,values:e.values.map(of)},type:"PublicKeyArray"};case"PublicKeyHash":return{...null==e?e:{type:e.type,value:om(e.value)},type:"PublicKeyHash"};case"PublicKeyHashArray":return{...null==e?e:{type:e.type,values:e.values.map(om)},type:"PublicKeyHashArray"};case"String":return{...null==e?e:{type:e.type,value:e.value},type:"String"};case"StringArray":return{...null==e?e:{type:e.type,values:e.values},type:"StringArray"};case"U32":return{...null==e?e:{type:e.type,value:e.value},type:"U32"};case"U32Array":return{...null==e?e:{type:e.type,values:e.values},type:"U32Array"};case"U64":return{...null==e?e:{type:e.type,value:e.value},type:"U64"};case"U64Array":return{...null==e?e:{type:e.type,values:e.values},type:"U64Array"};case"U8":return{...null==e?e:{type:e.type,value:e.value},type:"U8"};case"U8Array":return{...null==e?e:{type:e.type,value_hex:e.value_hex},type:"U8Array"};case"Url":return{...null==e?e:{type:e.type,value:e.value},type:"Url"};case"UrlArray":return{...null==e?e:{type:e.type,values:e.values},type:"UrlArray"};default:throw Error(`No variant of MetadataTypedValue exists with 'type=${e.type}'`)}}(t.typed)},is_locked:e.is_locked,last_updated_at_state_version:e.last_updated_at_state_version}}function oy(e,t){return null==e?e:{total_count:s5(e,"total_count")?e.total_count:void 0,next_cursor:s5(e,"next_cursor")?e.next_cursor:void 0,items:e.items.map(o_)}}function ov(e){return null==e?e:{vault_address:e.vault_address,amount:e.amount,last_updated_at_state_version:e.last_updated_at_state_version}}function og(e){return function(e,t){var n;if(null==e)return e;switch(e.aggregation_level){case"Global":return{...null==e?e:{aggregation_level:e.aggregation_level,resource_address:e.resource_address,explicit_metadata:s5(e,"explicit_metadata")?oy(e.explicit_metadata):void 0,amount:e.amount,last_updated_at_state_version:e.last_updated_at_state_version},aggregation_level:"Global"};case"Vault":return{...null==e?e:{aggregation_level:e.aggregation_level,resource_address:e.resource_address,explicit_metadata:s5(e,"explicit_metadata")?oy(e.explicit_metadata):void 0,vaults:null==(n=e.vaults)?n:{total_count:s5(n,"total_count")?n.total_count:void 0,next_cursor:s5(n,"next_cursor")?n.next_cursor:void 0,items:n.items.map(ov)}},aggregation_level:"Vault"};default:throw Error(`No variant of FungibleResourcesCollectionItem exists with 'aggregation_level=${e.aggregation_level}'`)}}(e)}let ob={Global:"Global",Vault:"Vault"};function ow(e,t){return null==e?e:{network:e.network,state_version:e.state_version,proposer_round_timestamp:e.proposer_round_timestamp,epoch:e.epoch,round:e.round}}function ox(e){return null==e?e:{total_count:e.total_count,next_cursor:s5(e,"next_cursor")?e.next_cursor:void 0,items:s5(e,"items")?e.items:void 0,vault_address:e.vault_address,last_updated_at_state_version:e.last_updated_at_state_version}}function ok(e){return function(e,t){var n;if(null==e)return e;switch(e.aggregation_level){case"Global":return{...null==e?e:{aggregation_level:e.aggregation_level,resource_address:e.resource_address,explicit_metadata:s5(e,"explicit_metadata")?oy(e.explicit_metadata):void 0,amount:e.amount,last_updated_at_state_version:e.last_updated_at_state_version},aggregation_level:"Global"};case"Vault":return{...null==e?e:{aggregation_level:e.aggregation_level,resource_address:e.resource_address,explicit_metadata:s5(e,"explicit_metadata")?oy(e.explicit_metadata):void 0,vaults:null==(n=e.vaults)?n:{total_count:s5(n,"total_count")?n.total_count:void 0,next_cursor:s5(n,"next_cursor")?n.next_cursor:void 0,items:n.items.map(ox)}},aggregation_level:"Vault"};default:throw Error(`No variant of NonFungibleResourcesCollectionItem exists with 'aggregation_level=${e.aggregation_level}'`)}}(e)}function oS(e,t){return null==e?e:{raw_hex:e.raw_hex,programmatic_json:oa(e.programmatic_json)}}function oT(e){return null==e?e:{name:e.name,version:e.version,definition:e.definition,dependant_entities:s5(e,"dependant_entities")?e.dependant_entities:void 0,auth_template:s5(e,"auth_template")?e.auth_template:void 0,auth_template_is_locked:s5(e,"auth_template_is_locked")?e.auth_template_is_locked:void 0,royalty_config:s5(e,"royalty_config")?e.royalty_config:void 0,royalty_config_is_locked:s5(e,"royalty_config_is_locked")?e.royalty_config_is_locked:void 0}}function oP(e){return null==e?e:{schema_hash_hex:e.schema_hash_hex,schema_hex:e.schema_hex}}function oR(e){var t,n,r;return null==e?e:{address:e.address,fungible_resources:s5(e,"fungible_resources")?null==(t=e.fungible_resources)?t:{total_count:s5(t,"total_count")?t.total_count:void 0,next_cursor:s5(t,"next_cursor")?t.next_cursor:void 0,items:t.items.map(og)}:void 0,non_fungible_resources:s5(e,"non_fungible_resources")?null==(n=e.non_fungible_resources)?n:{total_count:s5(n,"total_count")?n.total_count:void 0,next_cursor:s5(n,"next_cursor")?n.next_cursor:void 0,items:n.items.map(ok)}:void 0,ancestor_identities:s5(e,"ancestor_identities")?null==(r=e.ancestor_identities)?r:{parent_address:s5(r,"parent_address")?r.parent_address:void 0,owner_address:s5(r,"owner_address")?r.owner_address:void 0,global_address:s5(r,"global_address")?r.global_address:void 0}:void 0,metadata:oy(e.metadata),explicit_metadata:s5(e,"explicit_metadata")?oy(e.explicit_metadata):void 0,details:s5(e,"details")?function(e,t){var n,r,a;if(null==e)return e;switch(e.type){case"Component":return{...null==e?e:{type:e.type,package_address:s5(e,"package_address")?e.package_address:void 0,blueprint_name:e.blueprint_name,blueprint_version:e.blueprint_version,state:s5(e,"state")?e.state:void 0,role_assignments:s5(e,"role_assignments")?od(e.role_assignments):void 0,royalty_vault_balance:s5(e,"royalty_vault_balance")?e.royalty_vault_balance:void 0},type:"Component"};case"FungibleResource":return{...null==e?e:{type:e.type,role_assignments:od(e.role_assignments),divisibility:e.divisibility,total_supply:e.total_supply,total_minted:e.total_minted,total_burned:e.total_burned},type:"FungibleResource"};case"FungibleVault":return{...null==e?e:{type:e.type,resource_address:e.resource_address,balance:ov(e.balance)},type:"FungibleVault"};case"NonFungibleResource":return{...null==e?e:{type:e.type,role_assignments:od(e.role_assignments),non_fungible_id_type:e.non_fungible_id_type,total_supply:e.total_supply,total_minted:e.total_minted,total_burned:e.total_burned},type:"NonFungibleResource"};case"NonFungibleVault":return{...null==e?e:{type:e.type,resource_address:e.resource_address,balance:ox(e.balance)},type:"NonFungibleVault"};case"Package":return{...null==e?e:{type:e.type,vm_type:e.vm_type,code_hash_hex:e.code_hash_hex,code_hex:e.code_hex,royalty_vault_balance:s5(e,"royalty_vault_balance")?e.royalty_vault_balance:void 0,blueprints:s5(e,"blueprints")?null==(r=e.blueprints)?r:{total_count:s5(r,"total_count")?r.total_count:void 0,next_cursor:s5(r,"next_cursor")?r.next_cursor:void 0,items:r.items.map(oT)}:void 0,schemas:s5(e,"schemas")?null==(a=e.schemas)?a:{total_count:s5(a,"total_count")?a.total_count:void 0,next_cursor:s5(a,"next_cursor")?a.next_cursor:void 0,items:a.items.map(oP)}:void 0},type:"Package"};default:throw Error(`No variant of StateEntityDetailsResponseItemDetails exists with 'type=${e.type}'`)}}(e.details):void 0}}function oC(e){if(void 0!==e)return null===e?null:{key_hex:e.key_hex,key_json:oi(e.key_json)}}function oO(e){return null==e?e:{key:oS(e.key),value:oS(e.value),last_updated_at_state_version:e.last_updated_at_state_version,is_locked:e.is_locked}}function oE(e){return null==e?e:{is_burned:e.is_burned,non_fungible_id:e.non_fungible_id,data:s5(e,"data")?oS(e.data):void 0,last_updated_at_state_version:e.last_updated_at_state_version}}function oA(e){return null==e?e:{non_fungible_id:e.non_fungible_id,owning_vault_address:s5(e,"owning_vault_address")?e.owning_vault_address:void 0,is_burned:e.is_burned,last_updated_at_state_version:e.last_updated_at_state_version}}function oI(e,t){return null==e?e:{balance:e.balance,last_changed_at_state_version:e.last_changed_at_state_version,address:e.address}}function oN(e){var t,n,r,a;return null==e?e:{address:e.address,stake_vault:oI(e.stake_vault),pending_xrd_withdraw_vault:oI(e.pending_xrd_withdraw_vault),locked_owner_stake_unit_vault:oI(e.locked_owner_stake_unit_vault),pending_owner_stake_unit_unlock_vault:oI(e.pending_owner_stake_unit_unlock_vault),state:e.state,active_in_epoch:s5(e,"active_in_epoch")?null==(t=e.active_in_epoch)?t:{stake:t.stake,stake_percentage:t.stake_percentage,key:of(t.key)}:void 0,metadata:oy(e.metadata),effective_fee_factor:null==(n=e.effective_fee_factor)?n:{current:null==(r=n.current)?r:{fee_factor:r.fee_factor},pending:s5(n,"pending")?null==(a=n.pending)?a:{fee_factor:a.fee_factor,effective_at_epoch:a.effective_at_epoch}:void 0}}}function oq(e){if(void 0!==e)return null===e?null:{event:e.event,emitter_address:e.emitter_address,resource_address:e.resource_address}}function oj(e){if(void 0!==e)return null===e?null:{raw_hex:e.raw_hex,receipt_state_changes:e.receipt_state_changes,receipt_fee_summary:e.receipt_fee_summary,receipt_fee_source:e.receipt_fee_source,receipt_fee_destination:e.receipt_fee_destination,receipt_costing_parameters:e.receipt_costing_parameters,receipt_events:e.receipt_events,receipt_output:e.receipt_output,affected_global_entities:e.affected_global_entities,balance_changes:e.balance_changes}}function oD(e){return null==e?e:{level:e.level,message:e.message}}function oZ(e){var t;return null==e?e:{payload_hash:e.payload_hash,status:e.status,payload_status:s5(e,"payload_status")?e.payload_status:void 0,payload_status_description:s5(e,"payload_status_description")?e.payload_status_description:void 0,error_message:s5(e,"error_message")?e.error_message:void 0,latest_error_message:s5(e,"latest_error_message")?e.latest_error_message:void 0,handling_status:s5(e,"handling_status")?e.handling_status:void 0,handling_status_reason:s5(e,"handling_status_reason")?e.handling_status_reason:void 0,submission_error:s5(e,"submission_error")?e.submission_error:void 0}}function oF(e){return null==e?e:{address:e.address,proposals_made:s5(e,"proposals_made")?e.proposals_made:void 0,proposals_missed:s5(e,"proposals_missed")?e.proposals_missed:void 0,epochs_active_in:e.epochs_active_in}}class oU extends s9{async entityFungibleResourceVaultPageRaw(e,t){if(null===e.stateEntityFungibleResourceVaultsPageRequest||void 0===e.stateEntityFungibleResourceVaultsPageRequest)throw new s3("stateEntityFungibleResourceVaultsPageRequest","Required parameter requestParameters.stateEntityFungibleResourceVaultsPageRequest was null or undefined when calling entityFungibleResourceVaultPage.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/state/entity/page/fungible-vaults/",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),cursor:e.cursor,limit_per_page:e.limit_per_page,address:e.address,resource_address:e.resource_address}}(e.stateEntityFungibleResourceVaultsPageRequest)},t);return new s6(r,e=>null==e?e:{ledger_state:ow(e.ledger_state),total_count:s5(e,"total_count")?e.total_count:void 0,next_cursor:s5(e,"next_cursor")?e.next_cursor:void 0,items:e.items.map(ov),address:e.address,resource_address:e.resource_address})}async entityFungibleResourceVaultPage(e,t){return await (await this.entityFungibleResourceVaultPageRaw(e,t)).value()}async entityFungiblesPageRaw(e,t){if(null===e.stateEntityFungiblesPageRequest||void 0===e.stateEntityFungiblesPageRequest)throw new s3("stateEntityFungiblesPageRequest","Required parameter requestParameters.stateEntityFungiblesPageRequest was null or undefined when calling entityFungiblesPage.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/state/entity/page/fungibles/",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),cursor:e.cursor,limit_per_page:e.limit_per_page,address:e.address,aggregation_level:e.aggregation_level,opt_ins:function(e){if(void 0!==e)return null===e?null:{explicit_metadata:e.explicit_metadata}}(e.opt_ins)}}(e.stateEntityFungiblesPageRequest)},t);return new s6(r,e=>null==e?e:{ledger_state:ow(e.ledger_state),total_count:s5(e,"total_count")?e.total_count:void 0,next_cursor:s5(e,"next_cursor")?e.next_cursor:void 0,items:e.items.map(og),address:e.address})}async entityFungiblesPage(e,t){return await (await this.entityFungiblesPageRaw(e,t)).value()}async entityMetadataPageRaw(e,t){if(null===e.stateEntityMetadataPageRequest||void 0===e.stateEntityMetadataPageRequest)throw new s3("stateEntityMetadataPageRequest","Required parameter requestParameters.stateEntityMetadataPageRequest was null or undefined when calling entityMetadataPage.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/state/entity/page/metadata",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),cursor:e.cursor,limit_per_page:e.limit_per_page,address:e.address}}(e.stateEntityMetadataPageRequest)},t);return new s6(r,e=>null==e?e:{ledger_state:ow(e.ledger_state),total_count:s5(e,"total_count")?e.total_count:void 0,next_cursor:s5(e,"next_cursor")?e.next_cursor:void 0,items:e.items.map(o_),address:e.address})}async entityMetadataPage(e,t){return await (await this.entityMetadataPageRaw(e,t)).value()}async entityNonFungibleIdsPageRaw(e,t){if(null===e.stateEntityNonFungibleIdsPageRequest||void 0===e.stateEntityNonFungibleIdsPageRequest)throw new s3("stateEntityNonFungibleIdsPageRequest","Required parameter requestParameters.stateEntityNonFungibleIdsPageRequest was null or undefined when calling entityNonFungibleIdsPage.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/state/entity/page/non-fungible-vault/ids",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),cursor:e.cursor,limit_per_page:e.limit_per_page,address:e.address,vault_address:e.vault_address,resource_address:e.resource_address}}(e.stateEntityNonFungibleIdsPageRequest)},t);return new s6(r,e=>null==e?e:{ledger_state:ow(e.ledger_state),total_count:s5(e,"total_count")?e.total_count:void 0,next_cursor:s5(e,"next_cursor")?e.next_cursor:void 0,items:e.items,address:e.address,resource_address:e.resource_address})}async entityNonFungibleIdsPage(e,t){return await (await this.entityNonFungibleIdsPageRaw(e,t)).value()}async entityNonFungibleResourceVaultPageRaw(e,t){if(null===e.stateEntityNonFungibleResourceVaultsPageRequest||void 0===e.stateEntityNonFungibleResourceVaultsPageRequest)throw new s3("stateEntityNonFungibleResourceVaultsPageRequest","Required parameter requestParameters.stateEntityNonFungibleResourceVaultsPageRequest was null or undefined when calling entityNonFungibleResourceVaultPage.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/state/entity/page/non-fungible-vaults/",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),cursor:e.cursor,limit_per_page:e.limit_per_page,address:e.address,resource_address:e.resource_address,opt_ins:function(e){if(void 0!==e)return null===e?null:{non_fungible_include_nfids:e.non_fungible_include_nfids}}(e.opt_ins)}}(e.stateEntityNonFungibleResourceVaultsPageRequest)},t);return new s6(r,e=>null==e?e:{ledger_state:ow(e.ledger_state),total_count:s5(e,"total_count")?e.total_count:void 0,next_cursor:s5(e,"next_cursor")?e.next_cursor:void 0,items:e.items.map(ox),address:e.address,resource_address:e.resource_address})}async entityNonFungibleResourceVaultPage(e,t){return await (await this.entityNonFungibleResourceVaultPageRaw(e,t)).value()}async entityNonFungiblesPageRaw(e,t){if(null===e.stateEntityNonFungiblesPageRequest||void 0===e.stateEntityNonFungiblesPageRequest)throw new s3("stateEntityNonFungiblesPageRequest","Required parameter requestParameters.stateEntityNonFungiblesPageRequest was null or undefined when calling entityNonFungiblesPage.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/state/entity/page/non-fungibles/",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),cursor:e.cursor,limit_per_page:e.limit_per_page,address:e.address,aggregation_level:e.aggregation_level,opt_ins:function(e){if(void 0!==e)return null===e?null:{non_fungible_include_nfids:e.non_fungible_include_nfids,explicit_metadata:e.explicit_metadata}}(e.opt_ins)}}(e.stateEntityNonFungiblesPageRequest)},t);return new s6(r,e=>null==e?e:{ledger_state:ow(e.ledger_state),total_count:s5(e,"total_count")?e.total_count:void 0,next_cursor:s5(e,"next_cursor")?e.next_cursor:void 0,items:e.items.map(ok),address:e.address})}async entityNonFungiblesPage(e,t){return await (await this.entityNonFungiblesPageRaw(e,t)).value()}async keyValueStoreDataRaw(e,t){if(null===e.stateKeyValueStoreDataRequest||void 0===e.stateKeyValueStoreDataRequest)throw new s3("stateKeyValueStoreDataRequest","Required parameter requestParameters.stateKeyValueStoreDataRequest was null or undefined when calling keyValueStoreData.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/state/key-value-store/data",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),key_value_store_address:e.key_value_store_address,keys:e.keys.map(oC)}}(e.stateKeyValueStoreDataRequest)},t);return new s6(r,e=>null==e?e:{ledger_state:ow(e.ledger_state),key_value_store_address:e.key_value_store_address,entries:e.entries.map(oO)})}async keyValueStoreData(e,t){return await (await this.keyValueStoreDataRaw(e,t)).value()}async nonFungibleDataRaw(e,t){if(null===e.stateNonFungibleDataRequest||void 0===e.stateNonFungibleDataRequest)throw new s3("stateNonFungibleDataRequest","Required parameter requestParameters.stateNonFungibleDataRequest was null or undefined when calling nonFungibleData.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/state/non-fungible/data",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),resource_address:e.resource_address,non_fungible_ids:e.non_fungible_ids}}(e.stateNonFungibleDataRequest)},t);return new s6(r,e=>{var t;return null==e?e:{ledger_state:ow(e.ledger_state),resource_address:e.resource_address,non_fungible_id_type:e.non_fungible_id_type,non_fungible_ids:e.non_fungible_ids.map(oE)}})}async nonFungibleData(e,t){return await (await this.nonFungibleDataRaw(e,t)).value()}async nonFungibleIdsRaw(e,t){if(null===e.stateNonFungibleIdsRequest||void 0===e.stateNonFungibleIdsRequest)throw new s3("stateNonFungibleIdsRequest","Required parameter requestParameters.stateNonFungibleIdsRequest was null or undefined when calling nonFungibleIds.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/state/non-fungible/ids",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),cursor:e.cursor,limit_per_page:e.limit_per_page,resource_address:e.resource_address}}(e.stateNonFungibleIdsRequest)},t);return new s6(r,e=>{var t;return null==e?e:{ledger_state:ow(e.ledger_state),resource_address:e.resource_address,non_fungible_ids:null==(t=e.non_fungible_ids)?t:{total_count:s5(t,"total_count")?t.total_count:void 0,next_cursor:s5(t,"next_cursor")?t.next_cursor:void 0,items:t.items}}})}async nonFungibleIds(e,t){return await (await this.nonFungibleIdsRaw(e,t)).value()}async nonFungibleLocationRaw(e,t){if(null===e.stateNonFungibleLocationRequest||void 0===e.stateNonFungibleLocationRequest)throw new s3("stateNonFungibleLocationRequest","Required parameter requestParameters.stateNonFungibleLocationRequest was null or undefined when calling nonFungibleLocation.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/state/non-fungible/location",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),resource_address:e.resource_address,non_fungible_ids:e.non_fungible_ids}}(e.stateNonFungibleLocationRequest)},t);return new s6(r,e=>null==e?e:{ledger_state:ow(e.ledger_state),resource_address:e.resource_address,non_fungible_ids:e.non_fungible_ids.map(oA)})}async nonFungibleLocation(e,t){return await (await this.nonFungibleLocationRaw(e,t)).value()}async stateEntityDetailsRaw(e,t){if(null===e.stateEntityDetailsRequest||void 0===e.stateEntityDetailsRequest)throw new s3("stateEntityDetailsRequest","Required parameter requestParameters.stateEntityDetailsRequest was null or undefined when calling stateEntityDetails.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/state/entity/details",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),opt_ins:function(e){if(void 0!==e)return null===e?null:{ancestor_identities:e.ancestor_identities,component_royalty_vault_balance:e.component_royalty_vault_balance,package_royalty_vault_balance:e.package_royalty_vault_balance,non_fungible_include_nfids:e.non_fungible_include_nfids,explicit_metadata:e.explicit_metadata}}(e.opt_ins),addresses:e.addresses,aggregation_level:e.aggregation_level}}(e.stateEntityDetailsRequest)},t);return new s6(r,e=>null==e?e:{ledger_state:ow(e.ledger_state),items:e.items.map(oR)})}async stateEntityDetails(e,t){return await (await this.stateEntityDetailsRaw(e,t)).value()}async stateValidatorsListRaw(e,t){if(null===e.stateValidatorsListRequest||void 0===e.stateValidatorsListRequest)throw new s3("stateValidatorsListRequest","Required parameter requestParameters.stateValidatorsListRequest was null or undefined when calling stateValidatorsList.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/state/validators/list",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),cursor:e.cursor}}(e.stateValidatorsListRequest)},t);return new s6(r,e=>{var t;return null==e?e:{ledger_state:ow(e.ledger_state),validators:null==(t=e.validators)?t:{total_count:s5(t,"total_count")?t.total_count:void 0,next_cursor:s5(t,"next_cursor")?t.next_cursor:void 0,items:t.items.map(oN)}}})}async stateValidatorsList(e,t){return await (await this.stateValidatorsListRaw(e,t)).value()}}class oL extends s9{async validatorsUptimeRaw(e,t){if(null===e.validatorsUptimeRequest||void 0===e.validatorsUptimeRequest)throw new s3("validatorsUptimeRequest","Required parameter requestParameters.validatorsUptimeRequest was null or undefined when calling validatorsUptime.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/statistics/validators/uptime",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),from_ledger_state:s8(e.from_ledger_state),validator_addresses:e.validator_addresses}}(e.validatorsUptimeRequest)},t);return new s6(r,e=>{var t;return null==e?e:{ledger_state:ow(e.ledger_state),validators:null==(t=e.validators)?t:{items:t.items.map(oF)}}})}async validatorsUptime(e,t){return await (await this.validatorsUptimeRaw(e,t)).value()}}class oz extends s9{async gatewayStatusRaw(e){let t=await this.request({path:"/status/gateway-status",method:"POST",headers:{},query:{}},e);return new s6(t,e=>{var t;return null==e?e:{ledger_state:ow(e.ledger_state),release_info:null==(t=e.release_info)?t:{release_version:t.release_version,open_api_schema_version:t.open_api_schema_version,image_tag:t.image_tag}}})}async gatewayStatus(e){return await (await this.gatewayStatusRaw(e)).value()}async networkConfigurationRaw(e){let t=await this.request({path:"/status/network-configuration",method:"POST",headers:{},query:{}},e);return new s6(t,e=>{var t;return null==e?e:{network_id:e.network_id,network_name:e.network_name,well_known_addresses:null==(t=e.well_known_addresses)?t:{xrd:t.xrd,secp256k1_signature_virtual_badge:t.secp256k1_signature_virtual_badge,ed25519_signature_virtual_badge:t.ed25519_signature_virtual_badge,package_of_direct_caller_virtual_badge:t.package_of_direct_caller_virtual_badge,global_caller_virtual_badge:t.global_caller_virtual_badge,system_transaction_badge:t.system_transaction_badge,package_owner_badge:t.package_owner_badge,validator_owner_badge:t.validator_owner_badge,account_owner_badge:t.account_owner_badge,identity_owner_badge:t.identity_owner_badge,package_package:t.package_package,resource_package:t.resource_package,account_package:t.account_package,identity_package:t.identity_package,consensus_manager_package:t.consensus_manager_package,access_controller_package:t.access_controller_package,transaction_processor_package:t.transaction_processor_package,metadata_module_package:t.metadata_module_package,royalty_module_package:t.royalty_module_package,access_rules_package:t.access_rules_package,genesis_helper_package:t.genesis_helper_package,faucet_package:t.faucet_package,consensus_manager:t.consensus_manager,genesis_helper:t.genesis_helper,faucet:t.faucet,pool_package:t.pool_package}}})}async networkConfiguration(e){return await (await this.networkConfigurationRaw(e)).value()}}class o$ extends s9{async streamTransactionsRaw(e,t){if(null===e.streamTransactionsRequest||void 0===e.streamTransactionsRequest)throw new s3("streamTransactionsRequest","Required parameter requestParameters.streamTransactionsRequest was null or undefined when calling streamTransactions.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/stream/transactions",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),from_ledger_state:s8(e.from_ledger_state),cursor:e.cursor,limit_per_page:e.limit_per_page,kind_filter:e.kind_filter,manifest_accounts_withdrawn_from_filter:e.manifest_accounts_withdrawn_from_filter,manifest_accounts_deposited_into_filter:e.manifest_accounts_deposited_into_filter,manifest_resources_filter:e.manifest_resources_filter,affected_global_entities_filter:e.affected_global_entities_filter,events_filter:void 0===e.events_filter?void 0:e.events_filter.map(oq),order:e.order,opt_ins:oj(e.opt_ins)}}(e.streamTransactionsRequest)},t);return new s6(r,e=>null==e?e:{ledger_state:ow(e.ledger_state),total_count:s5(e,"total_count")?e.total_count:void 0,next_cursor:s5(e,"next_cursor")?e.next_cursor:void 0,items:e.items.map(ou)})}async streamTransactions(e,t){return await (await this.streamTransactionsRaw(e,t)).value()}}class oM extends s9{async transactionCommittedDetailsRaw(e,t){if(null===e.transactionCommittedDetailsRequest||void 0===e.transactionCommittedDetailsRequest)throw new s3("transactionCommittedDetailsRequest","Required parameter requestParameters.transactionCommittedDetailsRequest was null or undefined when calling transactionCommittedDetails.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/transaction/committed-details",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{at_ledger_state:s8(e.at_ledger_state),intent_hash:e.intent_hash,opt_ins:oj(e.opt_ins)}}(e.transactionCommittedDetailsRequest)},t);return new s6(r,e=>null==e?e:{ledger_state:ow(e.ledger_state),transaction:ou(e.transaction)})}async transactionCommittedDetails(e,t){return await (await this.transactionCommittedDetailsRaw(e,t)).value()}async transactionConstructionRaw(e){let t=await this.request({path:"/transaction/construction",method:"POST",headers:{},query:{}},e);return new s6(t,e=>null==e?e:{ledger_state:ow(e.ledger_state)})}async transactionConstruction(e){return await (await this.transactionConstructionRaw(e)).value()}async transactionPreviewRaw(e,t){if(null===e.transactionPreviewRequest||void 0===e.transactionPreviewRequest)throw new s3("transactionPreviewRequest","Required parameter requestParameters.transactionPreviewRequest was null or undefined when calling transactionPreview.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/transaction/preview",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{manifest:e.manifest,blobs_hex:e.blobs_hex,start_epoch_inclusive:e.start_epoch_inclusive,end_epoch_exclusive:e.end_epoch_exclusive,notary_public_key:oh(e.notary_public_key),notary_is_signatory:e.notary_is_signatory,tip_percentage:e.tip_percentage,nonce:e.nonce,signer_public_keys:e.signer_public_keys.map(oh),flags:function(e){if(void 0!==e)return null===e?null:{use_free_credit:e.use_free_credit,assume_all_signature_proofs:e.assume_all_signature_proofs,skip_epoch_check:e.skip_epoch_check}}(e.flags)}}(e.transactionPreviewRequest)},t);return new s6(r,e=>null==e?e:{encoded_receipt:e.encoded_receipt,receipt:e.receipt,resource_changes:e.resource_changes,logs:e.logs.map(oD)})}async transactionPreview(e,t){return await (await this.transactionPreviewRaw(e,t)).value()}async transactionStatusRaw(e,t){if(null===e.transactionStatusRequest||void 0===e.transactionStatusRequest)throw new s3("transactionStatusRequest","Required parameter requestParameters.transactionStatusRequest was null or undefined when calling transactionStatus.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/transaction/status",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{intent_hash:e.intent_hash}}(e.transactionStatusRequest)},t);return new s6(r,e=>{var t;return null==e?e:{ledger_state:ow(e.ledger_state),status:e.status,intent_status:e.intent_status,intent_status_description:e.intent_status_description,known_payloads:e.known_payloads.map(oZ),committed_state_version:s5(e,"committed_state_version")?e.committed_state_version:void 0,error_message:s5(e,"error_message")?e.error_message:void 0}})}async transactionStatus(e,t){return await (await this.transactionStatusRaw(e,t)).value()}async transactionSubmitRaw(e,t){if(null===e.transactionSubmitRequest||void 0===e.transactionSubmitRequest)throw new s3("transactionSubmitRequest","Required parameter requestParameters.transactionSubmitRequest was null or undefined when calling transactionSubmit.");let n={};n["Content-Type"]="application/json";let r=await this.request({path:"/transaction/submit",method:"POST",headers:n,query:{},body:function(e){if(void 0!==e)return null===e?null:{notarized_transaction_hex:e.notarized_transaction_hex}}(e.transactionSubmitRequest)},t);return new s6(r,e=>null==e?e:{duplicate:e.duplicate})}async transactionSubmit(e,t){return await (await this.transactionSubmitRaw(e,t)).value()}}let oV=(e,t)=>{let n=[];for(let r=0,a=e.length;r<a;r+=t)n.push(e.slice(r,r+t));return n},oB=async(e,t)=>{let n,r=t,a=[];do{let t=await e(r);n=t.ledger_state,a.push(...t.items),r=t.next_cursor}while(r);return{aggregatedEntities:a,ledger_state:n}};class oW{constructor(e,t){this.innerClient=e,this.configuration=t}async getEntityDetailsVaultAggregated(e,t,n){var r,a,i,s,o,u,l;let c=Array.isArray(e);if(c&&0===e.length)return Promise.resolve([]);if(c&&e.length>this.configuration.maxAddressesCount){let r=oV(e,this.configuration.maxAddressesCount);return Promise.all(r.map(e=>this.getEntityDetailsVaultAggregated(e,t,n))).then(e=>e.flat())}let{items:d,ledger_state:p}=await this.innerClient.stateEntityDetails({stateEntityDetailsRequest:{addresses:c?e:[e],aggregation_level:ob.Vault,opt_ins:{ancestor_identities:null!=(r=null==t?void 0:t.ancestorIdentities)&&r,component_royalty_vault_balance:null!=(a=null==t?void 0:t.componentRoyaltyVaultBalance)&&a,package_royalty_vault_balance:null!=(i=null==t?void 0:t.packageRoyaltyVaultBalance)&&i,non_fungible_include_nfids:null==(s=null==t?void 0:t.nonFungibleIncludeNfids)||s,explicit_metadata:null!=(o=null==t?void 0:t.explicitMetadata)?o:[]},at_ledger_state:n}}).then(e=>this.ensureResourcesProperties(e));return c?Promise.all(d.map(e=>{var r,a;return this.queryAllResources(e,{explicitMetadata:null!=(r=null==t?void 0:t.explicitMetadata)?r:[],nonFungibleIncludeNfids:null==(a=null==t?void 0:t.nonFungibleIncludeNfids)||a},n||{state_version:p.state_version})})):this.queryAllResources(d[0],{explicitMetadata:null!=(u=null==t?void 0:t.explicitMetadata)?u:[],nonFungibleIncludeNfids:null==(l=null==t?void 0:t.nonFungibleIncludeNfids)||l},n||{state_version:p.state_version})}async getEntityMetadata(e,t){return this.innerClient.entityMetadataPage({stateEntityMetadataPageRequest:{address:e,cursor:t}})}async getNonFungibleLocation(e,t){if(t.length>this.configuration.maxNftIdsCount){let n=oV(t,this.configuration.maxNftIdsCount);return Promise.all(n.map(t=>this.getNonFungibleLocation(e,t))).then(e=>e.flat())}return this.innerClient.nonFungibleLocation({stateNonFungibleLocationRequest:{resource_address:e,non_fungible_ids:t}}).then(e=>e.non_fungible_ids)}async getAllEntityMetadata(e,t){return oB(this.getEntityMetadata.bind(this,e),t).then(e=>e.aggregatedEntities)}async getValidators(e){return this.innerClient.stateValidatorsList({stateValidatorsListRequest:{cursor:e||null}}).then(({validators:e})=>e)}async getAllValidators(e){return oB(e=>this.getValidatorsWithLedgerState(e).then(e=>({items:e.validators.items,ledger_state:e.ledger_state,next_cursor:e.validators.next_cursor})),e).then(e=>e.aggregatedEntities)}async getValidatorsWithLedgerState(e){return this.innerClient.stateValidatorsList({stateValidatorsListRequest:{cursor:e||null}})}async getAllValidatorsWithLedgerState(e){return oB(e=>this.getValidatorsWithLedgerState(e).then(e=>({items:e.validators.items,ledger_state:e.ledger_state,next_cursor:e.validators.next_cursor})),e)}async getNonFungibleIds(e,t,n){return this.innerClient.nonFungibleIds({stateNonFungibleIdsRequest:{resource_address:e,cursor:n,at_ledger_state:t}}).then(({non_fungible_ids:e})=>e)}async getAllNonFungibleIds(e,t,n){let r=n,a=t,i=[];do{let t=await this.innerClient.nonFungibleIds({stateNonFungibleIdsRequest:{resource_address:e,cursor:a,at_ledger_state:r}});i.push(...t.non_fungible_ids.items),r=r||{state_version:t.ledger_state.state_version},a=t.non_fungible_ids.next_cursor}while(a);return i}async getNonFungibleData(e,t,n){let r=Array.isArray(t);if(r&&0===t.length)return Promise.resolve([]);if(r&&t.length>this.configuration.maxNftIdsCount){let r=oV(t,this.configuration.maxNftIdsCount);return Promise.all(r.map(t=>this.getNonFungibleData(e,t,n))).then(e=>e.flat())}let{non_fungible_ids:a}=await this.innerClient.nonFungibleData({stateNonFungibleDataRequest:{resource_address:e,non_fungible_ids:r?t:[t],at_ledger_state:n}});return r?a:a[0]}async getEntityFungiblesPageVaultAggregated(e,t){return this.innerClient.entityFungiblesPage({stateEntityFungiblesPageRequest:{address:e,cursor:null==t?void 0:t.nextCursor,aggregation_level:"Vault",at_ledger_state:null==t?void 0:t.ledgerState,opt_ins:{explicit_metadata:null==t?void 0:t.explicitMetadata}}})}async getEntityNonFungiblesPageVaultAggregated(e,t){return this.innerClient.entityNonFungiblesPage({stateEntityNonFungiblesPageRequest:{address:e,cursor:null==t?void 0:t.cursor,aggregation_level:"Vault",at_ledger_state:null==t?void 0:t.ledgerState,opt_ins:{explicit_metadata:null==t?void 0:t.explicitMetadata,non_fungible_include_nfids:null==t?void 0:t.nonFungibleIncludeNfids}}})}ensureResourcesProperties(e){return{...e,items:e.items.map(e=>({...e,fungible_resources:e.fungible_resources||{total_count:0,items:[]},non_fungible_resources:e.non_fungible_resources||{total_count:0,items:[]}}))}}async queryAllFungibles(e,t,n){var r,a;let i=null==(r=null==e?void 0:e.fungible_resources)?void 0:r.next_cursor;if(!i)return Promise.resolve(e);let s=await oB(r=>this.getEntityFungiblesPageVaultAggregated(e.address,{nextCursor:r,ledgerState:n,explicitMetadata:null==t?void 0:t.explicitMetadata}),i);return Promise.resolve({...e,fungible_resources:{items:[...(null==(a=null==e?void 0:e.fungible_resources)?void 0:a.items)||[],...s.aggregatedEntities]}})}async queryAllNonFungibles(e,t,n){let r=e.non_fungible_resources.next_cursor;if(!r)return Promise.resolve(e);let a=await oB(r=>this.getEntityNonFungiblesPageVaultAggregated(e.address,{cursor:r,ledgerState:n,explicitMetadata:null==t?void 0:t.explicitMetadata,nonFungibleIncludeNfids:null==t?void 0:t.nonFungibleIncludeNfids}),r);return Promise.resolve({...e,non_fungible_resources:{items:[...e.non_fungible_resources.items,...a.aggregatedEntities]}})}async queryAllResources(e,t,n){let r=this.queryAllFungibles(e,t,n),a=this.queryAllNonFungibles(e,t,n);return Promise.all([r,a]).then(t=>({...e,fungible_resources:{...e.fungible_resources,items:[...t[0].fungible_resources.items]},non_fungible_resources:{...e.non_fungible_resources,items:[...t[1].non_fungible_resources.items]}}))}}let oK={Mainnet:1,Stokenet:2,Alphanet:10,Betanet:11,Kisharnet:12,RCnetV1:12,Zabanet:14,RCnetV3:14,Gilganet:32,Enkinet:33,Hammunet:34,Nergalnet:35,Mardunet:36,Dumunet:37,LocalNet:240,InternalTestNet:241,Simulator:242},oG={Mainnet:{networkName:"Mainnet",networkId:oK.Mainnet,gatewayUrl:"https://mainnet.radixdlt.com",dashboardUrl:"https://dashboard.radixdlt.com"},Stokenet:{networkName:"Stokenet",networkId:oK.Stokenet,gatewayUrl:"https://babylon-stokenet-gateway.radixdlt.com",dashboardUrl:"https://stokenet-dashboard.radixdlt.com"},Kisharnet:{networkName:"Kisharnet",networkId:oK.Kisharnet,gatewayUrl:"https://kisharnet-gateway.radixdlt.com",dashboardUrl:"https://kisharnet-dashboard.radixdlt.com"},RCnetV1:{networkName:"RCnetV1",networkId:oK.RCnetV1,gatewayUrl:"https://rcnet.radixdlt.com",dashboardUrl:"https://rcnet-dashboard.radixdlt.com"},Mardunet:{networkName:"Mardunet",networkId:oK.Mardunet,gatewayUrl:"https://mardunet-gateway.radixdlt.com",dashboardUrl:"https://mardunet-dashboard.rdx-works-main.extratools.works"},Zabanet:{networkName:"Zabanet",networkId:oK.Zabanet,gatewayUrl:"https://zabanet-gateway.radixdlt.com",dashboardUrl:"https://rcnet-v3-dashboard.radixdlt.com"},RCnetV3:{networkName:"RCNetV3",networkId:oK.RCnetV3,gatewayUrl:"https://zabanet-gateway.radixdlt.com",dashboardUrl:"https://rcnet-v3-dashboard.radixdlt.com"},Gilganet:{networkName:"Gilganet",networkId:oK.Gilganet,gatewayUrl:"https://gilganet-gateway.radixdlt.com",dashboardUrl:"https://gilganet-dashboard.rdx-works-main.extratools.works"},Enkinet:{networkName:"Enkinet",networkId:oK.Enkinet,gatewayUrl:"https://enkinet-gateway.radixdlt.com",dashboardUrl:"https://enkinet-dashboard.rdx-works-main.extratools.works"},Hammunet:{networkName:"Hammunet",networkId:oK.Hammunet,gatewayUrl:"https://hammunet-gateway.radixdlt.com",dashboardUrl:"https://hammunet-dashboard.rdx-works-main.extratools.works"},Dumunet:{networkName:"Dumunet",networkId:oK.Dumunet,gatewayUrl:"https://dumunet-gateway.radixdlt.com",dashboardUrl:"https://dumunet-dashboard.rdx-works-main.extratools.works"}},oH=Object.values(oG).reduce((e,t)=>(e[t.networkId]=t,e),{});class oJ{constructor(e,t){this.innerClient=e,this.configuration=t}getValidatorsUptimeFromTo(e,t,n){var r,a;if(e.length>((null==(r=this.configuration)?void 0:r.maxValidatorsUptimeCount)||200)){let r=oV(e,(null==(a=this.configuration)?void 0:a.maxValidatorsUptimeCount)||200);return Promise.all(r.map(e=>this.getValidatorsUptimeFromTo(e,t,n))).then(e=>e.flat())}return this.innerClient.validatorsUptime({validatorsUptimeRequest:{validator_addresses:e,from_ledger_state:void 0!==t?t instanceof Date?{timestamp:t}:{state_version:t}:void 0,at_ledger_state:void 0!==n?n instanceof Date?{timestamp:n}:{state_version:n}:void 0}}).then(e=>e.validators.items)}getValidatorsUptime(e){return this.innerClient.validatorsUptime({validatorsUptimeRequest:{validator_addresses:e}})}}class oY{constructor(e){this.innerClient=e}getCurrent(){return this.innerClient.gatewayStatus()}getNetworkConfiguration(){return this.innerClient.networkConfiguration()}}class oX{constructor(e){this.innerClient=e}getTransactionsList(e,t){return this.innerClient.streamTransactions({streamTransactionsRequest:{cursor:t,affected_global_entities_filter:e}})}}class oQ{constructor(e){this.innerClient=e}getStatus(e){return this.innerClient.transactionStatus({transactionStatusRequest:{intent_hash:e}})}getCommittedDetails(e,t){var n,r,a,i,s,o,u,l,c,d;return this.innerClient.transactionCommittedDetails({transactionCommittedDetailsRequest:{intent_hash:e,opt_ins:{raw_hex:null==(n=null==t?void 0:t.rawHex)||n,receipt_events:null==(r=null==t?void 0:t.receiptEvents)||r,receipt_fee_source:null==(a=null==t?void 0:t.receiptFeeSource)||a,receipt_fee_destination:null==(i=null==t?void 0:t.receiptFeeDestination)||i,receipt_costing_parameters:null==(s=null==t?void 0:t.receiptCostingParameters)||s,receipt_fee_summary:null==(o=null==t?void 0:t.receiptFeeSummary)||o,receipt_state_changes:null==(u=null==t?void 0:t.receiptStateChanges)||u,affected_global_entities:null==(l=null==t?void 0:t.affectedGlobalEntities)||l,balance_changes:null==(c=null==t?void 0:t.balanceChanges)||c,receipt_output:null==(d=null==t?void 0:t.receiptOutput)||d}}})}}class o0 extends s1{constructor(e){super(e),sQ(this,"extendedConfiguration"),this.extendedConfiguration=e}get maxAddressesCount(){return this.extendedConfiguration.maxAddressesCount||20}get maxNftIdsCount(){return this.extendedConfiguration.maxNftIdsCount||29}get maxValidatorsUptimeCount(){return this.extendedConfiguration.maxValidatorsUptimeCount||200}}let o1=e=>e?e.endsWith("/")?null==e?void 0:e.slice(0,-1):e:"";class o2{constructor(e){sQ(this,"state"),sQ(this,"stream"),sQ(this,"status"),sQ(this,"transaction"),sQ(this,"statistics"),sQ(this,"lowLevel"),this.lowLevel={state:new oU(e),stream:new o$(e),status:new oz(e),transaction:new oM(e),statistics:new oL(e)},this.state=new oW(this.lowLevel.state,e),this.stream=new oX(this.lowLevel.stream),this.status=new oY(this.lowLevel.status),this.transaction=new oQ(this.lowLevel.transaction),this.statistics=new oJ(this.lowLevel.statistics,e)}static initialize(e){let t=o2.constructConfiguration(e);return new o2(t)}static constructConfiguration(e){var t,n,r,a;let i=o1(null==e?void 0:e.basePath),s=null!=(t=null==e?void 0:e.applicationName)?t:"Unknown";return new o0({...e,basePath:i,applicationName:s,headers:{...null!=(n=null==e?void 0:e.headers)?n:{},"RDX-Client-Name":"@radixdlt/babylon-gateway-api-sdk","RDX-Client-Version":"1.2.7","RDX-App-Name":s,"RDX-App-Version":null!=(r=e.applicationVersion)?r:"Unknown","RDX-App-Dapp-Definition":null!=(a=e.applicationDappDefinitionAddress)?a:"Unknown"}})}}let o9=e=>{let t=e.logger,n=e.requestItemClient,r=e.walletSdk,a=e.gatewayClient,i=new U,s=t=>{let r=new U;return{eventCallback:e=>{r.next(e)},requestControl:({cancelRequest:a,getRequest:s})=>{ey(r.pipe(eq(e=>"receivedByWallet"===e),ev(()=>s()),eZ(e=>{"transaction"===e.items.discriminator&&n.patch(t,{showCancel:!1})}))),ey(eN(e.onCancelRequestItem$,i).pipe(eq(e=>e===t),eD(()=>(n.cancel(t),n.updateStatus({id:t,status:"fail",error:"userCancelledRequest"}),a()))))}}},o=new y;return{request:(e,a)=>r.request(e,s(a)).map(e=>(null==t||t.debug("⬇️walletSuccessResponse",e),e)).mapErr(e=>(null==t||t.debug("⬇️walletErrorResponse",e),n.updateStatus({id:a,status:"fail",error:e.error}),e)),sendTransaction:({onTransactionId:e,...i})=>{let{id:o}=n.add("sendTransaction");return r.sendTransaction({version:1,...i},s(o)).mapErr(e=>(n.updateStatus({id:o,status:"fail",error:e.error}),null==t||t.debug("⬇️ walletErrorResponse",e),e)).map(e=>(null==t||t.debug("⬇️ walletSuccessResponse",e),e)).andThen(({transactionIntentHash:t})=>(e&&e(t),a.pollTransactionStatus(t).map(e=>({transactionIntentHash:t,status:e.status})))).andThen(e=>{let r=[oo.Rejected,oo.CommittedFailure].includes(e.status);return n.updateStatus({id:o,status:r?"fail":"success",transactionIntentHash:e.transactionIntentHash}),null==t||t.debug("\uD83D\uDD01 Gateway polling finished",e),r?se({...e,error:"transactionNotSuccessful"}):i7(e)})},extensionStatus$:r.extensionStatus$,requestItems$:n.items$,resetRequestItems:n.reset,cancelRequest:e=>i.next(e),destroy:()=>{n.destroy(),r.destroy(),o.unsubscribe()}}},o4=e=>e,o3=({basePath:e,dAppDefinitionAddress:t,applicationName:n,applicationVersion:r})=>{let{transaction:a,state:i,status:s}=o2.initialize({basePath:e,applicationName:n||t||"unknown",applicationVersion:r,applicationDappDefinitionAddress:t});return{getTransactionStatus:e=>iU.fromPromise(a.getStatus(e),o4),getTransactionDetails:e=>iU.fromPromise(a.getCommittedDetails(e),o4),getEntityDetails:e=>iU.fromPromise(i.getEntityDetailsVaultAggregated(e),o4),getEntitiesDetails:e=>iU.fromPromise(i.getEntityDetailsVaultAggregated(e),o4),getEntityNonFungibleIds:({accountAddress:e,nftAddress:t,vaultAddress:n})=>iU.fromPromise(i.innerClient.entityNonFungibleIdsPage({stateEntityNonFungibleIdsPageRequest:{address:e,vault_address:n,resource_address:t}}),o4),getNetworkConfiguration:()=>iU.fromPromise(s.getNetworkConfiguration(),o4),transactionApi:a,stateApi:i,statusApi:s}},o5=({maxDelayTime:e=1e4,multiplier:t=2,timeout:n,interval:r=2e3}={})=>{let a=new U,i=0,s=eN(em(0),a.pipe(ev(()=>i+=1))).pipe(eD(n=>{let a=n*r*t,i=a>e?e:a;return eI(i).pipe(ev(()=>i7(n)))})),o=n?eN(s,eI(n).pipe(ev(()=>se(nB("failedToPollSubmittedTransaction",""))))):s;return{trigger:a,withBackoff$:o}},o6=e=>{var t;let n=null==(t=null==e?void 0:e.value)?void 0:t.typed;return{stringified:null!=n&&n.value?(null==n?void 0:n.value)||"":null==n?void 0:n.values.join(", ")}},o8=({gatewayApi:e,logger:t,retryConfig:n})=>({pollTransactionStatus:r=>{let a=o5(n),i=new Set(["CommittedSuccess","CommittedFailure","Rejected"]);return iU.fromPromise(ey(a.withBackoff$.pipe(eD(n=>n.isErr()?[n]:(null==t||t.debug(`pollingTxStatus retry #${n.value+1}`),e.getTransactionStatus(r).map(e=>{if(i.has(e.status))return e;a.trigger.next()}).mapErr(e=>(null==t||t.debug(e),nB("failedToPollSubmittedTransaction",""))))),eq(e=>e.isOk()&&!!e.value||e.isErr()),ej())),e=>e).andThen(e=>e)},gatewayApi:e}),o7=()=>({initialized:new z(!1),onChange:new U,items:new z([])}),ue=(e,t,n)=>{let r=n.logger,a=new Set,i=new y,s=new Map,o=n.subjects||o7(),u=`${e}:requestItemStore`;t.getData(u).map(e=>{e&&Object.keys(e).forEach(t=>{a.add(t),s.set(t,e[t])}),o.items.next(f())});let l=(e,t)=>o.onChange.next({oldValue:e,newValue:t}),c=e=>({type:e,status:"pending",timestamp:Date.now(),id:crypto.randomUUID(),showCancel:!0}),d=(e,t)=>{let n=s.get(e);if(n){let a={...n,...t};s.set(e,a),l(n,a),null==r||r.trace("patchRequestItemStatus",a)}},p=()=>[...a].reverse(),f=()=>p().map(e=>({id:e,...s.get(e)})).filter(e=>!!e);return i.add(o.onChange.pipe(ev(()=>f()),eZ(e=>o.items.next(e)),eZ(()=>{let e=Array.from(s.entries());t.setData(u,Object.fromEntries(e.filter(([,e])=>"pending"!==e.status)))})).subscribe()),{add:e=>{let t=c(e);return s.set(t.id,t),a.add(t.id),l(void 0,t),null==r||r.trace("addRequestItem",{id:t.id,status:t.status}),t},remove:e=>{if(s.has(e)){let t=s.get(e);s.delete(e),a.delete(e),l(t,void 0),null==r||r.trace("removeRequestItem",e)}},cancel:e=>{s.has(e)&&(d(e,{status:"fail",error:nM.canceledByUser}),null==r||r.trace("cancelRequestItem",e))},updateStatus:({id:e,status:t,error:n,transactionIntentHash:a})=>{let i=s.get(e);if(i){let o={...i,status:t};"fail"===o.status&&(o.error=n),"success"===o.status&&"sendTransaction"===o.type&&(o.transactionIntentHash=a),s.set(e,o),l(i,o),null==r||r.trace("updateRequestItemStatus",o)}},patch:d,reset:()=>{s.clear(),a.clear(),l(void 0,void 0),null==r||r.trace("resetRequestItems")},destroy:()=>{i.unsubscribe()},items$:o.items,change$:o.onChange.asObservable()}},ut=e=>{try{return i7(JSON.parse(e))}catch(e){return se(o4(e))}},un=()=>{let e=e=>new Promise((t,n)=>{try{let n=localStorage.getItem(e);return t(n||void 0)}catch(e){return n(e)}}),t=(e,t)=>new Promise((n,r)=>{try{return localStorage.setItem(e,JSON.stringify(t)),n()}catch(e){return r(e)}});return{getData:t=>iU.fromPromise(e(t),o4).andThen(e=>e?ut(e):i7(void 0)),setData:(e,n)=>iU.fromPromise(t(e,n),o4)}},ur=e=>t=>{var n,r,a;let i=[];if("authorizedRequest"===e.discriminator){let t=(null==(n=e.oneTimeAccounts)?void 0:n.accounts)??[],a=(null==(r=e.ongoingAccounts)?void 0:r.accounts)??[];i=[...t,...a]}else"unauthorizedRequest"===e.discriminator&&(i=(null==(a=e.oneTimeAccounts)?void 0:a.accounts)??[]);return s$(t,e=>{e.accounts=i})},ua=e=>{let t=[];return e.name&&t.push({entry:"fullName",fields:e.name}),e.emailAddresses&&t.push({entry:"emailAddresses",fields:e.emailAddresses}),e.phoneNumbers&&t.push({entry:"phoneNumbers",fields:e.phoneNumbers}),t},ui=e=>t=>s$(t,t=>{"authorizedRequest"===e.discriminator?(e.oneTimePersonaData&&(t.personaData=ua(e.oneTimePersonaData)),e.ongoingPersonaData&&(t.personaData=ua(e.ongoingPersonaData))):"unauthorizedRequest"===e.discriminator&&e.oneTimePersonaData&&(t.personaData=ua(e.oneTimePersonaData))}),us=e=>t=>s$(t,t=>{var n;"authorizedRequest"===e.discriminator&&(t.persona=null==(n=e.auth)?void 0:n.persona)}),uo=e=>t=>s$(t,t=>{var n,r,a,i,s,o;if(t.proofs=[],"authorizedRequest"===e.discriminator){if("loginWithChallenge"===e.auth.discriminator&&t.proofs.push({challenge:e.auth.challenge,proof:e.auth.proof,address:e.auth.persona.identityAddress,type:ib.persona}),null!=(n=e.ongoingAccounts)&&n.challenge&&null!=(r=e.ongoingAccounts.proofs)&&r.length){let n=e.ongoingAccounts.challenge,r=e.ongoingAccounts.proofs.map(({accountAddress:e,proof:t})=>({proof:t,address:e,challenge:n,type:ib.account}));t.proofs.push(...r)}if(null!=(a=e.oneTimeAccounts)&&a.challenge&&null!=(i=e.oneTimeAccounts.proofs)&&i.length){let n=e.oneTimeAccounts.challenge,r=e.oneTimeAccounts.proofs.map(({accountAddress:e,proof:t})=>({proof:t,address:e,challenge:n,type:ib.account}));t.proofs.push(...r)}}if("unauthorizedRequest"===e.discriminator&&null!=(s=e.oneTimeAccounts)&&s.challenge&&null!=(o=e.oneTimeAccounts.proofs)&&o.length){let n=e.oneTimeAccounts.challenge,r=e.oneTimeAccounts.proofs.map(({accountAddress:e,proof:t})=>({proof:t,address:e,challenge:n,type:ib.account}));t.proofs.push(...r)}}),uu=e=>i7({accounts:[],personaData:[],proofs:[],persona:void 0}).map(ur(e)).map(ui(e)).map(us(e)).map(uo(e));iy({accounts:iy({numberOfAccounts:nr,reset:im(),oneTime:im(),challenge:ih().optional()}).optional(),personaData:iy({fullName:im().optional(),phoneNumbers:nr.optional(),emailAddresses:nr.optional(),reset:im(),oneTime:im().optional()}).optional(),persona:iy({identityAddress:ih().optional(),label:ih().optional(),challenge:ih().optional()}).optional()});let ul=e=>{let{persona:t,accounts:n,personaData:r}=e,a=(null==n?void 0:n.reset)||(null==r?void 0:r.reset),i=n&&!(null!=n&&n.oneTime),s=r&&!(null!=r&&r.oneTime);return!!(a||i||s||t)},uc=e=>{var t,n,r;return null!=(t=e.persona)&&t.challenge?{discriminator:"loginWithChallenge",challenge:e.persona.challenge}:null!=(n=e.persona)&&n.identityAddress?{discriminator:"usePersona",identityAddress:null==(r=e.persona)?void 0:r.identityAddress}:{discriminator:"loginWithoutChallenge"}},ud=e=>t=>{var n,r;let a={...t},{accounts:i}=e;if(i){let t={challenge:i.challenge,numberOfAccounts:i.numberOfAccounts},s="authorizedRequest"===a.discriminator&&!(null!=(n=e.accounts)&&n.oneTime),o="authorizedRequest"===a.discriminator;null!=(r=e.accounts)&&r.oneTime?a.oneTimeAccounts=t:(s||o)&&(a.ongoingAccounts=t)}return a},up=e=>t=>{var n,r;let a={...t};if(e.personaData){let{fullName:t,phoneNumbers:i,emailAddresses:s}=e.personaData;null!=(n=e.personaData)&&n.oneTime&&(a.oneTimePersonaData={isRequestingName:t,numberOfRequestedPhoneNumbers:i,numberOfRequestedEmailAddresses:s});let o="authorizedRequest"===a.discriminator&&!(null!=(r=e.personaData)&&r.oneTime),u="authorizedRequest"===a.discriminator;(o||u)&&(a.ongoingPersonaData={isRequestingName:t,numberOfRequestedPhoneNumbers:i,numberOfRequestedEmailAddresses:s})}return a},uf=e=>t=>{let{accounts:n,personaData:r}=e;return{...t,reset:{accounts:!!(null!=n&&n.reset),personaData:!!(null!=r&&r.reset)}}},uh=e=>i7({discriminator:"unauthorizedRequest"}).map(ud(e)).map(up(e)),um=e=>i7({discriminator:"authorizedRequest",auth:uc(e)}).map(ud(e)).map(up(e)).map(uf(e)),u_=(e,t)=>i7(e?s$(t,e=>{e.accounts&&(e.accounts.oneTime=!1,e.accounts.reset=!1),e.personaData&&(e.personaData.oneTime=!1,e.personaData.reset=!1)}):t),uy=(e,t)=>u_(e,t).andThen(e=>ul(e)?um(e):uh(e)),uv=({dataRequestState:e,isConnect:t,challenge:n,oneTime:r,stateClient:a})=>uy(t,s$({},t=>{var i;if(e.accounts&&(t.accounts={numberOfAccounts:e.accounts.numberOfAccounts||{quantifier:"atLeast",quantity:1},oneTime:r,reset:!!e.accounts.reset,challenge:e.accounts.withProof?n:void 0}),e.personaData&&(t.personaData={...e.personaData,reset:!!e.personaData.reset,oneTime:r}),!r){let r=a.getState().walletData.persona;a.getState().walletData.persona&&(t.persona=r),null!=(i=e.persona)&&i.withProof&&(t.persona={...t.persona??{},challenge:n}),0===Object.values(e).length&&(t.persona={challenge:void 0})}})),ug=(e,t)=>{var n,r,a,i,s,o,u,l,c,d,p;if("authorizedRequest"===e.discriminator){let f=(null==(n=e.reset)?void 0:n.accounts)||(null==(r=e.reset)?void 0:r.personaData),h=!!(e.oneTimeAccounts||e.oneTimePersonaData),m="loginWithChallenge"===e.auth.discriminator||!!(null!=(a=e.oneTimeAccounts)&&a.challenge)||!!(null!=(i=e.ongoingAccounts)&&i.challenge);if(f||h||m)return!1;let _=!1;if(e.ongoingAccounts){let{quantifier:n,quantity:r}=e.ongoingAccounts.numberOfAccounts;_=(null==(u=null==(o=null==(s=t.sharedData)?void 0:s.ongoingAccounts)?void 0:o.numberOfAccounts)?void 0:u.quantifier)===n&&(null==(d=null==(c=null==(l=t.sharedData)?void 0:l.ongoingAccounts)?void 0:c.numberOfAccounts)?void 0:d.quantity)===r}return e.ongoingPersonaData&&(_=sW(e.ongoingPersonaData,null==(p=t.sharedData)?void 0:p.ongoingPersonaData)),_}return!1},ub=(e,t)=>"authorizedRequest"===e.discriminator?s$({},t=>{t.persona={proof:!1},t.ongoingAccounts={proof:!1,numberOfAccounts:void 0},"loginWithChallenge"===e.auth.discriminator&&(t.persona.proof=!!e.auth.challenge),e.ongoingAccounts&&(t.ongoingAccounts={proof:!!e.ongoingAccounts.challenge,numberOfAccounts:e.ongoingAccounts.numberOfAccounts}),e.ongoingPersonaData&&(t.ongoingPersonaData=e.ongoingPersonaData)}):t,uw=e=>s$({},t=>{e.ongoingAccounts&&(t.accounts={numberOfAccounts:e.ongoingAccounts.numberOfAccounts,withProof:e.ongoingAccounts.proof,reset:!0}),e.ongoingPersonaData&&(t.personaData={fullName:e.ongoingPersonaData.isRequestingName,phoneNumbers:e.ongoingPersonaData.numberOfRequestedPhoneNumbers,emailAddresses:e.ongoingPersonaData.numberOfRequestedEmailAddresses,reset:!0}),e.persona&&(t.persona={withProof:!!e.persona.proof})}),ux=({stateClient:e,requestItemClient:t,walletClient:n,useCache:r,dataRequestStateClient:a,requestInterceptor:i})=>{let s,o,u;let l=e=>{var t,n;return(null==(t=e.accounts)?void 0:t.withProof)||(null==(n=e.persona)?void 0:n.withProof)},c=e=>{if(!l(e))return iL(void 0);if(!s)throw Error("Expected proof but no challenge generator provided");return s()},d=({isConnect:a,oneTime:s,dataRequestState:o})=>i7(o).asyncAndThen(t=>c(t).andThen(n=>uv({dataRequestState:t,isConnect:a,challenge:n,oneTime:s,stateClient:e}))).andThen(a=>{let o=e.getState();if(ug(a,o)&&r)return iL(o.walletData);let l=!e.getState().walletData.persona&&"authorizedRequest"===a.discriminator;return i({type:"dataRequest",payload:a}).map(e=>{let{id:n}=t.add(l?"loginRequest":"dataRequest");return{walletDataRequest:e,id:n}}).andThen(({walletDataRequest:r,id:a})=>n.request(r,a).mapErr(({error:e,message:t})=>({error:e,message:t})).andThen(uu).andThen(e=>u?u(e).map(()=>(t.updateStatus({id:a,status:"success"}),e)).mapErr(e=>(t.updateStatus({id:a,status:"fail",error:e.error}),e)):(t.updateStatus({id:a,status:"success"}),i7(e))).map(t=>(s||e.setState({loggedInTimestamp:Date.now().toString(),walletData:t,sharedData:ub(r,e.getState().sharedData)}),t)))});return{provideChallengeGenerator:e=>{s=()=>iU.fromPromise(e(),()=>({error:"GenerateChallengeError",message:"Failed to generate challenge"}))},provideDataRequestControl:e=>{u=t=>iU.fromPromise(e(t),()=>({error:"LoginRejectedByDapp",message:"Login rejected by dApp"}))},provideConnectResponseCallback:e=>{o=t=>e(t)},sendOneTimeRequest:(...e)=>d({dataRequestState:a.toDataRequestState(...e),isConnect:!1,oneTime:!0}),setState:(...e)=>(a.setState(...e),{sendRequest:()=>d({dataRequestState:a.getState(),isConnect:!1,oneTime:!1})}),sendRequest:({isConnect:e,oneTime:t})=>{let n=d({isConnect:e,oneTime:t,dataRequestState:a.getState()});return o&&n.map(e=>{o(i7(e))}).mapErr(e=>{o(se(e))}),n},updateSharedData:()=>d({dataRequestState:uw(e.getState().sharedData),isConnect:!1,oneTime:!1})}},uk=e=>{var t;let n=e.accounts??[],r=(null==(t=null==e?void 0:e.persona)?void 0:t.label)??"",a=!!(null!=e&&e.persona),i=e.personaData.map(e=>{if("fullName"===e.entry){let{variant:t,givenNames:n,familyName:r,nickname:a}=e.fields;return{value:"western"===t?`${n}${a?` "${a}" `:" "}${r}`:`${r}${a?` "${a}" `:" "}${n}`,field:"fullName"}}return"emailAddresses"===e.entry?{value:e.fields[0],field:"emailAddress"}:"phoneNumbers"===e.entry?{value:e.fields[0],field:"phoneNumber"}:void 0}).filter(e=>!!e&&!!e.value.trim());return{accounts:n,personaLabel:r,connected:a,personaData:i}},uS=e=>{let t=new z(e),n=()=>t.next(e),r=e=>t.next(e),a=()=>t.getValue(),i=(...e)=>e.filter(e=>"function"==typeof e._toObject).reduce((e,t)=>({...e,...t._toObject()}),{});return{reset:n,setState:(...e)=>{0===e.length?n():r(i(...e))},getState:a,patchState:(...e)=>{0!==e.length&&r({...a(),...i(...e)})},removeState:(...e)=>{r(s$(a(),t=>{e.forEach(e=>{delete t[e]})}))},toDataRequestState:i,state$:t.asObservable()}},uT=e=>t=>iU.fromPromise(e(t),e=>({error:"requestInterceptorError",jsError:e})),uP=e=>{let{dAppDefinitionAddress:t,networkId:n,providers:r,logger:a,onDisconnect:i,explorer:s,gatewayBaseUrl:o,applicationName:u,applicationVersion:l,useCache:c=!0,requestInterceptor:d=async({payload:e})=>e}=e||{},p=`rdt:${t}:${n}`,f=new z(t),h=new y,m=(null==r?void 0:r.connectButton)??sJ({logger:a});m.setIsMobile(sH());let _=(null==r?void 0:r.gatewayClient)??o8({logger:a,gatewayApi:o3({basePath:o??oH[n].gatewayUrl,dAppDefinitionAddress:t,applicationName:u,applicationVersion:l})}),v=(null==r?void 0:r.storageClient)??un(),g=(null==r?void 0:r.walletSdk)??ac({logger:a,networkId:n,dAppDefinitionAddress:t}),b=(null==r?void 0:r.requestItemClient)??ue(p,v,{logger:a}),w=(null==r?void 0:r.walletClient)??o9({logger:a,onCancelRequestItem$:m.onCancelRequestItem$,walletSdk:g,gatewayClient:_,requestItemClient:b}),x=(null==r?void 0:r.stateClient)??sK(p,v,{logger:a}),k=(null==r?void 0:r.dataRequestStateClient)??uS({}),S=uT(d),T=(null==r?void 0:r.dataRequestClient)??ux({stateClient:x,requestItemClient:b,walletClient:w,useCache:c,dataRequestStateClient:k,requestInterceptor:S}),P=()=>{b.items$.value.forEach(e=>{e.showCancel&&w.cancelRequest(e.id)}),x.reset(),w.resetRequestItems(),m.disconnect(),i&&i()};h.add(f.pipe(eq(e=>!!e),eD(e=>_.gatewayApi.getEntityDetails(e).map(e=>o6(null==e?void 0:e.metadata.items.find(e=>"name"===e.key)).stringified).map(e=>{m.setDappName(e??"Unnamed dApp")}))).subscribe()),h.add(w.extensionStatus$.pipe(eZ(e=>{m.setIsExtensionAvailable(e.isExtensionAvailable),m.setIsWalletLinked(e.isWalletLinked)})).subscribe()),h.add(m.onConnect$.pipe(eD(()=>(x.reset(),T.sendRequest({isConnect:!0,oneTime:!1})))).subscribe()),h.add(m.onLinkClick$.pipe(eZ(({type:e,data:t})=>{if(["account","transaction"].includes(e)){let{baseUrl:r,transactionPath:a,accountsPath:i}=s??{baseUrl:oH[n].dashboardUrl,transactionPath:"/transaction/",accountsPath:"/account/"};if(!r||!window)return;let o=`${r}${"transaction"===e?a:i}${t}`;window.open(o)}else"setupGuide"===e?window.open("https://wallet.radixdlt.com"):"showQrCode"===e&&g.openPopup()})).subscribe()),h.add(m.onShowPopover$.pipe(eF(w.requestItems$),eZ(([e,t])=>{t.filter(e=>"pending"===e.status).length>0&&m.setActiveTab("requests")})).subscribe()),h.add(m.onDisconnect$.pipe(eZ(P)).subscribe()),h.add(x.state$.pipe(eZ(e=>{let{personaData:t,accounts:n,personaLabel:r,connected:a}=uk(e.walletData);m.setLoggedInTimestamp(e.loggedInTimestamp),m.setAccounts(n),m.setPersonaData(t),m.setPersonaLabel(r),m.setConnected(a)})).subscribe()),h.add(w.requestItems$.pipe(eZ(e=>m.setRequestItems(e))).subscribe()),h.add(b.change$.pipe(eF(b.items$),eZ(([,e])=>{e.find(e=>"pending"===e.status)&&m.setStatus("pending")}),eP(([e])=>{var t,n;let r=null==(t=e.newValue)?void 0:t.status;return(null==(n=e.oldValue)?void 0:n.status)==="pending"&&("success"===r||"fail"===r)?(m.setStatus("success"===r?"success":"error"),eI(2e3).pipe(eF(w.requestItems$),eZ(([e,t])=>{let n=t.find(e=>"pending"===e.status);m.setStatus(n?"pending":"default")}))):em()})).subscribe()),h.add(eN(m.onUpdateSharedData$).pipe(eD(()=>T.updateSharedData())).subscribe());let R={state:_.gatewayApi.stateApi,status:_.gatewayApi.statusApi,transaction:_.gatewayApi.transactionApi},C={setRequestData:T.setState,sendRequest:()=>T.sendRequest({isConnect:!1,oneTime:!1}),provideChallengeGenerator:e=>T.provideChallengeGenerator(e),dataRequestControl:e=>{T.provideDataRequestControl(e)},provideConnectResponseCallback:T.provideConnectResponseCallback,updateSharedData:()=>T.updateSharedData(),sendOneTimeRequest:T.sendOneTimeRequest,sendTransaction:e=>S({type:"sendTransaction",payload:e}).andThen(w.sendTransaction),walletData$:x.walletData$,getWalletData:()=>x.getWalletData()},O={setTheme:m.setTheme,setMode:m.setMode,status$:m.status$};return{walletApi:C,gatewayApi:R,buttonApi:O,disconnect:P,destroy:()=>{x.destroy(),w.destroy(),h.unsubscribe(),m.destroy()}}};iy({numberOfAccounts:nr,withProof:im().optional(),reset:im().optional()}),iy({withProof:im().optional()}),iy({fullName:im(),emailAddresses:nr,phoneNumbers:nr,reset:im()}).partial();let uR={accounts:()=>{let e=s$({numberOfAccounts:{quantifier:"atLeast",quantity:1}},()=>{}),t={atLeast:n=>(e=s$(e,e=>{e.numberOfAccounts.quantifier="atLeast",e.numberOfAccounts.quantity=n}),t),exactly:n=>(e=s$(e,e=>{e.numberOfAccounts.quantifier="exactly",e.numberOfAccounts.quantity=n}),t),withProof:(n=!0)=>(e=s$(e,e=>{e.withProof=n}),t),reset:(n=!0)=>(e=s$(e,e=>{e.reset=n}),t),_toObject:()=>({accounts:e})};return t},personaData:(e={})=>{let t=s$(e,()=>{}),n=e=>({atLeast:n=>(t=s$(t,t=>{t[e]={quantifier:"atLeast",quantity:n}}),r),exactly:n=>(t=s$(t,t=>{t[e]={quantifier:"exactly",quantity:n}}),r)}),r={fullName:(e=!0)=>(t=s$(t,t=>{t.fullName=e}),r),emailAddresses:(e=!0)=>(n("emailAddresses").exactly(e?1:0),r),phoneNumbers:(e=!0)=>(n("phoneNumbers").exactly(e?1:0),r),reset:(e=!0)=>(t=s$(t,t=>{t.reset=e}),r),_toObject:()=>({personaData:t})};return r},persona:(e={withProof:!1})=>{let t=s$(e,()=>{}),n={withProof:(e=!0)=>(t=s$(t,t=>{t.withProof=e}),n),_toObject:()=>({persona:t})};return n},config:e=>({_toObject:()=>({...e})})}}}]);